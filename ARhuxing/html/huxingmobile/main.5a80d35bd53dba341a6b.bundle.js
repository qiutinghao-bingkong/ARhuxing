webpackJsonp([1],{"+ByO":function(t,e,n){"use strict";var o=n("/oeL"),i=n("8Tef"),r=n("WFe8"),s=n("Yyq6"),a=n("YihH"),l=n("CW6F");n.d(e,"a",function(){return h});var u=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),h=function(t){function e(n,o){var i=t.call(this,n,o)||this;return e._instance=i,i}return u(e,t),Object.defineProperty(e,"inst",{get:function(){return e._instance},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.updateComponentProperty()},e.prototype.open=function(t){this.target=t,this.visible="true",t instanceof r.a?(this.wallSettingBar.visible="true",this.openingSettingBar.visible="false",this.structSettingBar.visible="false",this.wallSettingBar.setTargetWall(t)):t instanceof s.a?(this.wallSettingBar.visible="false",this.openingSettingBar.visible="true",this.structSettingBar.visible="false",this.openingSettingBar.setTargetOpening(t)):t instanceof l.a&&(this.wallSettingBar.visible="false",this.openingSettingBar.visible="false",this.structSettingBar.visible="true",this.structSettingBar.setTargetStruct(t)),this.moveCenter(!1)},e.prototype.close=function(){this.visible="false",this.wallSettingBar.visible="false",this.openingSettingBar.visible="false",this.structSettingBar.visible="false"},e.prototype.moveLeft=function(){this.transition(this.dom,"left 0.25s ease-out");var t=a.a.inst.totalWidth,e=Math.round((window.innerWidth-this.totalWidth)/2);if(window.innerWidth-e-this.totalWidth-t<25){var n=window.innerWidth-t-this.totalWidth-25;this.left=Math.max(0,n)}},e.prototype.moveCenter=function(t){void 0===t&&(t=!0),1==t?this.transition(this.dom,"left 0.25s ease-out"):this.transition(this.dom,""),this.left=Math.round((window.innerWidth-this.totalWidth)/2)},Object.defineProperty(e.prototype,"totalWidth",{get:function(){return"true"==this.wallSettingBar.visible?this.wallSettingBar.widthNumber:"true"==this.openingSettingBar.visible?this.openingSettingBar.widthNumber:"true"==this.structSettingBar.visible?this.structSettingBar.widthNumber:0},enumerable:!0,configurable:!0}),e.ctorParameters=function(){return[{type:o.Q},{type:o._18}]},e}(i.a)},"+DHO":function(t,e,n){"use strict";var o=n("/oeL"),i=n("8Tef"),r=n("oFVN"),s=n("Tcd4");n.d(e,"a",function(){return l});var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),l=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.titleText="长度",o.removeIconUp="assets/components/virtualboard/remove_up_3x.png",o.removeIconDown="assets/components/virtualboard/remove_up_3x.png",o.confirmIconUp="assets/components/virtualboard/confirm_up_3x.png",o.confirmIconDown="assets/components/virtualboard/confirm_up_3x.png",o}return a(e,t),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.updateComponentProperty()},e.prototype.updateSize=function(t,e){this.width=t+"px",this.height=e+"px",this.renderer.setStyle(this.titleBg.nativeElement,"height",Math.floor(.321*e)+"px"),this.renderer.setStyle(this.title.nativeElement,"height",Math.floor(.13*e)+"px"),this.renderer.setStyle(this.title.nativeElement,"line-height",Math.floor(.13*e)+"px"),this.targetInput.height=Math.floor(.18*e)+"px",this.bluetoothButton.right=Math.floor(.07*t),this.bluetoothButton.top=Math.floor(.174*e),this.bluetoothButton.width=Math.floor(.32*t)+"px",this.bluetoothButton.height=Math.floor(.085*e)+"px";var n=Math.floor(t/3-1)+"px",o=Math.floor(.172*e-1)+"px";this.key0.width=n,this.key0.height=o,this.key1.width=n,this.key1.height=o,this.key2.width=n,this.key2.height=o,this.key3.width=n,this.key3.height=o,this.key4.width=n,this.key4.height=o,this.key5.width=n,this.key5.height=o,this.key6.width=n,this.key6.height=o,this.key7.width=n,this.key7.height=o,this.key8.width=n,this.key8.height=o,this.key9.width=n,this.key9.height=o;var i=Math.floor(t/3-1)+"px",r=Math.floor(.172*e-1)+"px";this.removeKey.width=i,this.removeKey.iconWidth=i,this.removeKey.height=r,this.removeKey.iconHeight=r,this.confirmKey.width=i,this.confirmKey.iconWidth=i,this.confirmKey.height=r,this.confirmKey.iconHeight=r},e.prototype.setData=function(t,e){this.titleText=t,this.targetInput.finalLabel=e.toString()},e.prototype.add=function(t){if(this.targetInput){var e,n=this.targetInput.label;e="0"==t&&"0"==n?"0":n+t,parseInt(e)>r.a.MAX_NUM&&(e=n),this.targetInput.label=parseInt(e).toString()}},e.prototype.remove=function(){if(this.targetInput){var t,e=this.targetInput.label;t=e.length>1?e.substr(0,e.length-1):"0",this.targetInput.label=parseInt(t).toString()}},e.prototype.confirm=function(){if(this.targetInput){var t=this.targetInput.label;parseInt(t)>r.a.MAX_NUM&&(t=r.a.MAX_NUM.toString()),parseInt(t)<r.a.MIM_NUM&&(t=r.a.MIM_NUM.toString()),this.targetInput.finalLabel=t,this.dispatchEvent(new s.a(s.a.VIRTUAL_NUMBER_BOARD_CONFIRM,parseInt(t)),this)}},e.prototype.blueTooth=function(){CallJS.addCallback("app_js_measuring",this.app_js_measuring,this),CallJS.js_app_measuring()},e.prototype.app_js_measuring=function(t){if(CallJS.clearCallback("app_js_measuring"),t){var e=Math.round(1e3*t);this.targetInput.finalLabel=e.toString()}},e.ctorParameters=function(){return[{type:o.Q},{type:o._18}]},e}(i.a)},"+Hrd":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=[".head[_ngcontent-%COMP%]{top:0;height:48px;border-bottom:1px solid #e3e3e3}.body[_ngcontent-%COMP%], .head[_ngcontent-%COMP%]{position:absolute;left:0;width:100%;background-color:#f6f6f6}.body[_ngcontent-%COMP%]{top:49px}.foot[_ngcontent-%COMP%]{position:absolute;left:0;width:100%;height:52px;background-color:#fff;border-top:1px solid #f6f6f6}.title[_ngcontent-%COMP%]{float:none;margin:14px auto;width:30px;height:20px;line-height:20px;text-align:center;vertical-align:middle;font-size:14px;color:#333;letter-spacing:0}.left[_ngcontent-%COMP%]{top:0;padding-top:10px;border-right:1px solid #e3e3e3}.left[_ngcontent-%COMP%], .right[_ngcontent-%COMP%]{position:absolute;bottom:0;height:100%}.right[_ngcontent-%COMP%]{top:10px;overflow-x:hidden;overflow-y:scroll}option-navigation-item[_ngcontent-%COMP%]{margin-bottom:1px;background-color:#fff}option-input[_ngcontent-%COMP%]{margin-bottom:8px;border-radius:4px;background-color:#fff}radio-button[_ngcontent-%COMP%]{margin-bottom:1px;background-color:#fff}.cancelButton[_ngcontent-%COMP%]{float:left;margin-left:10px;margin-top:9px}.defaultButton[_ngcontent-%COMP%], .finishButton[_ngcontent-%COMP%]{position:absolute;top:7px}"]},"+N0H":function(t,e,n){"use strict";var o=n("DLyt"),i=n("InW/"),r=n("w9Am"),s=n("KE74"),a=n("Yyq6"),l=n("PSoK"),u=n("WFe8"),h=n("r4QP"),c=n("Yhhh"),p=n("/T2q"),d=n("Pu9O"),f=n("lbiv"),g=n("byMr"),m=n("vP7T"),_=n("gILL"),y=n("snVD"),b=n("ANVg"),v=n("ChOG"),w=n("zvuX"),x=n("ThMJ"),O=n("MhWs"),P=n("UPT1"),E=n("ZvbM"),C=n("SJcU"),S=n("bv23"),T=n("PbJf"),L=n("ezNz"),M=n("Xx/s"),N=n("CW6F"),I=n("fqCj"),A=n("jDyV"),R=n("aJ2T"),D=n("Eezr");n.d(e,"a",function(){return U});var k=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),U=function(t){function e(){var n=t.call(this)||this;return n.no=null,n._newBuilt=null,n._contentChanged=null,n.grid=null,n.backup=null,n._tmpPoint=new d.a,n._boundRect=new m.a,n._centerScale=0,n._centerPoint=new d.a(0,0),e._instance=n,E.a.MSCENE=n,n.no=f.a.createPureUID(),n.newBuilt=!0,n.contentChanged=!0,n.backup=i.a.getInstance(),n.createChildren(),n.scaleX=1,n.scaleY=1,n}return k(e,t),e.prototype.createChildren=function(){this.grid=new o.a(e.MAX_SIZE),this.addChild(this.grid),this.addExtraLayers()},Object.defineProperty(e,"inst",{get:function(){return null==e._instance&&(e._instance=new e),e._instance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tagName",{get:function(){return"MScene"},enumerable:!0,configurable:!0}),e.prototype.onAdd=function(){t.prototype.onAdd.call(this),O.a.inst.addEvent(x.a.DRAG_ENTER,this.dragEnterHandler,this)},e.prototype.onRemove=function(){t.prototype.onRemove.call(this),O.a.inst.removeEvent(x.a.DRAG_ENTER,this.dragEnterHandler,this)},e.prototype.propertyChangeHandler=function(){P.a.inst.update(),r.a.inst.update(),L.a.inst.update()},e.prototype.clear=function(){this.clearContent(),this.backup.clear(),this.contentChanged=!0},e.prototype.clearData=function(){this.clearContent(),this.change(!0,!0)},e.prototype.clearModels=function(){for(var t in this.models)this.removeModel(this.getModelByName(t));this.change()},e.prototype.clearContent=function(){L.a.inst.clear(),t.prototype.clearContent.call(this)},e.prototype.open=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null),this.clear(),t?(this.no=t,this.newBuilt=!1):(this.no=f.a.createPureUID(),this.newBuilt=!0);var n=!0;if(e){try{this.loadData(e),n=!0}catch(t){n=!1}this.change(!0,!0)}return this.center(),r.a.inst.update(),this.updateRuler(),n},Object.defineProperty(e.prototype,"boundRect",{get:function(){if(0==this.getLength(this.rooms))return this._boundRect.x=-300,this._boundRect.y=-300,this._boundRect.width=600,this._boundRect.height=600,this._boundRect;var t,e,n=Number.MAX_VALUE,o=Number.MAX_VALUE,i=-Number.MAX_VALUE,r=-Number.MAX_VALUE;for(var s in this.rooms){t=this.rooms[s];for(var a=0;a<t.boundPolygon.pointLength;a++)e=t.boundPolygon.getPointAt(a),n=Math.min(e.x,n),o=Math.min(e.y,o),i=Math.max(e.x,i),r=Math.max(e.y,r)}for(var s in this.openings)for(var l=this.openings[s],h=l.getBoudaryPolygon(),c=0,p=h.points;c<p.length;c++){var d=p[c];e=l.localToScene(d),n=Math.min(e.x,n),o=Math.min(e.y,o),i=Math.max(e.x,i),r=Math.max(e.y,r)}return n-=u.a.DEFAULT_LENGTH,o-=u.a.DEFAULT_LENGTH,i+=u.a.DEFAULT_LENGTH,r+=u.a.DEFAULT_LENGTH,this._boundRect.x=n,this._boundRect.y=o,this._boundRect.width=i-n,this._boundRect.height=r-o,this._boundRect},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"centerScale",{get:function(){return this._centerScale},set:function(t){this._centerScale=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"viewRect",{get:function(){this._viewRect||(this._viewRect=new m.a);var t=new d.a(-e.MAX_SIZE/2,-e.MAX_SIZE/2),n=new d.a(e.MAX_SIZE/2,e.MAX_SIZE/2);return this._viewRect.setTo(t.x,t.y,n.x-t.x,n.y-t.y),this._viewRect},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"centerPoint",{get:function(){var t=this.boundRect;return this._centerPoint.setTo(t.x+.5*t.width,t.y+.5*t.height),this._centerPoint},enumerable:!0,configurable:!0}),e.prototype.calcArea=function(){var t=0;for(var e in this.rooms){t+=this.rooms[e].calcArea()}return t},e.prototype.calcPureArea=function(){var t=0;for(var e in this.rooms){t+=this.rooms[e].calcPureArea()}return t},e.prototype.dumpString=function(){var t=this.dumpData();return JSON.stringify(t)},e.prototype.loadString=function(t){var e=JSON.parse(t);this.loadData(e)},e.prototype.dumpData=function(){var t,e=new Object;e.setting=this.setting.dumpData(),e.corners=new Array;for(var n in this.corners){t=this.corners[n].dumpData(),t&&e.corners.push(t)}e.walls=new Array;for(var n in this.walls){t=this.walls[n].dumpData(),t&&e.walls.push(t)}e.rooms=new Array;for(var n in this.rooms){t=this.rooms[n].dumpData(),t&&e.rooms.push(t)}e.openings=new Array;for(var n in this.openings){t=this.openings[n].dumpData(),t&&e.openings.push(t)}e.models=new Array;for(var n in this.models){t=this.models[n].dumpData(),t&&e.models.push(t)}e.structs=new Array;for(var n in this.structs){t=this.structs[n].dumpData(),t&&e.walls.push(t)}e.notes=new Array;for(var o=L.a.inst.notes,i=0,r=o;i<r.length;i++){t=r[i].dumpData(),t&&e.notes.push(t)}return e},e.prototype.loadData=function(t,e){void 0===e&&(e=!1);var n;t.hasOwnProperty("setting")&&this.setting.loadData(t.setting);var o,i;for(o in t.corners)n=t.corners[o],(i=l.a.loadData(n))&&this.addCorner(i);for(var r,h,c=0,p=t.walls;c<p.length;c++)if(n=p[c],1==n.hasOwnProperty("structType")&&n.structType!=A.a.WALL){if(!(h=N.a.loadData(n)))continue;this.addStruct(h)}else{if(!(r=u.a.loadData(n)))continue;this.addWall(r)}for(o in this.corners)i=this.corners[o],i.calcWallCorner();for(o in this.walls)r=this.walls[o],r.setPolygonChangeFlag(!0),r.calculateTransform();var d;for(o in t.rooms)n=t.rooms[o],(d=s.a.loadData(n))&&this.addRoom(d);var f=t.openings;for(o in f){n=f[o];var g=a.a.loadData(n);g&&this.addOpening(g)}var m;if(t.hasOwnProperty("notes"))for(o in t.notes)n=t.notes[o],(m=M.a.loadData(n))&&L.a.inst.addNote(m)},e.prototype.undo=function(){var t=this.backup.popUndoObject();t&&(this.clearContent(),this.loadData(t,!1),this.change(!1,!0))},e.prototype.redo=function(){var t=this.backup.popRedoObject();t&&(this.clearContent(),this.loadData(t,!1),this.change(!1,!0))},e.prototype.change=function(e,n){void 0===e&&(e=!0),void 0===n&&(n=!1),t.prototype.change.call(this),n&&(this.rebuildScene(),this.correctionContent(),r.a.inst.update(),P.a.inst.update()),e&&this.backup.backup(this.dumpData()),this.contentChanged=!0,this.dispatchEvent(new p.a(p.a.MSCENE_CONTENT_CHANGED),this)},Object.defineProperty(e.prototype,"newBuilt",{get:function(){return this._newBuilt},set:function(t){this._newBuilt=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentChanged",{get:function(){return this._contentChanged},set:function(t){this._contentChanged=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"savable",{get:function(){return!this.empty},enumerable:!0,configurable:!0}),e.prototype.addPath=function(e,n){if(void 0===n&&(n=!1),!(e.length<2)){for(var o=n?e.length:e.length-1,i=0;i<o;i++){var r=e[i],s=e[_.a.nextIndex(i,e.length)];if(!this.getWallByEnds(r,s)){var a=this.createWallByEnds(r,s);a&&(a.realHeight=this.setting.getStoreyHeight(T.a.CM),this.addWall(a))}}this.change(!0,!0);for(var l in this.corners){this.corners[l].calcWallCorner()}for(var l in this.walls){var a=this.walls[l];a.setPolygonChangeFlag(!0),a.calculateTransform()}P.a.inst.update(),t.prototype.addPath.call(this,e,n)}},e.prototype.snapshot=function(t,e,n,o){var i=this;void 0===n&&(n=null),void 0===o&&(o=null),this.center();for(var r in this.rooms){this.rooms[r].addColorFloor()}this.grid.visible=!1;var s=Math.round((window.innerWidth-t)/2);s=Math.max(s,0);var a=Math.round((window.innerHeight-e)/2);a=Math.max(a,0),html2canvas(this.viewPort.dom,{useCORS:!0,x:s,y:a,width:t,height:e}).then(function(r){var s=Canvas2Image.convertToJPEG(r,t,e);n&&n.call(o,s),i.grid.visible=!0;for(var a in i.rooms){i.rooms[a].removeColorFloor()}})},e.prototype.rebuildScene=function(){var t,e,n,o;for(n in this.walls)e=this.walls[n],1==e.empty&&this.removeWall(e,!0);var i=new v.a;for(n in this.walls)e=this.walls[n],i.addEdge(e.start,e.stop);i.processEdgeClean(),i.polygonize();var r=y.a.getInstance();r.clear();for(n in this.walls)e=this.walls[n],o=new b.a(e.start,e.stop),o.mark=e.name,r.inputMarkedEdges.push(o);for(var a=i.getEdges(),l=0,u=a;l<u.length;l++)o=u[l],r.inputFreshEdges.push(o);r.merge();for(var h=0,c=r.outputCreateEdges;h<c.length;h++)o=c[h],(e=this.createWallByEnds(o.start,o.stop))&&this.addWall(e);for(var d=0,f=r.outputDeleteEdges;d<f.length;d++)o=f[d],(e=this.getWallByName(o.mark))&&this.removeWall(e,!1);var m=w.a.getInstance();m.clear();for(n in this.rooms){var t=this.rooms[n];t.boundPolygon.mark=t.name,m.inputMarkedPolys.push(t.boundPolygon)}for(var _=0;_<i.shapeCount;_++)m.inputFreshPolys.push(g.a.createByPath(i.getShapeAt(_)));m.merge();for(var x,O,P=0,E=m.outputUpdatePolys;P<E.length;P++)if(O=E[P],t=this.getRoomByName(O.mark)){t.clearWallRelation(),t.boundPolygon.clear();for(var C=0,S=O.vertices;C<S.length;C++)x=S[C],t.boundPolygon.addVertex(x);t.computeOverrideBoundPolygon(),t.setPolygonChangeFlag(!0),t.createWallRelation(),t.calculateTransform()}for(var T=0,L=m.outputDeletePolys;T<L.length;T++)O=L[T],(t=this.getRoomByName(O.mark))&&this.removeRoom(t);for(var M=0,N=m.outputCreatePolys;M<N.length;M++){O=N[M],t=new s.a;for(var I=0,A=O.vertices;I<A.length;I++)x=A[I],t.boundPolygon.addVertex(x);t.computeOverrideBoundPolygon(),this.addRoom(t)}m.outputCreatePolys.length>0&&this.dispatchEvent(new p.a(p.a.MSCENE_DRAW_CLOSED),this);for(var n in this.corners){this.corners[n].calculateTransform()}var t,R,k=[];for(var n in this.rooms)t=this.rooms[n],R={area:t.calcArea(),room:t},k.push(R);k.sort(function(t,e){return t.area<e.area?1:-1});for(var U=0,H=0,W=k;H<W.length;H++)R=W[H],t=R.room,t.depth=D.a.ROOM+U,U+=1},e.prototype.correctionContent=function(){var t;for(var e in this.openings){if(t=this.getOpeningByName(e),null==t.wall){var n=this.calcOpeningAttachWall(new d.a(t.realX,t.realY));n&&(t.wallName=n.name)}t&&!t.isLegal()&&this.removeOpening(t)}},e.prototype.dragEnterHandler=function(t){var e=t.data,n=e.sourceData,o=n;o.type==I.a.OPENING?this.dragOpeningDropHandler(t):o.type==I.a.STRUCT&&this.dragStructDropHandler(t)},e.prototype.dragOpeningDropHandler=function(t){var e=t.data,n=e.sourceData,o=n.subType;this._tmpPoint.setTo(e.mouseX,e.mouseY);var i=this.globalToLocal(this._tmpPoint),r=this.calcOpeningAttachWall(i);if(r){var s=_.a.calcFoot(r.start,r.stop,i),l=new a.a(o);l.wallName=r.name;var u=s.x,c=s.y,p=0,f=r.realRotationZ;l.wallName=r.name;var g,m=r.sceneToLocal(s).x,y=r.getLegalOpeningPosition(m,l),b=y[0],v=y[1];g=a.a.MIN_WIDTH;var w=v-b,x=(v+b)/2,O=90;if(l.type==h.a.DOOR_COMMON?(O=90,210):l.type==h.a.DOOR_DOUBLE?(O=160,210):l.type==h.a.DOOR_SLIDING?(O=140,210):l.type==h.a.WINDOW_COMMON?(O=120,150,p=80):l.type==h.a.WINDOW_FRENCH?(O=180,210,p=0):l.type==h.a.WINDOW_BAY&&(O=120,140,p=70),_.a.less(w,O)&&_.a.less(g,w)&&w>=g)u=r.localToScene(new d.a(x,0)).x,c=r.localToScene(new d.a(x,0)).y,O=w;else{m=r.sceneToLocal(new d.a(u,c)).x;var P=r.getLegalRange(m);P.minX+O/2>m?(m=P.minX+O/2,u=r.localToScene(new d.a(m,0)).x,c=r.localToScene(new d.a(m,0)).y):P.maxX-O/2<m&&(m=P.maxX-O/2,u=r.localToScene(new d.a(m,0)).x,c=r.localToScene(new d.a(m,0)).y)}if(l.realX=u,l.realY=c,l.realZ=p,l.type==h.a.WINDOW_BAY?r.forwardRoom?l.realRotationZ=f:l.realRotationZ=f+180:l.realRotationZ=f,l.realWidth=O,this.addOpening(l),!l.wall||!l.isLegal())return void this.removeOpening(l);this.change()}},e.prototype.dragStructDropHandler=function(t){var e=t.data,n=e.sourceData,o=n.subType;this._tmpPoint.setTo(e.mouseX,e.mouseY);var i=this.globalToLocal(this._tmpPoint),r=new N.a;r.create(65,65),r.structType=o,r.realX=i.x,r.realY=i.y,r.calculateTransform(),this.addStruct(r)},e.prototype.createNote=function(){var t=new M.a,e=Math.round(window.innerWidth/2)-40,n=Math.round(window.innerHeight/2),o=40*(Math.random()-.5),i=40*(Math.random()-.5),r=this.globalToLocal(new d.a(e+o,n+i));t.x=r.x,t.y=r.y,L.a.inst.addNote(t),this.change(!0,!1)},e.prototype.removeNote=function(t){L.a.inst.removeNote(t)},e.prototype.center=function(){var t=this.boundRect,n=(Math.round(window.innerWidth),Math.round(window.innerHeight-28)),o=Math.max(t.width,t.height),i=n/o;i=Math.min(e.SCALE_MAX_VALUE,Math.max(e.SCALE_MIN_VALUE,i)),i*=.9,i*=10,i=Math.round(i)/10,this.scaleScene(i,new d.a(0,0));var s=new d.a;s.setTo(t.x+.5*t.width,t.y+.5*t.height-28),this.viewPort.lookAt(s),r.a.inst.update(),P.a.inst.update()},e.prototype.scaleScene=function(t,n){if(!(t>e.SCALE_MAX_VALUE||t<e.SCALE_MIN_VALUE)){var o=this.scaleX,i=n.clone(),r=new S.a;r.scale(t/o,t/o);var s=r.transformPoint(n);this.scaleX=this.scaleY=t,this.x+=i.x-s.x,this.y+=i.y-s.y}},e.prototype.addExtraLayers=function(){this.addChild(P.a.inst.rulerGroup),this.addChild(r.a.inst),this.addChild(L.a.inst),L.a.inst.update()},e.prototype.removeExtraLayers=function(){this.removeChild(P.a.inst.rulerGroup),this.removeChild(r.a.inst),this.removeChild(L.a.inst)},e.prototype.showTargetRuler=function(t){t instanceof u.a?P.a.inst.showWallInputRuler(t):t instanceof a.a?P.a.inst.showOpeningRuler(t):t instanceof l.a?P.a.inst.showCornerRuler(t):t instanceof c.a&&P.a.inst.showModelRuler(t)},e.prototype.updateRuler=function(){P.a.inst.update()},e.prototype.unfocus=function(){R.a.inst.unfocus()},e}(C.a);U.SCALE_MAX_VALUE=2.5,U.SCALE_MIN_VALUE=.2,U.MAX_SIZE=3e3,U._instance=null},"+h1B":function(t,e,n){"use strict";var o=n("/oeL"),i=n("aR8+"),r=n("wQAS"),s=n("DLok"),a=n("Ivjm"),l=n("gEyJ"),u=n("q4dy"),h=n("qbdv"),c=n("fc+i"),p=n("XKz0");n.d(e,"a",function(){return d});var d=o.b(i.a,[r.a],function(t){return o.c([o.d(512,o.e,o.f,[[8,[s.a,a.a,l.a,u.a]],[3,o.e],o.g]),o.d(5120,o.h,o.i,[[3,o.h]]),o.d(4608,h.a,h.b,[o.h]),o.d(4608,o.j,o.j,[]),o.d(5120,o.k,o.l,[]),o.d(5120,o.m,o.n,[]),o.d(5120,o.o,o.p,[]),o.d(4608,c.b,c.c,[h.c]),o.d(6144,o.q,null,[c.b]),o.d(4608,c.d,c.e,[]),o.d(5120,c.f,function(t,e,n,o){return[new c.g(t),new c.h(e),new c.i(n,o)]},[h.c,h.c,h.c,c.d]),o.d(4608,c.j,c.j,[c.f,o.r]),o.d(135680,c.k,c.k,[h.c]),o.d(4608,c.l,c.l,[c.j,c.k]),o.d(6144,o.s,null,[c.l]),o.d(6144,c.m,null,[c.k]),o.d(4608,o.t,o.t,[o.r]),o.d(4608,c.n,c.n,[h.c]),o.d(4608,c.o,c.o,[h.c]),o.d(4608,p.a,p.b,[h.c,o.u,p.c]),o.d(4608,p.d,p.d,[p.a,p.e]),o.d(5120,p.f,function(t){return[t]},[p.d]),o.d(4608,p.g,p.g,[]),o.d(6144,p.h,null,[p.g]),o.d(4608,p.i,p.i,[p.h]),o.d(6144,p.j,null,[p.i]),o.d(5120,p.k,p.l,[p.j,[2,p.f]]),o.d(4608,p.m,p.m,[p.k]),o.d(512,h.d,h.d,[]),o.d(1024,o.v,c.p,[]),o.d(1024,o.w,function(t,e){return[c.q(t,e)]},[[2,c.r],[2,o.x]]),o.d(512,o.y,o.y,[[2,o.w]]),o.d(131584,o.z,o.z,[o.r,o.A,o.B,o.v,o.e,o.y]),o.d(2048,o.C,null,[o.z]),o.d(512,o.D,o.D,[o.C]),o.d(512,c.s,c.s,[[3,c.s]]),o.d(512,p.n,p.n,[]),o.d(512,p.o,p.o,[]),o.d(512,i.a,i.a,[]),o.d(256,p.c,"XSRF-TOKEN",[]),o.d(256,p.e,"X-XSRF-TOKEN",[])])})},"/5Oe":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=[".resourceOperator[_ngcontent-%COMP%]{position:absolute;width:48px;height:127px;background-color:#fff;border-radius:4px;border:1px solid #e3e3e3;box-shadow:0 2px 4px 0 hsla(0,0%,84%,.5)}.VToolButton[_ngcontent-%COMP%]{position:absolute;left:4px;width:40px;height:35px;text-align:center}huxing-struct-view[_ngcontent-%COMP%]{position:absolute;left:0;top:56px;bottom:0;width:200px;background-color:#f6f6f6;overflow-x:hidden;overflow-y:scroll}"]},"/I48":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=[".bg[_ngcontent-%COMP%]{width:100%;height:100%;background-color:rgba(0,0,0,.8)}.bar[_ngcontent-%COMP%]{position:absolute;left:0;right:0;top:15%;margin:auto;width:420px}.bar[_ngcontent-%COMP%], .textInput[_ngcontent-%COMP%]{height:38px;line-height:38px}.textInput[_ngcontent-%COMP%]{float:left;margin-right:6px;width:250px;border:1px dashed #fff;background-color:transparent;color:#fff;font-size:16px;text-align:center}.colorButton[_ngcontent-%COMP%]{float:left;margin-left:10px;margin-top:6px}"]},"/T2q":function(t,e,n){"use strict";var o=n("iHFl");n.d(e,"a",function(){return r});var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=function(t){function e(e,n){return void 0===n&&(n=null),t.call(this,e,n)||this}return i(e,t),e}(o.a);r.MSCENE_CONTENT_CHANGED="MSCENE_CONTENT_CHANGED",r.MSCENE_RULER_CHANGED="MSCENE_RULER_CHANGED",r.MSCENE_NOTE_CHANGED="MSCENE_NOTE_CHANGED",r.MSCENE_ITEM_SELECTED="MSCENE_ITEM_SELECTED",r.MSCENE_ITEM_UNSELECTED="MSCENE_ITEM_UNSELECTED",r.MSCENE_DRAW_CLOSED="MSCENE_DRAW_CLOSED"},"/ZnK":function(t,e,n){"use strict";var o=n("gILL");n.d(e,"a",function(){return i});var i=function(){function t(){}return t.drawLine=function(t,e,n){t.moveTo(e.x,e.y),t.lineTo(n.x,n.y)},t.drawPath=function(t,e,n){if(void 0===n&&(n=!1),0!=e.length){t.moveTo(e[0].x,e[0].y);for(var o=1;o<e.length;o++)t.lineTo(e[o].x,e[o].y);n&&t.lineTo(e[0].x,e[0].y)}},t.drawRect=function(t,e){t.drawRect(e.x,e.y,e.width,e.height)},t.drawTransparentRect=function(t,e){t.beginFill(16777215,0),this.lineStyleEmpty(t),t.drawRect(e.x,e.y,e.width,e.height),t.endFill()},t.drawAuxiliary=function(t,e,n,i,r,s){void 0===r&&(r=3355443),void 0===s&&(s=75),o.a.isPointEqual(e,n)||(t.beginFill(r,.5),t.lineStyle(2,0,1),t.drawCircle(e.x,e.y,s),t.endFill(),t.lineStyle(2,r,1),o.a.isNumberEqual(e.x,n.x,.1)||(t.moveTo(e.x,i.top),t.lineTo(e.x,i.bottom)),o.a.isNumberEqual(e.y,n.y,.1)||(t.moveTo(i.left,e.y),t.lineTo(i.right,e.y)),t.endStroke())},t.lineStyleEmpty=function(t){t.lineStyle()},t}()},"/hM2":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=["p[_ngcontent-%COMP%]{margin-top:5px;height:12;text-align:center;font-size:12;color:#333}div[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{width:40px}div[_ngcontent-%COMP%]{height:40px}"]},"/m+Y":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){this.wallName="",this.reversed=!1,this.mirror=!0,this.x=0,this.y=0,this.width=0}return t.prototype.OpeningBackup=function(){},t.prototype.backup=function(t){this.wallName=t.wallName,this.reversed=t.reversed,this.mirror=t.mirror,this.x=t.realX,this.y=t.realY,this.width=t.realWidth},t.prototype.rollback=function(t){var e=t.scene.getWallByName(this.wallName);e&&(t.wallName=this.wallName,t.realWidth=this.width,t.realX=this.x,t.realY=this.y,t.mirror=this.mirror,t.realRotationZ=e.realRotationZ,this.reversed&&(t.realRotationZ+=180))},t}()},0:function(t,e,n){t.exports=n("cDNt")},"07lr":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){}return t}();o.NULL="null",o.VERTEX="vertex",o.EDGE="edge",o.ALIGN="align"},"12Og":function(t,e,n){"use strict";var o=n("ZvbM"),i=n("Eezr"),r=n("Yyq6"),s=n("WFe8"),a=n("Pu9O"),l=n("gILL"),u=n("vgYD"),h=n("hSl8"),c=n("tTVb");n.d(e,"a",function(){return d});var p=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),d=function(t){function e(e){void 0===e&&(e=!0);var n=t.call(this,!0,!0)||this;return n._opening=null,n._isStart=!1,n.borderColor=0,n.fillColor=0,n.dragTouchMoveHandlerLamda=function(t){return n.dragTouchMoveHandler(t)},n.dragTouchEndHandlerLamda=function(t){return n.dragTouchEndHandler(t)},n.depth=i.a.OPENING_CTRL,n.opening=null,n.isStart=e,n}return p(e,t),Object.defineProperty(e.prototype,"tagName",{get:function(){return"OpeningCtrl"},enumerable:!0,configurable:!0}),e.getStartInstance=function(){return null==e._startInstance&&(e._startInstance=new e(!0)),e._startInstance},e.getStopInstance=function(){return null==e._stopInstance&&(e._stopInstance=new e(!1)),e._stopInstance},e.prototype.onAdd=function(){t.prototype.onAdd.call(this),0==h.a.isMobile?this.mouseEnable=!0:this.touchEnable=!0,this.calculateTransform()},e.prototype.onRemove=function(){t.prototype.onRemove.call(this)},e.prototype.touchStart=function(e){e.touches.length>1||(t.prototype.touchStart.call(this,e),this.dragTouchStartHandler(e))},e.prototype.touchEnd=function(e){1==this.hasMouseDown&&t.prototype.touchEnd.call(this,e)},e.prototype.focusOut=function(){t.prototype.focusOut.call(this),e.getStartInstance().close(),e.getStopInstance().close()},e.prototype.dragTouchStartHandler=function(t){this.opening&&(this.stage.addEventListener(c.a.TOUCH_MOVE,this.dragTouchMoveHandlerLamda),this.stage.addEventListener(c.a.TOUCH_END,this.dragTouchEndHandlerLamda),this.opening.backup.backup(this.opening))},e.prototype.dragTouchMoveHandler=function(t){if(this.opening&&0!=this.hasMouseDown&&!(t.touches.length>1)){var n=t.touches[0],o=this.scene.globalToLocal(new a.a(n.clientX,n.clientY)),i=l.a.calcFoot(this.opening.start,this.opening.stop,o);if(this.isLegal(i)){this.setRealPositionTo(i),this.calculateTransform();var r=new a.a;this.isStart?r.setTo(e.getStopInstance().realX,e.getStopInstance().realY):r.setTo(e.getStartInstance().realX,e.getStartInstance().realY),this.opening.realX=.5*(this.realX+r.x),this.opening.realY=.5*(this.realY+r.y),this.opening.realWidth=i.subtract(r).length,this.opening.calculateTransform()}}},e.prototype.dragTouchEndHandler=function(t){this.hasMouseDown=!1,this.stage.removeEventListener(c.a.TOUCH_MOVE,this.dragTouchMoveHandlerLamda),this.stage.removeEventListener(c.a.TOUCH_END,this.dragTouchEndHandlerLamda),this.scene.change()},e.prototype.isLegal=function(t){if(!this.opening)return!1;if(!this.opening.wall)return!1;var n=new a.a;if(this.isStart?n.setTo(e.getStopInstance().realX,e.getStopInstance().realY):n.setTo(e.getStartInstance().realX,e.getStartInstance().realY),t.subtract(n).length<=r.a.MIN_WIDTH)return!1;var o=this.opening.wall,i=o.sceneToLocal(t).x,s=o.sceneToLocal(n).x;if(l.a.less(i,o.minOpeningStartX))return!1;if(l.a.less(o.maxOpeningStopX,i))return!1;for(var u,h=o.openings,c=0,p=h;c<p.length;c++)if(u=p[c],(u=this.scene.getOpeningByName(u.name))&&u.name!=this.opening.name){if(l.a.isNumberEqual(i,u.startWallX))return!1;if(l.a.isNumberEqual(i,u.stopWallX))return!1;if(l.a.greater(i,u.startWallX)&&l.a.less(i,u.stopWallX))return!1;if(l.a.greater(u.startWallX,Math.min(i,s))&&l.a.less(u.startWallX,Math.max(i,s)))return!1}return!0},e.prototype.clear=function(){t.prototype.clear.call(this),this.opening=null},e.prototype.open=function(t){this.close(),this.opening=t,this.scene.addChild(this)},e.prototype.close=function(){this.scene.contains(this)&&this.scene.removeChild(this),this.clear()},Object.defineProperty(e.prototype,"opening",{get:function(){return this._opening},set:function(t){this._opening=t,this.realX=this.position.x,this.realY=this.position.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){if(!this.opening)return new a.a;new a.a;return this.isStart?this.opening.start:this.opening.stop},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isStart",{get:function(){return this._isStart},set:function(t){this._isStart=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){return.5*s.a.DEFAULT_LENGTH},enumerable:!0,configurable:!0}),e.prototype.calculateTransform=function(){this.x=this.realX,this.y=this.realY,this.draw()},e.prototype.draw=function(){this.stage&&(this.graphics.clear(),this.graphics.width=this.radius,this.graphics.height=this.radius,this.graphics.lineStyle(2,u.a.OPENING_CTRL_BORDER_COLOR),this.graphics.beginFill(u.a.OPENING_CTRL_FILL_COLOR),this.graphics.drawCircle(0,0,this.radius),this.graphics.endFill())},e}(o.a);d._startInstance=null,d._stopInstance=null},"15L3":function(t,e,n){"use strict";function o(t){return s._12(0,[s._13(402653184,1,{labelRef:0}),(t()(),s._15(0,[[1,0],["lb",1]],null,0,"div",[["class","label"]],null,null,null,null,null))],null,null)}function i(t){return s._12(0,[(t()(),s._15(16777216,null,null,1,"virtual-input",[],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==s._16(t,1)._touchMove(n)&&o}return o},o,u)),s._17(4308992,null,0,a.a,[s.Q,s._18],null,null)],function(t,e){t(e,1,0)},null)}var r=n("pG3V"),s=n("/oeL"),a=n("oFVN");n.d(e,"b",function(){return u}),e.a=o;var l=[r.a],u=s._11({encapsulation:0,styles:l,data:{}});s._19("virtual-input",a.a,i,{position:"position",width:"width",height:"height",left:"left",top:"top",right:"right",bottom:"bottom",visible:"visible",alpha:"alpha",depth:"depth",rotation:"rotation",scalex:"scalex",scaley:"scaley",tooltip:"tooltip",backgroundcolor:"backgroundcolor",filter:"filter",buttonMode:"buttonMode",textalign:"textalign"},{},[])},"1HXw":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){}return t}();o.CLICK="click",o.MIDDLE_CLICK="click",o.RIGHT_CLICK="click",o.MOUSE_DOWN="mousedown",o.MIDDLE_MOUSE_DOWN="mousedown",o.RIGHT_MOUSE_DOWN="mousedown",o.MOUSE_UP="mouseup",o.MIDDLE_MOUSE_UP="mouseup",o.RIGHT_MOUSE_UP="mouseup",o.DOUBLE_CLICK="dblclick",o.MOUSE_MOVE="mousemove",o.MOUSE_OVER="mouseover",o.MOUSE_OUT="mouseout",o.MOUSE_WHEEL="mousewheel",o.DOM_MOUSE_WHEEL="DOMMouseScroll",o.DRAG="drag",o.DRAG_START="dragstart",o.DRAG_END="dragend",o.DRAG_ENTER="dragenter",o.DRAG_LEAVE="dragleave",o.DRAG_OVER="dragover",o.DROP="drop"},"1RVm":function(t,e,n){"use strict";function o(t){return s._12(0,[s._13(402653184,1,{textInputRef:0}),(t()(),s._15(0,null,null,12,"div",[["class","bg"]],null,null,null,null,null)),(t()(),s._14(null,["\n    "])),(t()(),s._15(0,null,null,9,"div",[["class","bar"]],null,null,null,null,null)),(t()(),s._14(null,["\n        "])),(t()(),s._15(0,[[1,0],["textInput",1]],null,0,"input",[["class","textInput"],["type","text"],["value",""]],null,null,null,null,null)),(t()(),s._14(null,["\n        "])),(t()(),s._15(16777216,null,null,1,"color-button",[["class","colorButton"],["colorStyle","5"],["height","26px"],["label","删除"],["textSize","14"],["width","57px"]],null,[[null,"touchstart"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchend"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==s._16(t,8)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,8).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,8).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,8).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,8).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,8).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,8).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,8).touchEnd(n)&&o}if("touchstart"===e){o=!1!==i.delete()&&o}return o},l.a,l.b)),s._17(4308992,null,0,u.a,[s.Q,s._18],{width:[0,"width"],height:[1,"height"],colorStyle:[2,"colorStyle"],textSize:[3,"textSize"],label:[4,"label"]},null),(t()(),s._14(null,["\n        "])),(t()(),s._15(16777216,null,null,1,"color-button",[["class","colorButton"],["colorStyle","1"],["height","26px"],["label","完成"],["textSize","14"],["width","57px"]],null,[[null,"touchstart"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchend"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==s._16(t,11)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,11).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,11).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,11).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,11).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,11).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,11).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,11).touchEnd(n)&&o}if("touchstart"===e){o=!1!==i.finish()&&o}return o},l.a,l.b)),s._17(4308992,null,0,u.a,[s.Q,s._18],{width:[0,"width"],height:[1,"height"],colorStyle:[2,"colorStyle"],textSize:[3,"textSize"],label:[4,"label"]},null),(t()(),s._14(null,["\n    "])),(t()(),s._14(null,["\n"]))],function(t,e){t(e,8,0,"57px","26px","5","14","删除");t(e,11,0,"57px","26px","1","14","完成")},null)}function i(t){return s._12(0,[(t()(),s._15(16777216,null,null,1,"note-editor",[],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==s._16(t,1)._touchMove(n)&&o}return o},o,c)),s._17(4308992,null,0,a.a,[s.Q,s._18],null,null)],function(t,e){t(e,1,0)},null)}var r=n("/I48"),s=n("/oeL"),a=n("JTqu"),l=n("3kKB"),u=n("ZCEW");n.d(e,"b",function(){return c}),e.a=o;var h=[r.a],c=s._11({encapsulation:0,styles:h,data:{}});s._19("note-editor",a.a,i,{position:"position",width:"width",height:"height",left:"left",top:"top",right:"right",bottom:"bottom",visible:"visible",alpha:"alpha",depth:"depth",rotation:"rotation",scalex:"scalex",scaley:"scaley",tooltip:"tooltip",backgroundcolor:"backgroundcolor",filter:"filter",buttonMode:"buttonMode"},{},[])},"1Z6y":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){}return t}();o.API_ROOT="http://yun.jiandanhome.com",o.MEDIA_ROOT="assets/local/",o.HUXING_DETAIL=o.API_ROOT+"/deco/huxing/detail_mobile/",o.HUXING_SAVE=o.API_ROOT+"/deco/huxing/save/",o.HUXING_SAVE_PROPERTY=o.API_ROOT+"/deco/huxing/save_property/",o.HUXING_ITEM_LIST=o.API_ROOT+"/deco/huxing/item/list/",o.HUXING_ITEM_DETAIL=o.API_ROOT+"/deco/huxing/item/detail/",o.HUXING_CONFIG_ROOM_MATERIALS=o.API_ROOT+"/deco/huxing/config/room_materials/",o.DESIGN_MULTIPLE_ITEM_LIST=o.API_ROOT+"/deco/item/multiple_post/"},"1iia":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=["input[_ngcontent-%COMP%]{position:absolute;z-index:100}"]},"2fuc":function(t,e,n){"use strict";function o(t){return u._12(0,[(t()(),u._20(0,null,null,0))],null,null)}function i(t){return u._12(0,[(t()(),u._20(0,null,null,0))],null,null)}function r(t){return u._12(0,[(t()(),u._20(0,null,null,0))],null,null)}function s(t){return u._12(0,[u._13(402653184,1,{listDoorView:0}),u._13(402653184,2,{listWindowView:0}),u._13(402653184,3,{listStructView:0}),(t()(),u._14(null,["\n"])),(t()(),u._15(0,null,null,1,"div",[["class","title"]],null,null,null,null,null)),(t()(),u._14(null,["门"])),(t()(),u._14(null,["\n"])),(t()(),u._15(0,null,null,3,"div",[["class","container"]],null,null,null,null,null)),(t()(),u._14(null,["\n    "])),(t()(),u._20(16777216,[[1,3],["listDoor",2]],null,0,null,o)),(t()(),u._14(null,["\n"])),(t()(),u._14(null,["\n"])),(t()(),u._15(0,null,null,1,"div",[["class","title"]],null,null,null,null,null)),(t()(),u._14(null,["窗"])),(t()(),u._14(null,["\n"])),(t()(),u._15(0,null,null,3,"div",[["class","container"]],null,null,null,null,null)),(t()(),u._14(null,["\n    "])),(t()(),u._20(16777216,[[2,3],["listWindow",2]],null,0,null,i)),(t()(),u._14(null,["\n"])),(t()(),u._14(null,["\n"])),(t()(),u._15(0,null,null,1,"div",[["class","title"]],null,null,null,null,null)),(t()(),u._14(null,["结构部件"])),(t()(),u._14(null,["\n"])),(t()(),u._15(0,null,null,3,"div",[["class","container"]],null,null,null,null,null)),(t()(),u._14(null,["\n    "])),(t()(),u._20(16777216,[[3,3],["listStruct",2]],null,0,null,r)),(t()(),u._14(null,["\n"])),(t()(),u._14(null,["\n"]))],null,null)}function a(t){return u._12(0,[(t()(),u._15(16777216,null,null,1,"huxing-struct-view",[],null,[[null,"touchmove"],[null,"touchstart"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==u._16(t,1).touchMove(n)&&o}if("touchstart"===e){o=!1!==u._16(t,1).touchStart(n)&&o}return o},s,p)),u._17(4308992,null,0,h.a,[u.Q,u._18],null,null)],function(t,e){t(e,1,0)},null)}var l=n("rFe8"),u=n("/oeL"),h=n("UOls");n.d(e,"b",function(){return p}),e.a=s;var c=[l.a],p=u._11({encapsulation:0,styles:c,data:{}});u._19("huxing-struct-view",h.a,a,{position:"position",width:"width",height:"height",left:"left",top:"top",right:"right",bottom:"bottom",visible:"visible",alpha:"alpha",depth:"depth",rotation:"rotation",scalex:"scalex",scaley:"scaley",tooltip:"tooltip",backgroundcolor:"backgroundcolor",filter:"filter",buttonMode:"buttonMode"},{},[])},"36ei":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),this._x=0,this._y=0,this._z=0,this._x=t,this._y=e,this._z=n}return t.prototype.clone=function(){return new t(this._x,this._y,this._z)},t.prototype.setTo=function(t,e,n){this.x=t,this.y=e,this.z=n},t.prototype.copyFrom=function(t){this.x=t.x,this.y=t.y,this.z=t.z},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"z",{get:function(){return this._z},set:function(t){this._z=t},enumerable:!0,configurable:!0}),t.prototype.add=function(e){return new t(this.x+e.x,this.y+e.y,this.z+e.z)},t.prototype.subtract=function(e){return new t(this.x-e.x,this.y-e.y,this.z-e.z)},t.prototype.scaleBy=function(t){this._x*=t,this._y*=t,this._z*=t},t.prototype.dotProd=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},t.prototype.crossProd=function(e){var n=new t;return n.x=this.y*e.z-e.y*this.z,n.y=this.z*e.x-this.x*e.z,n.z=this.x*e.y-e.x*this.y,n},t.prototype.normalize=function(){if(0==this.length)return this._x=0,this._y=0,this._z=0,this;var t=this.length;return this.x/=t,this.y/=t,this.z/=t,this},Object.defineProperty(t.prototype,"length",{get:function(){return Math.sqrt(this.lengthSQ)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lengthSQ",{get:function(){return this._x*this._x+this._y*this._y+this._z*this._z},enumerable:!0,configurable:!0}),t}();o.X_AXIS=new o(1,0,0),o.Y_AXIS=new o(0,1,0),o.Z_AXIS=new o(0,0,1)},"39qE":function(t,e,n){"use strict";function o(t){return s._12(0,[s._13(402653184,1,{lbRef:0}),(t()(),s._15(0,[[1,0],["lb",1]],null,1,"div",[["class","label"]],null,null,null,null,null)),(t()(),s._14(null,["",""])),(t()(),s._14(null,["\n"])),(t()(),s._15(0,[["num",1]],null,1,"div",[["class","number"]],null,null,null,null,null)),(t()(),s._14(null,["",""]))],null,function(t,e){var n=e.component;t(e,2,0,n.label),t(e,5,0,n.number)})}function i(t){return s._12(0,[(t()(),s._15(16777216,null,null,1,"option-navigation-item",[],null,[[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchstart"],[null,"touchend"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==s._16(t,1)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,1).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,1).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,1).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,1).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,1).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,1).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,1).touchEnd(n)&&o}return o},o,u)),s._17(4308992,null,0,a.a,[s.Q,s._18],null,null)],function(t,e){t(e,1,0)},null)}var r=n("cMBn"),s=n("/oeL"),a=n("Dsuh");n.d(e,"b",function(){return u}),e.a=o;var l=[r.a],u=s._11({encapsulation:0,styles:l,data:{}});s._19("option-navigation-item",a.a,i,{position:"position",width:"width",height:"height",left:"left",top:"top",right:"right",bottom:"bottom",visible:"visible",alpha:"alpha",depth:"depth",rotation:"rotation",scalex:"scalex",scaley:"scaley",tooltip:"tooltip",backgroundcolor:"backgroundcolor",filter:"filter",buttonMode:"buttonMode",label:"label",number:"number"},{},[])},"3NP2":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){}return t}();o.PATH="path",o.RECT="rect"},"3arc":function(t,e,n){"use strict";function o(t){return s._12(0,[s._13(402653184,1,{resourceOperatorRef:0}),s._13(402653184,2,{structView:0}),(t()(),s._15(0,[[1,0],["resourceOperator",1]],null,11,"div",[["class","resourceOperator"]],null,null,null,null,null)),(t()(),s._14(null,["\n    "])),(t()(),s._14(null,["\n    "])),(t()(),s._15(16777216,null,null,2,"v-tool-button",[["class","VToolButton"],["label","添加"],["textDown","#999999"],["textUp","#333333"],["top","12"]],null,[[null,"touchstart"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchend"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==s._16(t,6)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,6).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,6).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,6).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,6).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,6).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,6).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,6).touchEnd(n)&&o}if("touchstart"===e){o=!1!==i.addStructHandler()&&o}return o},l.b,l.c)),s._17(4308992,null,0,u.a,[s.Q,s._18],{top:[0,"top"],iconUp:[1,"iconUp"],iconDown:[2,"iconDown"],textUp:[3,"textUp"],textDown:[4,"textDown"],label:[5,"label"]},null),(t()(),s._14(null,["\n    "])),(t()(),s._14(null,["\n\n    "])),(t()(),s._14(null,["\n    "])),(t()(),s._15(16777216,null,null,2,"v-tool-button",[["class","VToolButton"],["label","文本"],["textDown","#999999"],["textUp","#333333"],["top","78"]],null,[[null,"touchstart"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchend"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==s._16(t,11)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,11).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,11).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,11).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,11).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,11).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,11).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,11).touchEnd(n)&&o}if("touchstart"===e){o=!1!==i.addNoteHandler()&&o}return o},l.b,l.c)),s._17(4308992,null,0,u.a,[s.Q,s._18],{top:[0,"top"],iconUp:[1,"iconUp"],iconDown:[2,"iconDown"],textUp:[3,"textUp"],textDown:[4,"textDown"],label:[5,"label"]},null),(t()(),s._14(null,["\n    "])),(t()(),s._14(null,["\n"])),(t()(),s._14(null,["\n\n"])),(t()(),s._14(null,["\n"])),(t()(),s._15(16777216,null,null,1,"huxing-struct-view",[],null,[[null,"touchmove"],[null,"touchstart"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==s._16(t,17).touchMove(n)&&o}if("touchstart"===e){o=!1!==s._16(t,17).touchStart(n)&&o}return o},h.a,h.b)),s._17(4308992,[[2,4],["structView",4]],0,c.a,[s.Q,s._18],null,null)],function(t,e){var n=e.component;t(e,6,0,"12",n.addStructUp,n.addStructDown,"#333333","#999999","添加");t(e,11,0,"78",n.addNoteUp,n.addNoteDown,"#333333","#999999","文本"),t(e,17,0)},null)}function i(t){return s._12(0,[(t()(),s._15(16777216,null,null,1,"huxing-resource",[],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==s._16(t,1)._touchMove(n)&&o}return o},o,d)),s._17(4308992,null,0,a.a,[s.Q,s._18],null,null)],function(t,e){t(e,1,0)},null)}var r=n("/5Oe"),s=n("/oeL"),a=n("wzWt"),l=n("DLok"),u=n("R4k5"),h=n("2fuc"),c=n("UOls");n.d(e,"b",function(){return d}),e.a=o;var p=[r.a],d=s._11({encapsulation:0,styles:p,data:{}});s._19("huxing-resource",a.a,i,{position:"position",width:"width",height:"height",left:"left",top:"top",right:"right",bottom:"bottom",visible:"visible",alpha:"alpha",depth:"depth",rotation:"rotation",scalex:"scalex",scaley:"scaley",tooltip:"tooltip",backgroundcolor:"backgroundcolor",filter:"filter",buttonMode:"buttonMode"},{},[])},"3cEh":function(t,e,n){"use strict";var o=n("/oeL"),i=n("8Tef"),r=n("YihH"),s=n("FtES"),a=n("+ByO");n.d(e,"a",function(){return u});var l=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),u=function(t){function e(e,n){return t.call(this,e,n)||this}return l(e,t),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.updateComponentProperty(),this.width="240px",r.a.inst.addEvent(s.a.SETTINGS_CONFIRM,this.onConfirm,this)},e.prototype.setTargetStruct=function(t){this.targetStruct=t,this.structWidthInput.finalLabel=Math.round(10*t.realWidth).toString(),this.structLengthInput.finalLabel=Math.round(10*t.realLength).toString(),this.structWidthInput.selected=!1,this.structLengthInput.selected=!1},e.prototype.showWallWidthSetting=function(){1==this.structWidthInput.editable&&(this.structWidthInput.selected=!0,this.currentInput=this.structWidthInput,this.structLengthInput.selected=!1,this.structLengthInput.resetLabel(),r.a.inst.open(this.targetStruct,"长度 /mm",Math.round(10*this.targetStruct.realWidth)),a.a.inst.moveLeft())},e.prototype.showWallLengthSetting=function(){1==this.structLengthInput.editable&&(this.structLengthInput.selected=!0,this.currentInput=this.structLengthInput,this.structWidthInput.selected=!1,this.structWidthInput.resetLabel(),r.a.inst.open(this.targetStruct,"厚度 /mm",Math.round(10*this.targetStruct.realLength)),a.a.inst.moveLeft())},e.prototype.onConfirm=function(t){var e=t.data,n=e.target,o=e.value;this.targetStruct==n&&this.currentInput&&(this.currentInput==this.structWidthInput?this.targetStruct.doChangeWidth(Math.round(o/10)):this.currentInput==this.structLengthInput&&this.targetStruct.doChangeLength(Math.round(o/10)),this.setTargetStruct(this.targetStruct))},e.ctorParameters=function(){return[{type:o.Q},{type:o._18}]},e}(i.a)},"3kKB":function(t,e,n){"use strict";function o(t){return s._12(0,[s._13(402653184,1,{labelRef:0}),(t()(),s._15(0,[[1,0],["lb",1]],null,1,"div",[["class","label"]],null,null,null,null,null)),(t()(),s._14(null,["",""]))],null,function(t,e){t(e,2,0,e.component.label)})}function i(t){return s._12(0,[(t()(),s._15(16777216,null,null,1,"color-button",[],null,[[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchstart"],[null,"touchend"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==s._16(t,1)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,1).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,1).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,1).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,1).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,1).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,1).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,1).touchEnd(n)&&o}return o},o,u)),s._17(4308992,null,0,a.a,[s.Q,s._18],null,null)],function(t,e){t(e,1,0)},null)}var r=n("I9l+"),s=n("/oeL"),a=n("ZCEW");n.d(e,"b",function(){return u}),e.a=o;var l=[r.a],u=s._11({encapsulation:0,styles:l,data:{}});s._19("color-button",a.a,i,{position:"position",width:"width",height:"height",left:"left",top:"top",right:"right",bottom:"bottom",visible:"visible",alpha:"alpha",depth:"depth",rotation:"rotation",scalex:"scalex",scaley:"scaley",tooltip:"tooltip",backgroundcolor:"backgroundcolor",filter:"filter",buttonMode:"buttonMode",radius:"radius",colorStyle:"colorStyle",backUpColor:"backUpColor",backOverColor:"backOverColor",backDownColor:"backDownColor",backUpAlpha:"backUpAlpha",backOverAlpha:"backOverAlpha",backDownAlpha:"backDownAlpha",border:"border",strokeUpColor:"strokeUpColor",strokeOverColor:"strokeOverColor",strokeDownColor:"strokeDownColor",strokeUpAlpha:"strokeUpAlpha",strokeOverAlpha:"strokeOverAlpha",strokeDownAlpha:"strokeDownAlpha",textUpColor:"textUpColor",textOverColor:"textOverColor",textDownColor:"textDownColor",textSize:"textSize",label:"label"},{},[])},"3rrf":function(t,e,n){"use strict";function o(t){return s._12(0,[s._13(402653184,1,{slideRef:0}),s._13(402653184,2,{slideLabelRef:0}),(t()(),s._15(0,[[2,0],["lb",1]],null,1,"div",[["class","label"]],null,null,null,null,null)),(t()(),s._14(null,["",""])),(t()(),s._14(null,["\n"])),(t()(),s._15(0,[[1,0],["slide",1]],null,0,"div",[["class","slide"]],null,null,null,null,null))],null,function(t,e){t(e,3,0,e.component.label)})}function i(t){return s._12(0,[(t()(),s._15(16777216,null,null,1,"slide-box",[],null,[[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchstart"],[null,"touchend"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==s._16(t,1)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,1).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,1).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,1).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,1).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,1).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,1).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,1).touchEnd(n)&&o}return o},o,u)),s._17(4308992,null,0,a.a,[s.Q,s._18],null,null)],function(t,e){t(e,1,0)},null)}var r=n("SirN"),s=n("/oeL"),a=n("bQVa");n.d(e,"b",function(){return u}),e.a=o;var l=[r.a],u=s._11({encapsulation:0,styles:l,data:{}});s._19("slide-box",a.a,i,{position:"position",width:"width",height:"height",left:"left",top:"top",right:"right",bottom:"bottom",visible:"visible",alpha:"alpha",depth:"depth",rotation:"rotation",scalex:"scalex",scaley:"scaley",tooltip:"tooltip",backgroundcolor:"backgroundcolor",filter:"filter",buttonMode:"buttonMode",label:"label",iconOn:"iconOn",iconOff:"iconOff",onColor:"onColor",offColor:"offColor",textSize:"textSize"},{},[])},"4L4I":function(t,e,n){"use strict";function o(t){return s._12(0,[s._13(402653184,1,{wallSettingBar:0}),s._13(402653184,2,{openingSettingBar:0}),s._13(402653184,3,{structSettingBar:0}),(t()(),s._15(0,null,null,10,"div",[["class","bg"]],null,null,null,null,null)),(t()(),s._14(null,["\n    "])),(t()(),s._15(16777216,null,null,1,"wall-setting-bar",[["class","settingbar"],["visible","false"]],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==s._16(t,6)._touchMove(n)&&o}return o},a.a,a.b)),s._17(4308992,[[1,4],["wallSettingBar",4]],0,l.a,[s.Q,s._18],{visible:[0,"visible"]},null),(t()(),s._14(null,["\n    "])),(t()(),s._15(16777216,null,null,1,"opening-setting-bar",[["class","settingbar"],["visible","false"]],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==s._16(t,9)._touchMove(n)&&o}return o},u.a,u.b)),s._17(4308992,[[2,4],["openingSettingBar",4]],0,h.a,[s.Q,s._18],{visible:[0,"visible"]},null),(t()(),s._14(null,["\n    "])),(t()(),s._15(16777216,null,null,1,"struct-setting-bar",[["class","settingbar"],["visible","false"]],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==s._16(t,12)._touchMove(n)&&o}return o},c.a,c.b)),s._17(4308992,[[3,4],["structSettingBar",4]],0,p.a,[s.Q,s._18],{visible:[0,"visible"]},null),(t()(),s._14(null,["\n"]))],function(t,e){t(e,6,0,"false");t(e,9,0,"false");t(e,12,0,"false")},null)}function i(t){return s._12(0,[(t()(),s._15(16777216,null,null,1,"setting-bars",[],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==s._16(t,1)._touchMove(n)&&o}return o},o,g)),s._17(4308992,null,0,d.a,[s.Q,s._18],null,null)],function(t,e){t(e,1,0)},null)}var r=n("xBDO"),s=n("/oeL"),a=n("PRZ3"),l=n("CQOF"),u=n("ZlQW"),h=n("kUfx"),c=n("Kmjt"),p=n("3cEh"),d=n("+ByO");n.d(e,"b",function(){return g}),e.a=o;var f=[r.a],g=s._11({encapsulation:0,styles:f,data:{}});s._19("setting-bars",d.a,i,{position:"position",width:"width",height:"height",left:"left",top:"top",right:"right",bottom:"bottom",visible:"visible",alpha:"alpha",depth:"depth",rotation:"rotation",scalex:"scalex",scaley:"scaley",tooltip:"tooltip",backgroundcolor:"backgroundcolor",filter:"filter",buttonMode:"buttonMode"},{},[])},"5Xko":function(t,e,n){"use strict";function o(t){return s._12(0,[s._13(671088640,1,{buttonQueryList:1}),s._13(402653184,2,{threedNavigation:0}),(t()(),s._15(0,null,null,54,"div",[["class","btnContainer"]],null,null,null,null,null)),(t()(),s._14(null,["\n    \n    "])),(t()(),s._14(null,["\n    "])),(t()(),s._15(16777216,null,null,2,"v-tool-button",[["alpha","0"],["class","VToolButton"],["label","返回/保存"],["width","60px"]],null,[[null,"touchstart"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchend"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==s._16(t,6)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,6).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,6).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,6).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,6).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,6).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,6).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,6).touchEnd(n)&&o}if("touchstart"===e){o=!1!==i.saveHandler()&&o}return o},l.b,l.c)),s._17(4308992,[[1,4]],0,u.a,[s.Q,s._18],{width:[0,"width"],alpha:[1,"alpha"],iconUp:[2,"iconUp"],iconDown:[3,"iconDown"],label:[4,"label"]},null),(t()(),s._14(null,["\n    "])),(t()(),s._14(null,["\n\n    "])),(t()(),s._15(0,null,null,0,"div",[["class","divide"]],null,null,null,null,null)),(t()(),s._14(null,["\n\n    "])),(t()(),s._14(null,["\n    "])),(t()(),s._15(16777216,null,null,2,"v-tool-button",[["class","VToolButton"],["label","画墙"],["textDown","#333333"],["textUp","#999999"]],null,[[null,"touchstart"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchend"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==s._16(t,13)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,13).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,13).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,13).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,13).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,13).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,13).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,13).touchEnd(n)&&o}if("touchstart"===e){o=!1!==i.drawWallHandler()&&o}return o},l.b,l.c)),s._17(4308992,[[1,4]],0,u.a,[s.Q,s._18],{iconUp:[0,"iconUp"],iconDown:[1,"iconDown"],textUp:[2,"textUp"],textDown:[3,"textDown"],label:[4,"label"]},null),(t()(),s._14(null,["\n    "])),(t()(),s._14(null,["\n\n    "])),(t()(),s._14(null,["\n    "])),(t()(),s._15(16777216,null,null,2,"v-tool-button",[["class","VToolButton"],["label","画房间"],["textDown","#333333"],["textUp","#999999"]],null,[[null,"touchstart"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchend"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==s._16(t,18)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,18).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,18).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,18).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,18).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,18).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,18).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,18).touchEnd(n)&&o}if("touchstart"===e){o=!1!==i.drawRoomHandler()&&o}return o},l.b,l.c)),s._17(4308992,[[1,4]],0,u.a,[s.Q,s._18],{iconUp:[0,"iconUp"],iconDown:[1,"iconDown"],textUp:[2,"textUp"],textDown:[3,"textDown"],label:[4,"label"]},null),(t()(),s._14(null,["\n    "])),(t()(),s._14(null,["\n\n    "])),(t()(),s._14(null,["\n    "])),(t()(),s._15(16777216,null,null,2,"v-tool-button",[["class","VToolButton"],["label","拖拽"],["textDown","#333333"],["textUp","#999999"]],null,[[null,"touchstart"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchend"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==s._16(t,23)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,23).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,23).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,23).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,23).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,23).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,23).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,23).touchEnd(n)&&o}if("touchstart"===e){o=!1!==i.moveHandler()&&o}return o},l.b,l.c)),s._17(4308992,[[1,4]],0,u.a,[s.Q,s._18],{iconUp:[0,"iconUp"],iconDown:[1,"iconDown"],textUp:[2,"textUp"],textDown:[3,"textDown"],label:[4,"label"]},null),(t()(),s._14(null,["\n    "])),(t()(),s._14(null,["\n\n    "])),(t()(),s._15(16777216,null,null,1,"line",[["class","line"],["height","23px"],["width","1px"]],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==s._16(t,27)._touchMove(n)&&o}return o},h.a,h.b)),s._17(4308992,null,0,c.a,[s.Q,s._18],{width:[0,"width"],height:[1,"height"]},null),(t()(),s._14(null,["\n\n    "])),(t()(),s._14(null,["\n    "])),(t()(),s._15(16777216,null,null,2,"v-tool-button",[["class","VToolButton"],["label","撤销"]],null,[[null,"touchstart"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchend"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==s._16(t,31)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,31).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,31).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,31).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,31).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,31).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,31).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,31).touchEnd(n)&&o}if("touchstart"===e){o=!1!==i.undoHandler()&&o}return o},l.b,l.c)),s._17(4308992,[[1,4]],0,u.a,[s.Q,s._18],{iconUp:[0,"iconUp"],iconDown:[1,"iconDown"],label:[2,"label"]},null),(t()(),s._14(null,["\n    "])),(t()(),s._14(null,["\n\n    "])),(t()(),s._14(null,["\n    "])),(t()(),s._15(16777216,null,null,2,"v-tool-button",[["class","VToolButton"],["label","恢复"]],null,[[null,"touchstart"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchend"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==s._16(t,36)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,36).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,36).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,36).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,36).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,36).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,36).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,36).touchEnd(n)&&o}if("touchstart"===e){o=!1!==i.redoHandler()&&o}return o},l.b,l.c)),s._17(4308992,[[1,4]],0,u.a,[s.Q,s._18],{iconUp:[0,"iconUp"],iconDown:[1,"iconDown"],label:[2,"label"]},null),(t()(),s._14(null,["\n    "])),(t()(),s._14(null,["\n\n    "])),(t()(),s._14(null,["\n    "])),(t()(),s._15(16777216,null,null,2,"v-tool-button",[["class","VToolButton"],["label","清空"]],null,[[null,"touchstart"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchend"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==s._16(t,41)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,41).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,41).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,41).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,41).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,41).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,41).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,41).touchEnd(n)&&o}if("touchstart"===e){o=!1!==i.clearHandler()&&o}return o},l.b,l.c)),s._17(4308992,[[1,4]],0,u.a,[s.Q,s._18],{iconUp:[0,"iconUp"],iconDown:[1,"iconDown"],label:[2,"label"]},null),(t()(),s._14(null,["\n    "])),(t()(),s._14(null,["\n\n    "])),(t()(),s._15(16777216,null,null,1,"line",[["class","line"],["height","23px"],["width","1px"]],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==s._16(t,45)._touchMove(n)&&o}return o},h.a,h.b)),s._17(4308992,null,0,c.a,[s.Q,s._18],{width:[0,"width"],height:[1,"height"]},null),(t()(),s._14(null,["\n\n    "])),(t()(),s._14(null,["\n    "])),(t()(),s._15(16777216,null,null,2,"v-tool-button",[["class","VToolButton"],["label","居中"]],null,[[null,"touchstart"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchend"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==s._16(t,49)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,49).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,49).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,49).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,49).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,49).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,49).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,49).touchEnd(n)&&o}if("touchstart"===e){o=!1!==i.centerHandler()&&o}return o},l.b,l.c)),s._17(4308992,[[1,4]],0,u.a,[s.Q,s._18],{iconUp:[0,"iconUp"],iconDown:[1,"iconDown"],label:[2,"label"]},null),(t()(),s._14(null,["\n    "])),(t()(),s._14(null,["\n\n    "])),(t()(),s._14(null,["\n    "])),(t()(),s._15(16777216,null,null,2,"huxing-toolbar-more",[["class","huxingToolbarMore"]],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==s._16(t,54)._touchMove(n)&&o}return o},p.a,p.b)),s._17(4308992,null,0,d.a,[s.Q,s._18],null,null),(t()(),s._14(null,["\n    "])),(t()(),s._14(null,["\n"]))],function(t,e){var n=e.component;t(e,6,0,"60px","0",n.backUp,n.backDown,"返回/保存");t(e,13,0,n.drawWallUp,n.drawWallDown,"#999999","#333333","画墙");t(e,18,0,n.drawRoomUp,n.drawRoomDown,"#999999","#333333","画房间");t(e,23,0,n.moveUp,n.moveDown,"#999999","#333333","拖拽");t(e,27,0,"1px","23px");t(e,31,0,n.undoUp,n.undoDown,"撤销");t(e,36,0,n.redoUp,n.redoDown,"恢复");t(e,41,0,n.clearUp,n.clearDown,"清空");t(e,45,0,"1px","23px");t(e,49,0,n.centerUp,n.centerDown,"居中"),t(e,54,0)},null)}function i(t){return s._12(0,[(t()(),s._15(16777216,null,null,1,"huxing-toolbar",[],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==s._16(t,1)._touchMove(n)&&o}return o},o,g)),s._17(4308992,null,0,a.a,[s.Q,s._18],null,null)],function(t,e){t(e,1,0)},null)}var r=n("HNIp"),s=n("/oeL"),a=n("X973"),l=n("DLok"),u=n("R4k5"),h=n("NBqy"),c=n("N8J1"),p=n("ru8f"),d=n("cXPp");n.d(e,"b",function(){return g}),e.a=o;var f=[r.a],g=s._11({encapsulation:0,styles:f,data:{}});s._19("huxing-toolbar",a.a,i,{position:"position",width:"width",height:"height",left:"left",top:"top",right:"right",bottom:"bottom",visible:"visible",alpha:"alpha",depth:"depth",rotation:"rotation",scalex:"scalex",scaley:"scaley",tooltip:"tooltip",backgroundcolor:"backgroundcolor",filter:"filter",buttonMode:"buttonMode"},{},[])},"5mVj":function(t,e,n){"use strict";function o(t){return s._12(0,[s._13(402653184,1,{commonSetting:0}),s._13(402653184,2,{roomSetting:0}),s._13(402653184,3,{rulerSetting:0}),(t()(),s._15(0,null,null,10,"div",[["class","bg"]],null,null,null,null,null)),(t()(),s._14(null,["\n    "])),(t()(),s._15(16777216,null,null,1,"common-setting",[["visible","false"]],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==s._16(t,6)._touchMove(n)&&o}return o},a.a,a.b)),s._17(4308992,[[1,4],["commonSetting",4]],0,l.a,[s.Q,s._18],{visible:[0,"visible"]},null),(t()(),s._14(null,["\n    "])),(t()(),s._15(16777216,null,null,1,"room-setting",[["visible","false"]],null,[[null,"touchmove"],[null,"touchstart"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==s._16(t,9).touchMove(n)&&o}if("touchstart"===e){o=!1!==s._16(t,9).touchStart(n)&&o}return o},u.a,u.b)),s._17(4308992,[[2,4],["roomSetting",4]],0,h.a,[s.Q,s._18],{visible:[0,"visible"]},null),(t()(),s._14(null,["\n    "])),(t()(),s._15(16777216,null,null,1,"ruler-setting",[["visible","false"]],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==s._16(t,12)._touchMove(n)&&o}return o},c.a,c.b)),s._17(4308992,[[3,4],["rulerSetting",4]],0,p.a,[s.Q,s._18],{visible:[0,"visible"]},null),(t()(),s._14(null,["\n"]))],function(t,e){t(e,6,0,"false");t(e,9,0,"false");t(e,12,0,"false")},null)}function i(t){return s._12(0,[(t()(),s._15(16777216,null,null,1,"settings",[],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==s._16(t,1)._touchMove(n)&&o}return o},o,g)),s._17(4308992,null,0,d.a,[s.Q,s._18],null,null)],function(t,e){t(e,1,0)},null)}var r=n("E2K4"),s=n("/oeL"),a=n("e/zD"),l=n("MgL2"),u=n("jCBq"),h=n("JCpi"),c=n("8zhN"),p=n("CGmY"),d=n("YihH");n.d(e,"b",function(){return g}),e.a=o;var f=[r.a],g=s._11({encapsulation:0,styles:f,data:{}});s._19("settings",d.a,i,{position:"position",width:"width",height:"height",left:"left",top:"top",right:"right",bottom:"bottom",visible:"visible",alpha:"alpha",depth:"depth",rotation:"rotation",scalex:"scalex",scaley:"scaley",tooltip:"tooltip",backgroundcolor:"backgroundcolor",filter:"filter",buttonMode:"buttonMode"},{},[])},"5syo":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(t,e){void 0===e&&(e="null"),this.mode=e,this.point=t}return t}()},"6eZy":function(t,e,n){"use strict";var o=n("n80j");n.d(e,"a",function(){return r});var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=function(t){function e(){var e=t.call(this)||this;return e.childs=[],e}return i(e,t),e.prototype.addChild=function(t){return this.getChildIndex(t)<0&&(this.childs.push(t),this._dom&&this._dom.appendChild(t.dom),t.setParent(this),t.setStage(this._stage),t.onAdd(),!0)},e.prototype.addChildAt=function(t,e){if(this.getChildIndex(t)<0){if(this.getChildAt(e)){for(var n=this.childs.length,o=n-1;o>=e;o--)this.childs[o+1]=this.childs[o];this.childs[e]=t,this._dom&&this._dom.insertBefore(t.dom,this.childs[e+1].dom)}else this.childs.push(t),this._dom&&this._dom.appendChild(t.dom);return t.setParent(this),t.setStage(this._stage),t.onAdd(),!0}return!1},e.prototype.removeChild=function(t){var e=this.getChildIndex(t);return e>=0&&(this.childs.splice(e,1),this._dom&&this._dom.removeChild(t.dom),t.processOnRemove(),!0)},e.prototype.removeChildAt=function(t){if(this.childs.length>t){var e=this.childs[t];return this._dom&&this._dom.removeChild(e.dom),this.childs.splice(t,1),e.processOnRemove(),!0}return!1},e.prototype.removeChildren=function(){for(var t=this.childs.length,e=0;e<t;e++){var n=this.childs[e];this._dom&&this._dom.removeChild(n.dom),n.processOnRemove()}this.childs=[]},e.prototype.processOnRemove=function(){t.prototype.processOnRemove.call(this);for(var e=this.numChildren,n=0;n<e;n++){this.getChildAt(n).processOnRemove()}},e.prototype.getChildAt=function(t){return this.childs.length>t?this.childs[t]:null},e.prototype.setChildIndex=function(t,e){var n=this.childs.indexOf(t);if(n>=0){null!=this.getChildAt(e)?this.swapChildrenAt(n,e):(this.childs[n]=null,this.childs[e]=t);for(var o=void 0;o<this.childs.length;o++)null==this.childs[o]&&(this.childs.splice(o,1),o--);return!0}return!1},e.prototype.getChildIndex=function(t){return this.childs.indexOf(t)},e.prototype.contains=function(t){return this.childs.indexOf(t)>=0},e.prototype.swapChildrenAt=function(t,e){var n=this.childs[t],o=this.childs[e];this.childs[t]=o,this.childs[e]=n},Object.defineProperty(e.prototype,"numChildren",{get:function(){return this.childs.length},enumerable:!0,configurable:!0}),e.prototype.setParent=function(t){this.parent=t;for(var e=this.numChildren,n=0;n<e;n++){this.getChildAt(n).setParent(this)}},e.prototype.setStage=function(t){this._stage=t;for(var e=this.numChildren,n=0;n<e;n++){this.getChildAt(n).setStage(t)}},e.prototype.getEventTargetRef=function(e){var n=t.prototype.getEventTargetRef.call(this,e);if(null==n)for(var o=this.numChildren,i=0;i<o;i++){var r=this.getChildAt(i);if(n=r.getEventTargetRef(e))return n}return n},e}(o.a)},"6p4A":function(t,e,n){"use strict";var o=n("/oeL"),i=n("8Tef"),r=n("+N0H"),s=n("wRF1"),a=n("PbJf"),l=n("WFe8");n.d(e,"a",function(){return h});var u=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),h=function(t){function e(n,o){var i=t.call(this,n,o)||this;return i.navigationItems=[],i.radioButtons=[],i.optionInputs=[],i.wallThicknessInputOn=!1,i.storeyHeightInputOn=!1,i._tempWallThickness=0,i.finalWallThickness=0,i._tempStoreyHeight=0,i.finalStoreyHeight=0,e._instance=i,i}return u(e,t),Object.defineProperty(e,"inst",{get:function(){return e._instance},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.updateComponentProperty(),this.navigationItems=this.navigationQueryList.toArray(),this.radioButtons=this.radioButtonQueryList.toArray(),this.optionInputs=this.optionInputQueryList.toArray(),this.body=this.bodyRef.nativeElement,this.foot=this.footRef.nativeElement,this.leftDiv=this.leftDivRef.nativeElement,this.rightDiv=this.rightDivRef.nativeElement,this.rightContent0=this.rightContent0Ref.nativeElement,this.rightContent1=this.rightContent1Ref.nativeElement,this.optionInputs[0].addEvent(s.a.OPTION_SETTING_INPUT_CHANGE,this.onWallThicknessInputChange,this),this.optionInputs[1].addEvent(s.a.OPTION_SETTING_INPUT_CHANGE,this.onStoreyHeightInputChange,this);var t=window.innerWidth,e=window.innerHeight,n=e-49-53;this.renderer.setStyle(this.body,"height",n+"px");var o=Math.floor(.42*t);this.renderer.setStyle(this.leftDiv,"width",o+"px"),this.renderer.setStyle(this.rightDiv,"left",o+10+"px"),this.renderer.setStyle(this.rightDiv,"width",t-o-20+"px"),this.renderer.setStyle(this.rightDiv,"height",n-10+"px"),this.renderer.setStyle(this.foot,"top",n+49+"px");var i=Math.round((t-420)/2);this.defaultButton.left=i,this.finishButton.left=i+220;for(var r=0,a=this.optionInputs;r<a.length;r++){a[r].width=t-o-20+"px"}this.changeView(0),this.init()},e.prototype.open=function(){this.visible="true",CallJS.js_app_show_savebutton(!1);for(var t=0,e=this.optionInputs;t<e.length;t++){e[t].startCheckLegalTimer()}},e.prototype.close=function(){this.visible="false",CallJS.js_app_show_savebutton(!0);for(var t=0,e=this.optionInputs;t<e.length;t++){e[t].stopCheckLegalTimer()}},e.prototype.changeView=function(t){0==t?(this.navigationItems[0].selected=!0,this.navigationItems[1].selected=!1,this.renderer.setStyle(this.rightContent0,"display","block"),this.renderer.setStyle(this.rightContent1,"display","none")):(this.navigationItems[0].selected=!1,this.navigationItems[1].selected=!0,this.renderer.setStyle(this.rightContent0,"display","none"),this.renderer.setStyle(this.rightContent1,"display","block"))},e.prototype.selectWallThickness=function(t){if(0==this.wallThicknessInputOn){for(var n=0,o=this.radioButtons;n<o.length;n++){o[n].selected=!1}this.radioButtons[t].selected=!0,this.tempWallThickness=e.WALL_THICKNESS_LIST[t]}},e.prototype.onWallThicknessInputChange=function(t){var n=t.data;if(this.wallThicknessInputOn=n.on,1==this.wallThicknessInputOn){for(var o=0,i=this.radioButtons;o<i.length;o++){var r=i[o];r.enabled=!1}this.tempWallThickness=parseInt(n.value)}else{for(var s=null,a=0,l=this.radioButtons;a<l.length;a++){var r=l[a];r.enabled=!0,1==r.selected&&(s=r)}var u=this.radioButtons.indexOf(s);u>=0&&(this.tempWallThickness=e.WALL_THICKNESS_LIST[u])}},e.prototype.onStoreyHeightInputChange=function(t){var e=t.data;this.storeyHeightInputOn=e.on,1==this.storeyHeightInputOn&&(this.tempStoreyHeight=parseInt(e.value))},e.prototype.init=function(){var t=r.a.inst.setting;this.tempWallThickness=t.getWallThickness(a.a.MM),this.finalWallThickness=this.tempWallThickness,this.tempStoreyHeight=t.getStoreyHeight(a.a.MM),this.finalStoreyHeight=this.tempStoreyHeight;var n=e.WALL_THICKNESS_LIST.indexOf(this.tempWallThickness);n>=0&&(this.radioButtons[n].selected=!0)},e.prototype.default=function(){for(var t=0,e=this.optionInputs;t<e.length;t++){e[t].showInput(!1)}for(var n=0,o=this.radioButtons;n<o.length;n++){o[n].selected=!1}this.radioButtons[1].selected=!0,this.tempWallThickness=10*l.a.DEFAULT_LENGTH,this.finalWallThickness=this.tempWallThickness,this.tempStoreyHeight=10*l.a.DEFAULT_HEIGHT,this.finalStoreyHeight=this.tempStoreyHeight},e.prototype.finish=function(){this.finalWallThickness=this.tempWallThickness,this.finalStoreyHeight=this.tempStoreyHeight,this.saveWallThickness(this.finalWallThickness),this.saveStoreyHeight(this.finalStoreyHeight),this.close()},Object.defineProperty(e.prototype,"tempWallThickness",{get:function(){return this._tempWallThickness},set:function(t){var e=Math.max(10*l.a.MIN_LENGTH,t);e=Math.min(10*l.a.MAX_LENGTH,e),this._tempWallThickness=e,this.navigationItems[0].number=e.toString(),this.optionInputs[0].value=t.toString()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tempStoreyHeight",{get:function(){return this._tempStoreyHeight},set:function(t){var e=Math.max(10*l.a.MIN_HEIGHT,t);e=Math.min(10*l.a.MAX_HEIGHT,e),this._tempStoreyHeight=e,this.navigationItems[1].number=e.toString(),this.optionInputs[1].value=t.toString()},enumerable:!0,configurable:!0}),e.prototype.saveStoreyHeight=function(t){t=Math.round(t/10),window.localStorage.setItem("storeyHeight",t.toString()),r.a.inst.setting.setStoreyHeight(t)},e.prototype.saveWallThickness=function(t){t=Math.round(t/10),window.localStorage.setItem("wallThickness",t.toString()),r.a.inst.setting.setWallThickness(t)},e.ctorParameters=function(){return[{type:o.Q},{type:o._18}]},e}(i.a);h.WALL_THICKNESS_LIST=[100,120,180,200,240]},"7/ty":function(t,e,n){"use strict";var o=n("Pu9O");n.d(e,"a",function(){return i});var i=function(){function t(){this.commands=new Array,this.points=new Array,this.drawPoints=new Array,this.init()}return t.prototype.init=function(){this.commands=new Array,this.points=new Array},t.prototype.destroy=function(){this.commands=null,this.points=null},t.prototype.addPointAndCommand=function(t,e){this.points.push(t),this.commands.push(e)},t.prototype.addPointXYAndCommand=function(t,e,n){this.points.push(new o.a(t,e)),this.commands.push(n)},t.prototype.addPoint=function(t){this.drawPoints.push(t)},t}()},"7Pn7":function(t,e,n){"use strict";var o=n("36ei"),i=n("gILL"),r=n("Pu9O"),s=n("gF12"),a=n("byMr"),l=n("yNz0");n.d(e,"a",function(){return u});var u=function(){function t(){this._vertices=null,this._area=0,this._holes=null,this._vertices=[],this._holes=[]}return Object.defineProperty(t.prototype,"vertexCount",{get:function(){return this._vertices.length},enumerable:!0,configurable:!0}),t.prototype.addVertex=function(t){this.addVertexXYZ(t.x,t.y,t.z)},t.prototype.addVertexXYZ=function(t,e,n){this._vertices.push(new o.a(t,e,n))},t.prototype.getVertexAt=function(t){return this._vertices[t]},t.prototype.preVertex=function(t){return this._vertices[i.a.preIndex(t,this.vertexCount)]},t.prototype.nextVertex=function(t){return this._vertices[i.a.nextIndex(t,this.vertexCount)]},Object.defineProperty(t.prototype,"holes",{get:function(){return this._holes},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"holeCount",{get:function(){return this._holes.length},enumerable:!0,configurable:!0}),t.prototype.addHole=function(t){0!=t.vertexCount&&this._holes.push(t)},t.prototype.reverse=function(){this.reverseVertices()},t.prototype.reverseVertices=function(){this._vertices=this._vertices.reverse()},t.prototype.faceNormal=function(){return this.autoNormal()},t.prototype.autoNormal=function(){for(var t=this.vertexCount,e=new o.a,n=0;n<t;n++){var i=this._vertices[n].subtract(this.preVertex(n)),r=this.nextVertex(n).subtract(this.preVertex(n)),s=i.crossProd(r);e.x+=s.x,e.y+=s.y,e.z+=s.z}return e.normalize(),e},t.prototype.applyTransform=function(t){for(var e=0;e<this.vertexCount;e++)this._vertices[e]=t.transformPoint(this._vertices[e])},t.prototype.triangulate=function(e){void 0===e&&(e=null),null==e&&(e=new Array);var n=this._vertices[1].subtract(this._vertices[0]);n.normalize();var i=this.faceNormal();i.normalize();var a=n.crossProd(i),u=[a.x,n.x,i.x,this._vertices[0].x,a.y,n.y,i.y,this._vertices[0].y,a.z,n.z,i.z,this._vertices[0].z,0,0,0,1],h=new l.a(u),c=h.clone();c.invert(),c.transpose();for(var p,d,f,g=[],m=0,_=this._vertices;m<_.length;m++){var y=_[m];f=c.transformPoint(y),g.push(new r.a(f.x,f.y))}for(var b,v=new Array,w=0,x=e;w<x.length;w++){var O=x[w];for(b=[],p=0;p<O.vertexCount;p++)f=c.transformPoint(O.vertices[p]),b.push(new r.a(f.x,f.y));v.push(b)}for(var P=new Array,E=s.a.triangulateSafe(g,v),C=0,S=E;C<S.length;C++){for(var T=S[C],L=new t,M=0,N=T;M<N.length;M++){d=N[M];var I=h.transformPoint(new o.a(d.x,d.y,0));L.addVertex(I)}P.push(L)}return P},t.prototype.calVertexUVs=function(t,e,n,o){void 0===n&&(n=null),void 0===o&&(o=null),n||(n=this._vertices[1].subtract(this._vertices[0])),o||(o=this._vertices[0]),n.normalize();var i=this.autoNormal();i.normalize();var s=n.crossProd(i),u=[s.x,s.y,s.z,0,n.x,n.y,n.z,0,i.x,i.y,i.z,0,0,0,0,1],h=new l.a(u);h.transpose();for(var c=h.transformPoint(o),p=new a.a,d=0,f=this._vertices;d<f.length;d++){var g=f[d],m=h.transformPoint(g);p.addVertexXY(m.x,m.y)}return p.calVertexUVs(t,e,new r.a(c.x,c.y))},t.prototype.generateVertexUVs=function(t,e,n,o){void 0===n&&(n=null),void 0===o&&(o=null),null==n&&(n=this._vertices[1].subtract(this._vertices[0])),null==o&&(o=this._vertices[0]),n.normalize();var i=this.faceNormal();i.normalize();var s=n.crossProd(i),u=[s.x,s.y,s.z,0,n.x,n.y,n.z,0,i.x,i.y,i.z,0,0,0,0,1],h=new l.a(u),c=h.clone();c.transpose(),o=c.transformPoint(o);for(var p=new r.a(o.x,o.y),d=new a.a,f=0,g=this._vertices;f<g.length;f++){var m=g[f],_=c.transformPoint(m);d.addPointXY(_.x,_.y)}return d.generateVertexUVs(t,e,p)},Object.defineProperty(t.prototype,"vertices",{get:function(){return this._vertices},enumerable:!0,configurable:!0}),t.prototype.valid_polygon=function(){for(var e,n=new t,o=this.vertexCount-1;o>=0;o--){e=!1;for(var r=0;r<o;r++)if(i.a.isPoint3DEqual(this.getVertexAt(r),this.getVertexAt(o),.01)){e=!0;break}0==e&&n.addVertex(this.getVertexAt(o))}return n.vertices.reverse(),n},t.prototype.transform=function(e,n){void 0===n&&(n=!1);var o;if(n){for(var i=0,r=this._vertices;i<r.length;i++)o=r[i],o.copyFrom(e.transformPoint(o));return this}for(var s=new t,a=0,l=this._vertices;a<l.length;a++)o=l[a],s.addVertex(e.transformPoint(o));return s},t.transformPolygons=function(t,e,n){void 0===n&&(n=!1);var o;if(n){for(var i=0,r=t;i<r.length;i++)o=r[i],o.transform(e,n);return t}for(var s=new Array,a=0,l=t;a<l.length;a++)o=l[a],s.push(o.transform(e,n));return s},t}()},"8Tef":function(t,e,n){"use strict";var o=n("tdkC"),i=n("vgYD");n.d(e,"a",function(){return s});var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=function(t){function e(e,n){var o=t.call(this)||this;return o.scrollable=!1,o.lastAnimationHandler=null,o.view=e,o.renderer=n,o.dom=e.element.nativeElement,o.visible="true",o}return r(e,t),e.prototype.updateComponentProperty=function(){if(this.position&&this.renderer.setStyle(this.dom,"position",this.position),this.width&&this.renderer.setStyle(this.dom,"width",this.width),this.height&&this.renderer.setStyle(this.dom,"height",this.height),this.left){var t=this.left+"px";this.renderer.setStyle(this.dom,"left",t)}if(this.top){var e=this.top+"px";this.renderer.setStyle(this.dom,"top",e)}if(this.right){var n=this.right+"px";this.renderer.setStyle(this.dom,"right",n)}if(this.bottom){var o=this.bottom+"px";this.renderer.setStyle(this.dom,"bottom",o)}if(this.visible){var r="true"==this.visible?"block":"none";this.renderer.setStyle(this.dom,"display",r)}if(this.alpha){var s=this.alpha.toString();this.renderer.setStyle(this.dom,"opacity",s)}if(this.depth){var a=this.depth.toString();this.renderer.setStyle(this.dom,"z-index",a)}if(this.rotation){var l="rotate("+this.rotation+"deg)";this.renderer.setStyle(this.dom,"-webkit-transform",l),this.renderer.setStyle(this.dom,"transform",l)}if(this.scalex&&this.scaley){var u="scale("+this.scalex+","+this.scaley+")";this.renderer.setStyle(this.dom,"-webkit-transform",u),this.renderer.setStyle(this.dom,"transform",u)}this.tooltip&&this.renderer.setAttribute(this.dom,"title",this.tooltip),this.backgroundcolor&&this.renderer.setStyle(this.dom,"background-color",i.a.toString(this.backgroundcolor))},e.prototype.addEventListener=function(t,e,n){void 0===n&&(n=!1),this.dom&&this.dom.addEventListener(t,e,n)},e.prototype.removeEventListener=function(t,e){void 0===e&&(e=null),this.dom&&this.dom.removeEventListener(t,e)},Object.defineProperty(e.prototype,"position",{get:function(){return this._position},set:function(t){this._position=t,this.dom&&this.renderer.setStyle(this.dom,"position",this._position)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this.dom&&this.renderer.setStyle(this.dom,"width",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"widthNumber",{get:function(){if(void 0==this._width)return 0;var t=this._width.replace("px","");return Number.parseFloat(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this.dom&&this.renderer.setStyle(this.dom,"height",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"heightNumber",{get:function(){if(void 0==this._height)return 0;var t=this._height.replace("px","");return Number.parseFloat(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return this._left},set:function(t){if(this._left=t,this.dom){var e=this._left+"px";this.renderer.setStyle(this.dom,"left",e)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this._top},set:function(t){if(this._top=t,this.dom){var e=this._top+"px";this.renderer.setStyle(this.dom,"top",e)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this._right},set:function(t){if(this._right=t,this.dom){var e=this._right+"px";this.renderer.setStyle(this.dom,"right",e)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this._bottom},set:function(t){if(this._bottom=t,this.dom){var e=this._bottom+"px";this.renderer.setStyle(this.dom,"bottom",e)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(t){if(this._visible=t,this.dom){var e="true"==this._visible?"block":"none";this.renderer.setStyle(this.dom,"display",e)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(t){if(this._alpha=t,this.dom){var e=this._alpha.toString();this.renderer.setStyle(this.dom,"opacity",e)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"depth",{get:function(){return this._depth},set:function(t){if(this._depth=t,this.dom){var e=this._depth.toString();this.renderer.setStyle(this.dom,"z-index",e)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this._rotation},set:function(t){if(this._rotation=t,this.dom){var e="rotate("+this._rotation+"deg)";this.renderer.setStyle(this.dom,"-webkit-transform",e),this.renderer.setStyle(this.dom,"transform",e)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scalex",{get:function(){return this._scaleX},set:function(t){if(this._scaleX=t,void 0==this._scaleY&&(this._scaleY=1),this.dom){var e="scale("+this._scaleX+","+this._scaleY+")";this.renderer.setStyle(this.dom,"-webkit-transform",e),this.renderer.setStyle(this.dom,"transform",e)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaley",{get:function(){return this._scaleY},set:function(t){if(this._scaleY=t,void 0==this._scaleX&&(this._scaleX=1),this.dom){var e="scale("+this._scaleX+","+this._scaleY+")";this.renderer.setStyle(this.dom,"-webkit-transform",e),this.renderer.setStyle(this.dom,"transform",e)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltip",{get:function(){return this._tooltip},set:function(t){this._tooltip=t,this.dom&&this.renderer.setAttribute(this.dom,"title",this._tooltip)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"backgroundcolor",{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this.dom&&this.renderer.setStyle(this.dom,"background-color",i.a.toString(this._backgroundColor))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filter",{get:function(){return this._filter},set:function(t){this._filter=t,this.dom&&(this.dom.style.filter=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"buttonMode",{set:function(t){},enumerable:!0,configurable:!0}),e.prototype._touchMove=function(t){0==this.scrollable&&t.preventDefault()},e.prototype.transition=function(t,e){this.renderer.setStyle(t,"transition",e),this.renderer.setStyle(t,"-moz-transition",e),this.renderer.setStyle(t,"-webkit-transition",e),this.renderer.setStyle(t,"-o-transition",e)},e.prototype.animation=function(t,e,n,o){var i=this;void 0===n&&(n=null),void 0===o&&(o=null),this.lastAnimationHandler&&(t.removeEventListener("animationend",this.lastAnimationHandler),this.lastAnimationHandler=null),this.renderer.setStyle(t,"animation",e),this.renderer.setStyle(t,"-moz-animation",e),this.renderer.setStyle(t,"-webkit-animation",e),this.renderer.setStyle(t,"-o-animation",e),n&&(this.lastAnimationHandler=function(e){t.removeEventListener("animationend",i.lastAnimationHandler),i.lastAnimationHandler=null,n.call(o)},t.addEventListener("animationend",this.lastAnimationHandler))},e}(o.a)},"8vz0":function(t,e,n){"use strict";var o=n("gILL"),i=n("Pu9O"),r=n("5syo"),s=n("07lr"),a=n("ANVg");n.d(e,"a",function(){return l});var l=function(){function t(e){void 0===e&&(e=t.DEFAULT_ADSORB_LENGTH),this.adsorbLength=e,this.points=new Array,this.edges=new Array}return t.prototype.pointAdsorb=function(t,e){void 0===e&&(e=!0);for(var n,a=new r.a(t.clone()),l=0,u=this.points;l<u.length;l++)if(n=u[l],o.a.less(t.subtract(n).length,this.adsorbLength))return a.mode=s.a.VERTEX,a.point.copyFrom(n),a;for(var h,c=null,p=null,d=0,f=this.edges;d<f.length;d++){var g=f[d],m=this.points[g.startIndex],_=this.points[g.stopIndex];if(h=o.a.calcFoot(m,_,t),o.a.isPointOnSegment(m,_,h)&&o.a.less(t.subtract(h).length,this.adsorbLength)){c=g,p=h;break}}if(!e)return p?(a.mode=s.a.EDGE,a.point.copyFrom(p)):(a.mode=s.a.NULL,a.point.copyFrom(t)),a;for(var y=new i.a,b=null,v=null,w=null,x=null,O=0,P=this.points;O<P.length&&(n=P[O],y.setTo(n.x+100,n.y),h=o.a.calcFoot(n,y,t),!o.a.less(t.subtract(h).length,this.adsorbLength)||(v=h,b=n,!x))&&(y.setTo(n.x,n.y+100),h=o.a.calcFoot(n,y,t),!o.a.less(t.subtract(h).length,this.adsorbLength)||(x=h,w=n,!v));O++);var E=null,C=null;if(p){if(a.mode=s.a.EDGE,v||x){var S;return v&&(E=v,C=b,(S=o.a.calculateIntersectPoint(C,E,this.points[c.startIndex],this.points[c.stopIndex]))&&o.a.isPointOnSegment(this.points[c.startIndex],this.points[c.stopIndex],S)&&o.a.less(S.subtract(t).length,this.adsorbLength))?(a.point=S,a):x&&(E=x,C=w,(S=o.a.calculateIntersectPoint(C,E,this.points[c.startIndex],this.points[c.stopIndex]))&&o.a.isPointOnSegment(this.points[c.startIndex],this.points[c.stopIndex],S)&&o.a.less(S.subtract(t).length,this.adsorbLength))?(a.point=S,a):(a.point=p,a)}return a.point.copyFrom(p),a}return v||x?(v&&x?E=new i.a(x.x,v.y):v?E=v:x&&(E=x),a.mode=s.a.ALIGN,a.point=E,a):(a.mode=s.a.NULL,a.point.copyFrom(t),a)},t.prototype.edgeAdsorb=function(t,e,n,i){for(var r,s=null,l=null,u=0,h=this.points;u<h.length;u++){var c=h[u];if(s||(r=c.subtract(t),o.a.less(r.length,this.adsorbLength)&&o.a.isNumberEqual(r.crossProd(n),0)&&(s=c)),l||(r=c.subtract(e),o.a.less(r.length,this.adsorbLength)&&o.a.isNumberEqual(r.crossProd(i),0)&&(l=c)),s&&l)break}var p,d=new a.a(t.clone(),e.clone()),f=t.subtract(e);if(!s&&!l)return d;if(s){if(!(p=o.a.calculateIntersectPoint2(s,f,e,i)))return d;l=p}else{if(!(p=o.a.calculateIntersectPoint2(l,f,t,n)))return d;s=p}return d.start.copyFrom(s),d.stop.copyFrom(l),d},t.prototype.addPath=function(t,e){if(void 0===e&&(e=!1),0!=t.length){if(1==t.length)return void this.addPoint(t[0]);for(var n=0;n<t.length-1;n++)this.addEdge(t[n],t[o.a.nextIndex(n,t.length)]);e&&this.addEdge(t[t.length-1],t[0])}},t.prototype.addEdge=function(t,e){var n=this.addPoint(t),o=this.addPoint(e);this.edges.push(new u(n,o))},t.prototype.addPoint=function(t){for(var e=0;e<this.points.length;e++)if(o.a.isPointEqual(t,this.points[e]))return e;return this.points.push(t),this.points.length-1},t.prototype.dispose=function(){this.points.length=0,this.edges.length=0},t}();l.DEFAULT_ADSORB_LENGTH=12;var u=function(){function t(t,e){this.startIndex=t,this.stopIndex=e}return t}()},"8zhN":function(t,e,n){"use strict";function o(t){return s._12(0,[s._13(402653184,1,{virtualNumberBoard:0}),(t()(),s._14(null,["\n"])),(t()(),s._15(16777216,null,null,1,"virtual-number-board",[],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==s._16(t,3)._touchMove(n)&&o}return o},a.a,a.b)),s._17(4308992,[[1,4],["virtualNumberBoard",4]],0,l.a,[s.Q,s._18],null,null)],function(t,e){t(e,3,0)},null)}function i(t){return s._12(0,[(t()(),s._15(16777216,null,null,1,"ruler-setting",[],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==s._16(t,1)._touchMove(n)&&o}return o},o,c)),s._17(4308992,null,0,u.a,[s.Q,s._18],null,null)],function(t,e){t(e,1,0)},null)}var r=n("r4pW"),s=n("/oeL"),a=n("aeJW"),l=n("+DHO"),u=n("CGmY");n.d(e,"b",function(){return c}),e.a=o;var h=[r.a],c=s._11({encapsulation:0,styles:h,data:{}});s._19("ruler-setting",u.a,i,{position:"position",width:"width",height:"height",left:"left",top:"top",right:"right",bottom:"bottom",visible:"visible",alpha:"alpha",depth:"depth",rotation:"rotation",scalex:"scalex",scaley:"scaley",tooltip:"tooltip",backgroundcolor:"backgroundcolor",filter:"filter",buttonMode:"buttonMode"},{},[])},ANVg:function(t,e,n){"use strict";var o=n("Pu9O"),i=n("gILL"),r=n("DE4s");n.d(e,"a",function(){return s});var s=function(){function t(t,e,n,o){void 0===n&&(n=0),void 0===o&&(o=null),this.start=null,this.stop=null,this.mark="",this.mode=0,this.anchor=null,this._dir=null,this.start=t,this.stop=e,this.mode=n,this.anchor=o,this.mark=null,this._dir=e.subtract(t),this._dir.normalize()}return t.prototype.clone=function(){var e=new t(this.start.clone(),this.stop.clone(),this.mode,this.anchor);return e.mark=this.mark,e},t.prototype.equal=function(t){return!(!i.a.isPointEqual(this.start,t.start)||!i.a.isPointEqual(this.stop,t.stop))},t.prototype.endsEqual=function(t){return i.a.isLineEndsEqual(this.start,this.stop,t.start,t.stop)},t.prototype.containsEqual=function(t){return 1==i.a.isPointOnSegment(this.start,this.stop,t.start)&&1==i.a.isPointOnSegment(this.start,this.stop,t.stop)},Object.defineProperty(t.prototype,"length",{get:function(){return this.start.subtract(this.stop).length},enumerable:!0,configurable:!0}),t.prototype.tostring=function(){return"Segment( "+this.start.toString()+this.stop.toString()+" )"},Object.defineProperty(t.prototype,"center",{get:function(){return new o.a(.5*(this.start.x+this.stop.x),.5*(this.start.y+this.stop.y))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"line",{get:function(){return new r.a(this.start,this._dir)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dir",{get:function(){return this._dir},enumerable:!0,configurable:!0}),t.prototype.isPointOnSegment=function(t){return i.a.isPointOnSegment(this.start,this.stop,t)},t.prototype.isPointInSegment=function(t){return i.a.isPointInSegment(this.start,this.stop,t)},t.prototype.isContainSegment=function(t){return this.isPointOnSegment(t.start)&&this.isPointOnSegment(t.stop)},t.segmentOverlap=function(e,n){if(i.a.isPointOnSegment(e.start,e.stop,n.start)&&i.a.isPointOnSegment(e.start,e.stop,n.stop))return new t(n.start,n.stop);if(i.a.isPointOnSegment(n.start,n.stop,e.start)&&i.a.isPointOnSegment(n.start,n.stop,e.stop))return new t(e.start,e.stop);if(i.a.isPointOnSegment(e.start,e.stop,n.start)){if(i.a.isPointOnSegment(n.start,n.stop,e.start))return new t(n.start,e.start);if(i.a.isPointOnSegment(n.start,n.stop,e.stop))return new t(n.start,e.stop)}else if(i.a.isPointOnSegment(e.start,e.stop,n.stop)){if(i.a.isPointOnSegment(n.start,n.stop,e.start))return new t(n.stop,e.start);if(i.a.isPointOnSegment(n.start,n.stop,e.stop))return new t(n.stop,e.stop)}return null},t.segmentMapOverlap=function(e,n){var o=i.a.calcFoot(e.start,e.stop,n.start),r=i.a.calcFoot(e.start,e.stop,n.stop);return this.segmentOverlap(e,new t(o,r))},t}()},AslO:function(t,e,n){"use strict";var o=n("vgYD"),i=n("oWBL");n.d(e,"a",function(){return s});var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=function(t){function e(){var e=t.call(this,!0,!1)||this;return e.DOWN_OFFSET=0,e}return r(e,t),e.prototype.draw=function(){var t=o.a.WHITE,e=this.width,n=this.height;this.graphics.clear(),this.graphics.beginFill(t,0),this.graphics.lineStyle(1,14935011,0),this.graphics.drawRect(0,0,e,this.DOWN_OFFSET),this.graphics.endFill(),this.graphics.beginFill(t),this.graphics.lineStyle(1,14935011,1),this.graphics.moveTo((e>>1)-4,this.DOWN_OFFSET+5),this.graphics.lineTo(e>>1,this.DOWN_OFFSET+0),this.graphics.lineTo(4+(e>>1),this.DOWN_OFFSET+5),this.graphics.lineTo(e,this.DOWN_OFFSET+5),this.graphics.lineTo(e,n),this.graphics.lineTo(0,n),this.graphics.lineTo(0,this.DOWN_OFFSET+5),this.graphics.lineTo((e>>1)-4,this.DOWN_OFFSET+5),this.graphics.endFill(),this.dom.style.boxShadow="0 2px 4px 0 rgba(213,213,213,0.50)"},e}(i.a)},B0l3:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=function(t){function e(){return t.call(this)||this}return o(e,t),Object.defineProperty(e.prototype,"keys",{get:function(){var t=[];for(var e in this)t.push(e);return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"values",{get:function(){var t=[];for(var e in this)t.push(this[e]);return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this.keys.length},enumerable:!0,configurable:!0}),e.prototype.clone=function(){var t=new e;for(var n in this){t[n]=this[n]}return t},e.prototype.dispose=function(){for(var t in this)delete this[t]},e}(Object)},Bsrv:function(t,e,n){"use strict";function o(t){return a._12(0,[(t()(),a._20(0,null,null,0))],null,null)}function i(t){return a._12(0,[a._13(402653184,1,{contentContainer:0}),(t()(),a._15(16777216,null,null,2,"v-tool-button",[["class","VToolButton"],["hasArrow","false"],["height","100%"],["width","100%"]],null,[[null,"touchend"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchstart"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,2)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==a._16(t,2).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==a._16(t,2).mouseOut(n)&&o}if("mousedown"===e){o=!1!==a._16(t,2).mouseDown(n)&&o}if("mouseup"===e){o=!1!==a._16(t,2).mouseUp(n)&&o}if("click"===e){o=!1!==a._16(t,2).mouseClick(n)&&o}if("touchstart"===e){o=!1!==a._16(t,2).touchStart(n)&&o}if("touchend"===e){o=!1!==a._16(t,2).touchEnd(n)&&o}if("touchend"===e){o=!1!==i.touchEnd()&&o}return o},u.b,u.c)),a._17(4308992,null,0,h.a,[a.Q,a._18],{width:[0,"width"],height:[1,"height"],iconUp:[2,"iconUp"],iconOver:[3,"iconOver"],iconDown:[4,"iconDown"],label:[5,"label"],hasArrow:[6,"hasArrow"]},null),(t()(),a._14(null,["\n\n"])),(t()(),a._14(null,["\n\n"])),(t()(),a._20(16777216,[[1,3],["content",2]],null,0,null,o))],function(t,e){var n=e.component;t(e,2,0,"100%","100%",n.iconUp,n.iconOver,n.iconDown,n.label,"false")},null)}function r(t){return a._12(0,[(t()(),a._15(16777216,null,null,1,"drop-down-menu",[],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==a._16(t,1)._touchMove(n)&&o}return o},i,p)),a._17(4308992,null,0,l.a,[a.Q,a._18],null,null)],function(t,e){t(e,1,0)},null)}var s=n("LSAk"),a=n("/oeL"),l=n("sg3d"),u=n("DLok"),h=n("R4k5");n.d(e,"b",function(){return p}),e.a=i;var c=[s.a],p=a._11({encapsulation:0,styles:c,data:{}});a._19("drop-down-menu",l.a,r,{position:"position",width:"width",height:"height",left:"left",top:"top",right:"right",bottom:"bottom",visible:"visible",alpha:"alpha",depth:"depth",rotation:"rotation",scalex:"scalex",scaley:"scaley",tooltip:"tooltip",backgroundcolor:"backgroundcolor",filter:"filter",buttonMode:"buttonMode",iconUp:"iconUp",iconOver:"iconOver",iconDown:"iconDown",label:"label"},{},[])},CGmY:function(t,e,n){"use strict";var o=n("/oeL"),i=n("8Tef"),r=n("Tcd4"),s=n("Qb7I"),a=n("Pu9O"),l=n("+N0H"),u=n("Yhhh"),h=n("YihH"),c=n("+ByO"),p=n("CW6F");n.d(e,"a",function(){return f});var d=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),f=function(t){function e(e,n){return t.call(this,e,n)||this}return d(e,t),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){var t=window.innerHeight,e=0;if(t<514)for(e=Math.round(.537*t);e%3!=0;)e-=1;else e=276,t=514;this.width=e+"px",this.height=t+"px",this.updateComponentProperty(),this.virtualNumberBoard.updateSize(this.widthNumber,this.heightNumber),this.virtualNumberBoard.addEvent(r.a.VIRTUAL_NUMBER_BOARD_CONFIRM,this.onConfirm,this)},e.prototype.setData=function(t,e,n){this.rulerInput&&this.rulerInput!=t&&(this.rulerInput.selected=!1),this.rulerInput=t,this.virtualNumberBoard.setData(e,n)},e.prototype.onConfirm=function(t){var e,n,o,i=l.a.inst,r=t.data,d=this.rulerInput.inputData,f=d.value,g=this.rulerInput.inputData.direct;o=d.maxValue?Math.min(r,d.maxValue)-f:r-f,o<0&&(g.x*=-1,g.y*=-1),o*=.1;var m=Math.abs(o);switch(g.normalize(m),d.mode){case s.a.OPENING_LENGTH:var _=d.target;e=new a.a(_.realX,_.realY),n=e.add(g),_.moveOpening(n),i.updateRuler(),i.change(!0,!1);break;case s.a.NEIGHBOR_WALL_LENGTH:var y=d.target;e=new a.a(y.realX,y.realY),n=e.add(g);1==y.moveWall(n,!1)&&i.change(!0,!0);break;case s.a.MODEL_LENGTH:var b=d.target;e=new a.a(b.realX,b.realY),n=e.add(g),b.realX=n.x,b.realY=n.y,b instanceof u.a?b.calculateTransform():b instanceof p.a&&b.calculateTransform(),i.change(!0,!1),i.updateRuler();break;case s.a.CORNER_LENGTH:var v=d.target;e=new a.a(v.realX,v.realY),n=e.add(g),v.moveCorner(n),i.change(!0,!0)}h.a.inst.close(),c.a.inst.moveCenter()},e.ctorParameters=function(){return[{type:o.Q},{type:o._18}]},e}(i.a)},COws:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){}return t}();o.ROTATE="OperatorActionRotate",o.DELETE="OperatorActionDelete",o.SPLIT="OperatorActionSplit",o.CLEAR="OperatorActionClear",o.NAME="OperatorActionName",o.MIRROR="OperatorActionMirror",o.HOLE="OperatorActionHole"},CQOF:function(t,e,n){"use strict";var o=n("/oeL"),i=n("8Tef"),r=n("WFe8"),s=n("+N0H"),a=n("PbJf"),l=n("YihH"),u=n("FtES"),h=n("+ByO"),c=n("pPSP");n.d(e,"a",function(){return d});var p=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),d=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.checkboxIconSelected="assets/components/checkbox/selected_3x.png",o.checkboxIconUnSelected="assets/components/checkbox/unselected_3x.png",o}return p(e,t),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.updateComponentProperty(),this.width="460px",l.a.inst.addEvent(u.a.SETTINGS_CONFIRM,this.onConfirm,this)},e.prototype.setTargetWall=function(t){this.targetWall=t,this.wallWidthInput.finalLabel=Math.round(10*t.realWidth).toString(),this.wallLengthInput.finalLabel=Math.round(10*t.realLength).toString(),this.wallHeightInput.finalLabel=Math.round(10*t.realHeight).toString(),this.wallWidthInput.selected=!1,this.wallLengthInput.selected=!1,this.wallHeightInput.selected=!1;var e=t.startCorner,n=t.stopCorner;e.connectedWalls.length<=1||n.connectedWalls.length<=1?this.wallWidthInput.editable=!0:this.wallWidthInput.editable=!1,this.bearingCheckBox.selected=this.targetWall.bearing,this.parapetCheckBox.selected=this.targetWall.parapet,0==this.targetWall.bearing&&1==this.targetWall.parapet?this.wallHeightInput.editable=!0:this.wallHeightInput.editable=!1},e.prototype.showWallWidthSetting=function(){1==this.wallWidthInput.editable&&(this.wallWidthInput.selected=!0,this.currentInput=this.wallWidthInput,this.wallLengthInput.selected=!1,this.wallLengthInput.resetLabel(),this.wallHeightInput.selected=!1,this.wallHeightInput.resetLabel(),l.a.inst.open(this.targetWall,"墙长 /mm",Math.round(10*this.targetWall.realWidth)),h.a.inst.moveLeft())},e.prototype.showWallLengthSetting=function(){1==this.wallLengthInput.editable&&(this.wallLengthInput.selected=!0,this.currentInput=this.wallLengthInput,this.wallWidthInput.selected=!1,this.wallWidthInput.resetLabel(),this.wallHeightInput.selected=!1,this.wallHeightInput.resetLabel(),l.a.inst.open(this.targetWall,"墙厚 /mm",Math.round(10*this.targetWall.realLength)),h.a.inst.moveLeft())},e.prototype.showWallHeightSetting=function(){1==this.wallHeightInput.editable&&(this.wallHeightInput.selected=!0,this.currentInput=this.wallHeightInput,this.wallWidthInput.selected=!1,this.wallWidthInput.resetLabel(),this.wallLengthInput.selected=!1,this.wallLengthInput.resetLabel(),l.a.inst.open(this.targetWall,"墙高 /mm",Math.round(10*this.targetWall.realHeight)),h.a.inst.moveLeft())},e.prototype.setWallBearing=function(){this.targetWall.bearing=this.bearingCheckBox.selected,this.targetWall.parapet=!1,this.targetWall.calculateTransform(),this.targetWall.scene.change(),this.wallHeightInput.editable=!1,this.parapetCheckBox.selected=!1,this.parapetCheckBox.enabled=!this.bearingCheckBox.selected},e.prototype.setWallParapet=function(){0==this.bearingCheckBox.selected&&(this.targetWall.parapet=this.parapetCheckBox.selected,this.targetWall.calculateTransform(),this.targetWall.scene.change(),this.wallHeightInput.editable=this.targetWall.parapet)},e.prototype.onConfirm=function(t){var e=t.data,n=e.target,o=e.value;if(this.targetWall==n&&this.currentInput){if(this.currentInput==this.wallWidthInput)this.targetWall.doChangeWidth(Math.round(o/10));else if(this.currentInput==this.wallLengthInput){var i=Math.round(o/10);(i>r.a.MAX_LENGTH||i<r.a.MIN_LENGTH)&&c.a.inst.warning("超出范围"),this.targetWall.doChangeLength(i)}else if(this.currentInput==this.wallHeightInput){var l=s.a.inst.setting.getStoreyHeight(a.a.CM),u=Math.round(o/10);u>l?c.a.inst.warning("请先在设置中修改层高"):u<r.a.MIN_HEIGHT&&c.a.inst.warning("超出范围"),u=Math.min(u,l),u=Math.max(u,r.a.MIN_HEIGHT),this.targetWall.realHeight=u}this.setTargetWall(this.targetWall)}},e.ctorParameters=function(){return[{type:o.Q},{type:o._18}]},e}(i.a)},CW6F:function(t,e,n){"use strict";var o=n("ZvbM"),i=n("vgYD"),r=n("Eezr"),s=n("lbiv"),a=n("PSoK"),l=n("Pu9O"),u=n("bv23"),h=n("Hhj7"),c=n("gILL"),p=n("UPT1"),d=n("PbJf"),f=n("jDyV"),g=n("/T2q"),m=n("aJ2T"),_=n("tTVb");n.d(e,"a",function(){return b});var y=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),b=function(t){function e(){var e=t.call(this,!0,!0)||this;return e.structType=0,e.borderColor=0,e._drawMatrix=new u.a,e._mouseLastPoint=new l.a,e._mouseMovePoint=new l.a,e.dragTouchMoveHandlerLamda=function(t){e.dragTouchMoveHandler(t)},e.dragTouchEndHandlerLamda=function(t){e.dragTouchEndHandler(t)},e.borderColor=i.a.STRUCT_BORDER_COLOR,e.depth=r.a.STRUCT,e.forwardName=s.a.createPureUID(),e.backwardName=s.a.createPureUID(),e.startName=s.a.createPureUID(),e.stopName=s.a.createPureUID(),e}return y(e,t),Object.defineProperty(e.prototype,"tagName",{get:function(){return"Struct"},enumerable:!0,configurable:!0}),e.prototype.onAdd=function(){t.prototype.onAdd.call(this),this.calculateTransform()},e.prototype.onRemove=function(){t.prototype.onRemove.call(this)},e.prototype.create=function(t,e){this.realWidth=t,this.realLength=e;var n=new a.a(0,0);this.scene.addCorner(n);var o=new a.a(0,0);this.scene.addCorner(o),this.startCornerName=n.name,this.stopCornerName=o.name},e.prototype.createFromCorner=function(t,e,n){this.startCornerName=e,this.stopCornerName=n;var o=this.scene.getCornerByName(e),i=this.scene.getCornerByName(n),r=i.point.subtract(o.point),s=r.length;this.realWidth=s,this.realLength=t,r=i.point.add(o.point),r.x/=2,r.y/=2,this.realX=r.x,this.realY=r.y,r=i.point.subtract(o.point);var a=Math.atan2(r.y,r.x);a*=180/Math.PI,this.rotation=a},e.prototype.clear=function(){var e=this.scene.getCornerByName(this.startCornerName);e&&this.scene.removeCorner(e);var n=this.scene.getCornerByName(this.stopCornerName);n&&this.scene.removeCorner(n),t.prototype.clear.call(this)},Object.defineProperty(e.prototype,"mirror",{get:function(){return this._mirror},set:function(t){this._mirror=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startCornerName",{get:function(){return this._startCornerName},set:function(t){this._startCornerName=t,this.setPolygonChangeFlag(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stopCornerName",{get:function(){return this._stopCornerName},set:function(t){this._stopCornerName=t,this.setPolygonChangeFlag(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startName",{get:function(){return this._startName},set:function(t){this._startName=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stopName",{get:function(){return this._stopName},set:function(t){this._stopName=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"forwardName",{get:function(){return this._forwardName},set:function(t){this._forwardName=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"backwardName",{get:function(){return this._backwardName},set:function(t){this._backwardName=t},enumerable:!0,configurable:!0}),e.prototype.draw=function(){if(this.stage){this.graphics.clear();var t=this.realWidth,e=this.realLength;this.graphics.width=Math.floor(t/2)+2,this.graphics.height=Math.floor(e/2)+2,this.structType==f.a.PILLAR?(this.graphics.lineStyle(1,this.borderColor),this.graphics.beginFill(14211288),this.graphics.drawRect(-t>>1,-e>>1,t,e)):this.structType==f.a.FLUE&&(this.graphics.lineStyle(1,this.borderColor),this.graphics.beginFill(16777215),this.graphics.drawRect(-t>>1,-e>>1,t,e),t-=8,e-=8,this.graphics.lineStyle(1,this.borderColor),this.graphics.beginFill(14211288),this.graphics.drawRect(-t>>1,-e>>1,t,e),this.graphics.endFill(),this.graphics.lineStyle(1,this.borderColor),this.graphics.moveTo(-t>>1,-e>>1),this.graphics.lineTo(1*t/3,1*-e/3),this.graphics.lineTo(t>>1,e>>1)),this.graphics.endFill()}},e.prototype.calculatePolygon=function(){this.polygon.clear(),this.polygon.addVertex(new l.a(-.5*this.realWidth,-.5*this.realLength)),this.polygon.addVertex(new l.a(.5*this.realWidth,-.5*this.realLength)),this.polygon.addVertex(new l.a(.5*this.realWidth,.5*this.realLength)),this.polygon.addVertex(new l.a(-.5*this.realWidth,.5*this.realLength))},e.prototype.updateCorners=function(){var t=new l.a(-this.realWidth>>1,0),e=new l.a(this.realWidth>>1,0);t=this.localToScene(t),e=this.localToScene(e);var n=this.scene.getCornerByName(this.startCornerName);n.realX=t.x,n.realY=t.y,n.calculateTransform(),n.visible=!1;var o=this.scene.getCornerByName(this.stopCornerName);o.realX=e.x,o.realY=e.y,o.calculateTransform(),o.visible=!1},e.prototype.calculateTransform=function(){this.x=this.realX,this.y=this.realY,this.rotation=this.realRotationZ,this.calculatePolygon(),this.updateCorners(),this.draw()},e.prototype.touchStart=function(e){t.prototype.touchStart.call(this,e);var n=e.touches[0];this._tmpPoint.setTo(n.clientX,n.clientY),this._tmpPoint=this.scene.globalToLocal(this._tmpPoint),this._mouseLastPoint.setTo(this._tmpPoint.x,this._tmpPoint.y),m.a.inst.focusTarget==this&&(this.stage.addEventListener(_.a.TOUCH_MOVE,this.dragTouchMoveHandlerLamda),this.stage.addEventListener(_.a.TOUCH_END,this.dragTouchEndHandlerLamda))},e.prototype.touchEnd=function(e){1==this.hasMouseDown&&t.prototype.touchEnd.call(this,e)},e.prototype.touchClick=function(e){m.a.inst.focus(this),t.prototype.touchClick.call(this,e)},e.prototype.focusIn=function(){t.prototype.focusIn.call(this),this.borderColor=i.a.STRUCT_FOCUS_BORDER_COLOR,this.calculateTransform();var e={selectedItem:this,selectedPoint:new l.a};this.scene.dispatchEvent(new g.a(g.a.MSCENE_ITEM_SELECTED,e),this.scene)},e.prototype.focusOut=function(){t.prototype.focusOut.call(this),null!=this.parent&&(this.borderColor=i.a.STRUCT_BORDER_COLOR,this.calculateTransform(),this.scene.dispatchEvent(new g.a(g.a.MSCENE_ITEM_UNSELECTED),this.scene))},e.prototype.dragTouchMoveHandler=function(t){if(0!=this.hasMouseDown&&!(t.touches.length>1)){var e=t.touches[0];this._tmpPoint.setTo(e.clientX,e.clientY),this._tmpPoint=this.scene.globalToLocal(this._tmpPoint),this._mouseMovePoint.setTo(this._tmpPoint.x,this._tmpPoint.y);var n=new l.a(this.realX,this.realY);n.x+=this._mouseMovePoint.x-this._mouseLastPoint.x,n.y+=this._mouseMovePoint.y-this._mouseLastPoint.y,n=this.calculateAdsorbVector2D(n.x,n.y,this.scene.scale,4),this.realX=n.x,this.realY=n.y,this._mouseLastPoint.copyFrom(this._mouseMovePoint),this.calculateTransform(),p.a.inst.showModelRuler(this,!1)}},e.prototype.dragTouchEndHandler=function(t){this.stage.removeEventListener(_.a.TOUCH_MOVE,this.dragTouchMoveHandlerLamda),this.stage.removeEventListener(_.a.TOUCH_END,this.dragTouchEndHandlerLamda),this.calculateTransform(),this.scene.change(),p.a.inst.showModelRuler(this,!0)},e.prototype.calculateAdsorbVector2D=function(t,e,n,o){void 0===n&&(n=1),void 0===o&&(o=6);var i=new h.a(o*Math.SQRT2/n,o/n);for(var r in this.scene.walls){var s=this.scene.walls[r];s.forwardRoom&&i.addEdge(s.localToScene(s.topLeft),s.localToScene(s.topRight)),s.backwardRoom&&i.addEdge(s.localToScene(s.bottomLeft),s.localToScene(s.bottomRight))}var a=new u.a;a.rotate(this.rotation/180*Math.PI),a.translate(t,e);for(var p,d,f=[a.transformPoint(new l.a(this.realWidth/2,this.realLength/2)),a.transformPoint(new l.a(-this.realWidth/2,this.realLength/2)),a.transformPoint(new l.a(-this.realWidth/2,-this.realLength/2)),a.transformPoint(new l.a(this.realWidth/2,-this.realLength/2))],g=Number.MAX_VALUE,m=null,_=0,y=f;_<y.length;_++)p=y[_],(d=i.point2PointAdsorb(p))&&c.a.less(d.subtract(p).length,g)&&(g=d.subtract(p).length,m=d.subtract(p));if(m)return new l.a(m.x+t,m.y+e);g=Number.MAX_VALUE;for(var b=0,v=f;b<v.length;b++)p=v[b],(d=i.point2EdgeAdsorb(p))&&c.a.less(d.subtract(p).length,g)&&(g=d.subtract(p).length,m=d.subtract(p));return m?new l.a(m.x+t,m.y+e):new l.a(t,e)},e.prototype.actionDelete=function(t){void 0===t&&(t=!0),this.scene.removeStruct(this),t&&this.scene.change(),p.a.inst.update()},e.prototype.actionRotate=function(){this.realRotationZ+=90,this.calculateTransform(),this.scene.change()},e.prototype.doChangeWidth=function(t){this.realWidth=t,this.scene.change(),this.calculateTransform()},e.prototype.doChangeLength=function(t){this.realLength=t,this.scene.change(),this.calculateTransform()},e.prototype.render=function(){this.scene.change(),this.calculateTransform()},e.prototype.isLegal=function(){return!0},e.prototype.dumpData=function(){var t=new Object;return t.name=this.name,t.structType=this.structType,t.forwardName=this.forwardName,t.backwardName=this.backwardName,t.startName=this.startName,t.stopName=this.stopName,t.startCornerName=this.startCornerName,t.stopCornerName=this.stopCornerName,t.bearing=0,t.parapet=0,t.length=this.realLength,t.height=this.scene.setting.getStoreyHeight(d.a.CM),t.forwardRoomName="",t.backwardRoomName="",t},e.loadData=function(t){var n=t.startCornerName,o=t.stopCornerName;if(n==o)return null;var i;return""!=o&&""!=o&&(i=new e,i.name=t.name,i.structType=t.structType,i.forwardName=t.forwardName,i.backwardName=t.backwardName,i.startName=t.startName,i.stopName=t.stopName,i.createFromCorner(t.length,n,o)),i},e}(o.a);b.MIN_LENGTH=12,b.MAX_LENGTH=200,b.MIN_WIDTH=12,b.MAX_WIDTH=200},ChOG:function(t,e,n){"use strict";var o=n("byMr"),i=n("Pu9O"),r=n("B0l3"),s=n("ANVg"),a=n("gILL"),l=n("NiEO");n.d(e,"a",function(){return u});var u=function(){function t(){this.restrictPolygon=null,this.points=null,this.edges=null,this.shapes=null,this.points=[],this.edges=new r.a,this.shapes=[],this.restrictPolygon=new o.a}return Object.defineProperty(t.prototype,"pointCount",{get:function(){return this.points.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"edgeCount",{get:function(){return this.edges.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shapeCount",{get:function(){return this.shapes.length},enumerable:!0,configurable:!0}),t.prototype.getPointAt=function(t){return this.points[t]},t.prototype.getEdges=function(){var t=[];for(var e in this.edges){var n=this.edges[e];t.push(new s.a(this.points[n.startIndex],this.points[n.stopIndex]))}return t},t.prototype.getShapeAt=function(t){return this.indexShapeToPolygon(this.shapes[t])},t.prototype.indexShapeToPolygon=function(t){for(var e=[],n=0,o=t.vertexIndexes;n<o.length;n++){var i=o[n];e.push(this.points[i])}return e},t.prototype.addEdge=function(t,e){var n=this.addPoint(t),o=this.addPoint(e),i=this.getEdgeByPointIndex(n,o);return i||(i=new h(n,o),this.edges[this.edgeKey(i.startIndex,i.stopIndex)]=i),i},t.prototype.addPath=function(t,e){if(void 0===e&&(e=!1),!(t.length<2)){for(var n=0;n<t.length-1;n++)this.addEdge(t[n],t[n+1]);e&&this.addEdge(t[t.length-1],t[0])}},t.prototype.deleteEdge=function(t,e,n){void 0===n&&(n=!1),delete this.edges[this.edgeKey(t,e)],n||delete this.edges[this.edgeKey(e,t)]},t.prototype.addShape=function(t){for(var e=new c,n=0;n<t.length;n++){var o=t[n],i=t[a.a.nextIndex(n,t.length)];this.addEdge(o,i),e.vertexIndexes.push(this.getPointIndex(o))}return this.shapes.push(e),e},t.prototype.buildEdgeShapeRelation=function(){for(var t in this.edges){var e=this.edges[t];e.relatedShapes.length=0}for(var n=0,o=this.shapes;n<o.length;n++)for(var i=o[n],r=0;r<i.vertexIndexes.length;r++){var s=i.vertexIndexes[r],l=i.vertexIndexes[a.a.nextIndex(r,i.vertexIndexes.length)];e=this.getEdgeByPointIndex(s,l,!0),e&&e.relatedShapes.push(i),e=this.getEdgeByPointIndex(l,s,!0),e&&e.relatedShapes.push(i)}},t.prototype.processEdgeClean=function(){var t=this.getEdges(),e=[],n=[];for(var o in this.edges){var r=this.edges[o],l=this.getPointAt(r.startIndex),u=this.getPointAt(r.stopIndex),h=a.a.clipLineWithSegments(l,u,t);if(0!=h.length){h.unshift(l),h.push(u);for(var c=0;c<h.length-1;c++)e.push(new s.a(h[c],h[c+1]));n.push(r)}}for(var p=0,d=n;p<d.length;p++){var r=d[p];this.deleteEdge(r.startIndex,r.stopIndex)}for(var f=0,g=e;f<g.length;f++){var m=g[f];this.addEdge(m.start,m.stop)}var _=new i.a;for(var o in this.edges){var r=this.edges[o],y=r.startIndex,b=r.stopIndex;if(this.edges[this.edgeKey(y,b)]&&this.edges[this.edgeKey(b,y)]&&this.deleteEdge(b,y,!0),a.a.isPointEqual(this.points[y],this.points[b]))this.deleteEdge(y,b);else if(this.restrictPolygon&&this.restrictPolygon.points.length>3){if(_.setTo(.5*(this.points[y].x+this.points[b].x),.5*(this.points[y].y+this.points[b].y)),!this.restrictPolygon.containsOn(this.points[y])||!this.restrictPolygon.containsOn(this.points[b])||!this.restrictPolygon.containsOn(_)){this.deleteEdge(y,b);continue}if(this.restrictPolygon.holeCount>0){for(var v=!1,w=0,x=this.restrictPolygon.holes;w<x.length;w++){var O=x[w];if(O.containsIn(_)){v=!0;break}}if(v){this.deleteEdge(y,b);continue}}}}},t.prototype.mergeEnd=function(t){var e=this.getPointIndex(t);if(e==a.a.NONE_INDEX)return!1;var n,o=[];for(var i in this.edges){var n=this.edges[i];n.startIndex!=e&&n.stopIndex!=e||o.push(n)}if(2!=o.length)return!1;var r=o[0],s=o[1],l=r.startIndex!=e?r.startIndex:r.stopIndex,u=s.startIndex!=e?s.startIndex:s.stopIndex,h=this.getPointAt(l),c=this.getPointAt(u),p=h.subtract(c).length,d=t.subtract(h).length,f=t.subtract(c).length;if(!a.a.isNumberEqual(p,d+f))return!1;this.addEdge(h,c),this.deleteEdge(r.startIndex,r.stopIndex),this.deleteEdge(s.startIndex,s.stopIndex);for(var g=0,m=this.shapes;g<m.length;g++){var _=m[g],y=_.vertexIndexes.indexOf(e);y!=a.a.NONE_INDEX&&_.vertexIndexes.splice(y,1)}return!0},t.prototype.mergeEnds=function(){for(var t=0,e=this.points;t<e.length;t++){var n=e[t];this.mergeEnd(n)}},t.prototype.polygonize=function(t){void 0===t&&(t=!0);var e=l.a.getInstance();e.clear();for(var n in this.edges){var o=this.edges[n];e.addEdge(this.points[o.startIndex],this.points[o.stopIndex])}e.boundary(t),this.shapes.length=0;for(var i,r=0;r<e.polygonLength;r++)if(i=e.getPolygonAt(r)){for(var s=!1,a=0,u=this.restrictPolygon.holes;a<u.length;a++){var h=u[a];if(i.shapeEqual(h)){s=!0;break}}s||this.addShape(i.points)}},t.prototype.deleteLeafEdges=function(){this.buildEdgeShapeRelation();for(var t=this.edges.values,e=0,n=t;e<n.length;e++){var o=n[e];0==o.relatedShapes.length&&this.deleteEdge(o.startIndex,o.stopIndex)}},t.prototype.addPoint=function(t){var e=this.getPointIndex(t);return e!=a.a.NONE_INDEX?e:(this.points.push(t),this.points.length-1)},t.prototype.edgeKey=function(t,e){return t.toString()+"-"+e.toString()},t.prototype.getEdgeByPointIndex=function(t,e,n){return void 0===n&&(n=!1),this.edges[this.edgeKey(t,e)]?this.edges[this.edgeKey(t,e)]:n?null:this.edges[this.edgeKey(e,t)]?this.edges[this.edgeKey(e,t)]:null},t.prototype.getPointIndex=function(t){return this.getPointIndexByXY(t.x,t.y)},t.prototype.getPointIndexByXY=function(t,e){for(var n=0;n<this.points.length;n++)if(a.a.isNumberEqual(t,this.points[n].x)&&a.a.isNumberEqual(e,this.points[n].y))return n;return-1},t}(),h=function(){function t(t,e){this.startIndex=t,this.stopIndex=e,this.relatedShapes=[]}return t}(),c=function(){function t(){this.vertexIndexes=[]}return t}()},DE4s:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(t,e){this.p0=null,this.dir=null,this.p0=t,this.dir=e}return Object.defineProperty(t.prototype,"p1",{get:function(){return this.p0.add(this.dir)},enumerable:!0,configurable:!0}),t.prototype.output=function(){console.debug("Line2D.output"),console.debug("    ",this.p0,this.dir)},t}()},DLok:function(t,e,n){"use strict";function o(t){return s._12(0,[s._13(402653184,1,{imageRef:0}),s._13(402653184,2,{labelRef:0}),s._13(402653184,3,{arrowRef:0}),(t()(),s._15(0,[[1,0],["image",1]],null,0,"div",[["class","image"]],null,null,null,null,null)),(t()(),s._14(null,["\n"])),(t()(),s._15(0,[[2,0],["lb",1]],null,1,"p",[["class","label"]],null,null,null,null,null)),(t()(),s._14(null,["",""])),(t()(),s._14(null,["\n"])),(t()(),s._15(0,[[3,0],["arrow",1]],null,0,"div",[["class","arrow"]],null,null,null,null,null))],null,function(t,e){t(e,6,0,e.component.label)})}function i(t){return s._12(0,[(t()(),s._15(16777216,null,null,1,"v-tool-button",[],null,[[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchstart"],[null,"touchend"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==s._16(t,1)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,1).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,1).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,1).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,1).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,1).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,1).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,1).touchEnd(n)&&o}return o},o,u)),s._17(4308992,null,0,a.a,[s.Q,s._18],null,null)],function(t,e){t(e,1,0)},null)}var r=n("X+z+"),s=n("/oeL"),a=n("R4k5");n.d(e,"c",function(){return u}),e.b=o,n.d(e,"a",function(){return h});var l=[r.a],u=s._11({encapsulation:0,styles:l,data:{}}),h=s._19("v-tool-button",a.a,i,{position:"position",width:"width",height:"height",left:"left",top:"top",right:"right",bottom:"bottom",visible:"visible",alpha:"alpha",depth:"depth",rotation:"rotation",scalex:"scalex",scaley:"scaley",tooltip:"tooltip",backgroundcolor:"backgroundcolor",filter:"filter",buttonMode:"buttonMode",iconUp:"iconUp",iconOver:"iconOver",iconDown:"iconDown",textUp:"textUp",textOver:"textOver",textDown:"textDown",label:"label",hasArrow:"hasArrow"},{},[])},DLyt:function(t,e,n){"use strict";var o=n("Eezr"),i=n("oWBL");n.d(e,"a",function(){return s});var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=function(t){function e(e,n,i,r){void 0===n&&(n=15790579),void 0===i&&(i=13422031),void 0===r&&(r=12566463);var s=t.call(this,!0,!0)||this;return s.size=0,s.depth=o.a.GRID,s.size=e,s.backgroundColor=n,s.gridColor=i,s.axisColor=r,s}return r(e,t),Object.defineProperty(e.prototype,"tagName",{get:function(){return"Grid"},enumerable:!0,configurable:!0}),e.prototype.onAdd=function(){this.calcTransform()},e.prototype.draw=function(){this.graphics.clear();var t=this.size>>1;this.graphics.beginFill(this.backgroundColor,1),this.graphics.drawRect(-t,-t,this.size,this.size),this.graphics.endFill();var e,n=0;for(this.graphics.lineStyle(1,this.gridColor,1),e=-t;e<=t;e+=50)this.graphics.moveTo(-t,e),this.graphics.lineTo(t,e),this.graphics.moveTo(e,-t),this.graphics.lineTo(e,t),n++;this.graphics.endStroke(),this.graphics.lineStyle(2,this.axisColor,1),this.graphics.moveTo(-t,0),this.graphics.lineTo(t,0),this.graphics.moveTo(0,-t),this.graphics.lineTo(0,t),this.graphics.endStroke()},e.prototype.calcTransform=function(){this.width=this.size>>1,this.height=this.size>>1,this.draw()},e}(i.a)},Dsuh:function(t,e,n){"use strict";var o=n("/oeL"),i=n("ExGp");n.d(e,"a",function(){return s});var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.label="",o.number="",o}return r(e,t),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.updateComponentProperty(),this.lb=this.lbRef.nativeElement},e.prototype.upStyle=function(){this.renderer.setStyle(this.lb,"color","#666666"),t.prototype.upStyle.call(this)},e.prototype.downStyle=function(){this.renderer.setStyle(this.lb,"color","#2B7EDF"),t.prototype.downStyle.call(this)},e.ctorParameters=function(){return[{type:o.Q},{type:o._18}]},e}(i.a)},E2K4:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=[".bg[_ngcontent-%COMP%]{width:100%;height:100%}common-setting[_ngcontent-%COMP%]{background-color:#fff}common-setting[_ngcontent-%COMP%], room-setting[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0}room-setting[_ngcontent-%COMP%]{width:200px;height:100%;background-color:#f6f6f6;overflow-x:hidden;overflow-y:scroll}ruler-setting[_ngcontent-%COMP%]{position:absolute;bottom:0;right:0;background-color:#fff}@keyframes hideSettings{0%{right:0;opacity:1}to{right:-200px;opacity:0}}@-webkit-keyframes hideSettings{0%{right:0;opacity:1}to{right:-200px;opacity:0}}@keyframes showSettings{0%{right:-200px;opacity:0}to{right:0;opacity:1}}@-webkit-keyframes showSettings{0%{right:-200px;opacity:0}to{right:0;opacity:1}}"]},EGQA:function(t,e,n){"use strict";var o=n("/oeL"),i=n("8Tef"),r=n("p6er"),s=n("mGOc"),a=n("v4Xy"),l=n("d3c3"),u=n("+N0H"),h=n("WjyP"),c=n("o2f4"),p=n("WFe8"),d=n("COws"),f=n("KE74"),g=n("Yyq6"),m=n("Yhhh"),_=n("/T2q"),y=n("1Z6y"),b=n("qweZ"),v=n("+ByO"),w=n("YihH"),x=n("wzWt"),O=n("JTqu"),P=n("CW6F"),E=n("PSoK");n.d(e,"a",function(){return S});var C=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),S=function(t){function e(e,n){return t.call(this,e,n)||this}return C(e,t),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){var t=new s.a;if(t.setStage(new a.a),this.view.element.nativeElement.appendChild(t.dom),""!=b.a.inst.no){var e=new Object;e.no=b.a.inst.no,h.a.inst.get(y.a.HUXING_DETAIL,e,this.onHuxingLoadedSuccess,this.onHuxingLoadedError,this,!0)}else u.a.inst.open();this.scene=u.a.inst,this.scene.addEvent(_.a.MSCENE_ITEM_SELECTED,this.sceneItemSelectedHandler,this),this.scene.addEvent(_.a.MSCENE_ITEM_UNSELECTED,this.sceneItemUnSelectedHandler,this),this.scene.addEvent(_.a.MSCENE_RULER_CHANGED,this.sceneRulerChangedHandler,this),this.scene.addEvent(_.a.MSCENE_NOTE_CHANGED,this.sceneNoteChangedHandler,this),this.operator=r.a.inst,this.operator.addEvent(l.a.OPERATOR_ACTION,this.operatorActionHandler,this)},e.prototype.show=function(t){this.visible=1==t?"true":"false",r.a.inst.close(),w.a.inst.close(),v.a.inst.close()},e.prototype.onHuxingLoadedSuccess=function(t){var e=t.record;u.a.inst.open(e.no,JSON.parse(e.data))},e.prototype.onHuxingLoadedError=function(t){},e.prototype.sceneItemSelectedHandler=function(t){var e=t.data,n=e.selectedItem,o=e.selectedPoint;this.handleClick(n,o),this.scene.showTargetRuler(n)},e.prototype.sceneItemUnSelectedHandler=function(t){r.a.inst.close(),w.a.inst.close(),v.a.inst.close(),this.scene.updateRuler()},e.prototype.handleClick=function(t,e){var n=r.a.inst,o=v.a.inst,i=[];t instanceof p.a?(i.push(new c.a(d.a.SPLIT)),i.push(new c.a(d.a.HOLE)),i.push(new c.a(d.a.DELETE)),n.open(e,t,i),o.open(t)):t instanceof f.a?(i.push(new c.a(d.a.NAME)),i.push(new c.a(d.a.DELETE)),n.open(e,t,i)):t instanceof g.a?(i.push(new c.a(d.a.ROTATE)),i.push(new c.a(d.a.DELETE)),n.open(e,t,i),o.open(t)):t instanceof m.a?(i.push(new c.a(d.a.ROTATE)),i.push(new c.a(d.a.MIRROR)),i.push(new c.a(d.a.DELETE)),n.open(e,t,i),o.open(t)):t instanceof P.a?(i.push(new c.a(d.a.ROTATE)),i.push(new c.a(d.a.DELETE)),n.open(e,t,i),o.open(t)):t instanceof E.a&&1==t.eraseWallAble()&&(i.push(new c.a(d.a.DELETE)),n.open(e,t,i))},e.prototype.operatorActionHandler=function(t){var e=t.data,n=e.actionTarget,o=e.actionType;if(n instanceof p.a)switch(o){case d.a.SPLIT:n.actionSplit();break;case d.a.HOLE:n.actionHole();break;case d.a.DELETE:n.actionDelete()}else if(n instanceof f.a)switch(o){case d.a.NAME:w.a.inst.open(n);break;case d.a.DELETE:n.actionDelete()}else if(n instanceof g.a)switch(o){case d.a.ROTATE:n.actionRotate();break;case d.a.DELETE:n.actionDelete()}else if(n instanceof m.a)switch(o){case d.a.ROTATE:n.actionRotate();break;case d.a.MIRROR:n.actionMirror();break;case d.a.DELETE:n.actionDelete()}else if(n instanceof P.a)switch(o){case d.a.ROTATE:n.actionRotate();break;case d.a.DELETE:n.actionDelete()}else if(n instanceof E.a)switch(o){case d.a.DELETE:n.doMergeWall()}v.a.inst.close()},e.prototype.sceneRulerChangedHandler=function(t){var e=t.data;w.a.inst.open(e,"距离 /mm",Math.round(e.inputData.value)),v.a.inst.close()},e.prototype.sceneNoteChangedHandler=function(t){var e=t.data;O.a.inst.open(e)},e.prototype.globalClick=function(t){void 0===t&&(t=null),x.a.inst.close()},e.ctorParameters=function(){return[{type:o.Q},{type:o._18}]},e}(i.a)},Eezr:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){}return t}();o.GRID=50,o.BASEMAP=100,o.ROOM=200,o.WALL=300,o.CORNER=400,o.STRUCT=500,o.OPENING=600,o.OPENING_CTRL=700,o.MODEL=800,o.TAG=900,o.NOTE=1e3,o.RULER=1100,o.BASEMAP_MEASURE=1200,o.DRAW_BOARD=1300},ExGp:function(t,e,n){"use strict";var o=n("8Tef");n.d(e,"a",function(){return r});var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o._enabled=!0,o._selected=!1,o.buttonMode=!0,o}return i(e,t),e.prototype.upStyle=function(){},e.prototype.overStyle=function(){},e.prototype.downStyle=function(){},e.prototype.mouseOver=function(t){void 0===t&&(t=null)},e.prototype.mouseOut=function(t){void 0===t&&(t=null)},e.prototype.mouseDown=function(t){void 0===t&&(t=null)},e.prototype.mouseUp=function(t){void 0===t&&(t=null)},e.prototype.mouseClick=function(t){void 0===t&&(t=null)},e.prototype.touchStart=function(t){void 0===t&&(t=null),0==this.selected&&1==this.enabled&&this.downStyle()},e.prototype.touchEnd=function(t){void 0===t&&(t=null),0==this.selected&&1==this.enabled&&this.upStyle()},Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},set:function(t){1==t?(this._enabled=!0,this.filter=""):(this.filter="grayscale(1)",this._enabled=!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selected",{get:function(){return this._selected},set:function(t){this._selected=t,1==t?this.downStyle():this.upStyle()},enumerable:!0,configurable:!0}),e}(o.a)},FtES:function(t,e,n){"use strict";var o=n("iHFl");n.d(e,"a",function(){return r});var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=function(t){function e(e,n){return void 0===n&&(n=null),t.call(this,e,n)||this}return i(e,t),e}(o.a);r.SETTINGS_CONFIRM="SETTINGS_CONFIRM"},GURQ:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(t,e,n,o){void 0===n&&(n=!0),void 0===o&&(o=4294967295),this.width=t,this.height=e,this.pixels=new Uint8ClampedArray(t*e)}return t.prototype.draw=function(t){},t.prototype.setPixel32=function(t,e,n){},Object.defineProperty(t.prototype,"imageData",{get:function(){var t=new ImageData(this.width,this.height);return t.data=this.pixels,t},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this.width=0,this.height=0,this.pixels=null},t}()},H8MY:function(t,e,n){"use strict";var o=n("oWBL"),i=n("sOyH"),r=n("PbJf"),s=n("fPy1");n.d(e,"a",function(){return l});var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),l=function(t){function e(e){var n=t.call(this,!1,!1)||this;return n.scene=e,n.unit=r.a.MM,n}return a(e,t),Object.defineProperty(e.prototype,"tagName",{get:function(){return"RulerGroup"},enumerable:!0,configurable:!0}),e.prototype.addRuler=function(t,e,n,o,r){void 0===o&&(o=!1),void 0===r&&(r=null);var a=this.fetchIdleRuler();a?a.visible=!0:(a=new i.a,this.addChild(a)),a.name=t;var l=a.rulerInput;l.inputable=o,l.inputData=r,l.scaleX=l.scaleY=1/this.scene.scaleX,l.addEvent(s.a.CLICK,this.onRulerClick,this),a.setData(e,n,this.unit),a.depth=o?1:0},e.prototype.removeRuler=function(t){for(var e,n=[],o=this.numChildren,i=0;i<o;i++)e=this.getChildAt(i),e.name==t&&n.push(e);for(var r=0,a=n;r<a.length;r++)e=a[r],e.rulerInput.removeEvent(s.a.CLICK,this.onRulerClick,this),e.clear(),this.removeChild(e)},e.prototype.fetchIdleRuler=function(){for(var t=null,e=0;e<this.numChildren;e++)if(t=this.getChildAt(e),0==t.visible)return t;return null},e.prototype.onRulerClick=function(t){this.dispatchEvent(new s.a(s.a.CLICK,t.data),this)},Object.defineProperty(e.prototype,"unitString",{get:function(){return this.unit==r.a.MM?"mm":this.unit==r.a.CM?"cm":"m"},enumerable:!0,configurable:!0}),e.prototype.clear=function(){for(var t=0;t<this.numChildren;t++){var e=this.getChildAt(t);e.clear(),e.visible=!1}},e}(o.a)},HNIp:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=[".btnContainer[_ngcontent-%COMP%]{position:absolute;left:8px;top:10px;width:100%;height:36px}.VToolButton[_ngcontent-%COMP%]{float:left;width:40px;height:35px;text-align:center;margin-right:10px}.huxingToolbarMore[_ngcontent-%COMP%]{float:left}.divide[_ngcontent-%COMP%]{width:10px;height:35px}.divide[_ngcontent-%COMP%], .line[_ngcontent-%COMP%]{float:left;margin-right:8px}.line[_ngcontent-%COMP%]{margin-top:6px}"]},Hhj7:function(t,e,n){"use strict";var o=n("gILL"),i=n("ANVg");n.d(e,"a",function(){return r});var r=function(){function t(t,e){this.pointAdsorbLength=t,this.edgeAdsorbLength=e,this.points=new Array,this.edges=new Array}return t.prototype.point2EdgeAdsorb=function(t){for(var e,n,i=this.pointAdsorbLength,r=null,s=0,a=this.edges;s<a.length;s++){var l=a[s],u=this.points[l.startIndex],h=this.points[l.stopIndex];n=o.a.calcFoot(u,h,t),o.a.isPointOnSegment(u,h,n)&&(e=t.subtract(n).length,o.a.less(e,this.edgeAdsorbLength)&&o.a.less(e,i)&&(l,i=e,r=n))}return r?r.clone():null},t.prototype.point2PointAdsorb=function(t){for(var e,n,i=this.pointAdsorbLength,r=null,s=0,a=this.points;s<a.length;s++)e=a[s],n=t.subtract(e).length,o.a.less(n,i)&&(i=n,r=e);return r?r.clone():null},t.prototype.edgeAdsorb=function(t,e,n,r){for(var s,a=null,l=null,u=0,h=this.points;u<h.length;u++){var c=h[u];if(a||(s=c.subtract(t),o.a.less(s.length,this.edgeAdsorbLength)&&o.a.isNumberEqual(s.crossProd(n),0)&&(a=c)),l||(s=c.subtract(e),o.a.less(s.length,this.edgeAdsorbLength)&&o.a.isNumberEqual(s.crossProd(r),0)&&(l=c)),a&&l)break}var p,d=new i.a(t.clone(),e.clone()),f=t.subtract(e);if(!a&&!l)return d;if(a){if(!(p=o.a.calculateIntersectPoint2(a,f,e,r)))return d;l=p}else{if(!(p=o.a.calculateIntersectPoint2(l,f,t,n)))return d;a=p}return d.start.copyFrom(a),d.stop.copyFrom(l),d},t.prototype.addPath=function(t,e){if(void 0===e&&(e=!1),0!=t.length){if(1==t.length)return void this.addPoint(t[0]);for(var n=0;n<t.length-1;n++)this.addEdge(t[n],t[o.a.nextIndex(n,t.length)]);e&&this.addEdge(t[t.length-1],t[0])}},t.prototype.addEdge=function(t,e){var n=this.addPoint(t),o=this.addPoint(e);this.edges.push(new s(n,o))},t.prototype.addPoint=function(t){for(var e=0;e<this.points.length;e++)if(o.a.isPointEqual(t,this.points[e]))return e;return this.points.push(t),this.points.length-1},t.prototype.dispose=function(){this.points.length=0,this.edges.length=0},t}();r.DEFAULT_ADSORB_LENGTH=12;var s=function(){function t(t,e){this.startIndex=t,this.stopIndex=e}return t}()},"I9l+":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=[".label[_ngcontent-%COMP%]{width:100%;height:100%;text-align:center;margin:0 auto}"]},IKKv:function(t,e,n){"use strict";var o=n("ZvbM"),i=n("Pu9O"),r=n("Eezr"),s=n("gILL"),a=n("vP7T"),l=n("/ZnK"),u=n("8vz0"),h=n("UPT1"),c=n("+N0H"),p=n("vgYD"),d=n("oWBL"),f=n("3NP2"),g=n("/T2q");n.d(e,"a",function(){return _});var m=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),_=function(t){function e(){var e=t.call(this,!0,!0)||this;e.minAdsorbLength=12,e.maxAdsorbLength=48,e._drawMode="",e.path=new Array,e.mousePoint=null,e.lastMousePoints=[],e.lastScale=1,e._needAdsorb=!0,e._needOrthogonal=!1,e.depth=r.a.DRAW_BOARD,e.drawMode=f.a.PATH,e.mousePoint=new i.a,e.width=.5*c.a.MAX_SIZE,e.height=.5*c.a.MAX_SIZE;var n=new d.a(!0,!0);return n.width=e.width,n.height=e.height,n.graphics.beginFill(0,.1),n.graphics.drawRect(-e.width,-e.height,2*e.width,2*e.height),n.graphics.endFill(),e.addChild(n),e}return m(e,t),Object.defineProperty(e,"inst",{get:function(){return e._instance||(e._instance=new e),e._instance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tagName",{get:function(){return"Draw"},enumerable:!0,configurable:!0}),e.prototype.onAdd=function(){t.prototype.onAdd.call(this),this.clear()},e.prototype.onRemove=function(){t.prototype.onRemove.call(this),this.clear()},e.prototype.touchMove=function(t){if(1==t.touches.length){var e=this.path.length;if(e>0){var n=t.touches[0];this.mousePoint=this.scene.globalToLocal(new i.a(n.clientX,n.clientY));var o=this.getAdsorbResult(this.mousePoint).point.clone();1==e?this.path.push(o):this.path[e-1]=o,this.calcTransform(),this.drawMode==f.a.PATH&&h.a.inst.updateDrawRuler(this.path,this.adsorbLength)}}else if(this.lastMousePoints.length==t.touches.length){var r,s=t.touches[0],a=this.lastMousePoints[0],l=new i.a(s.clientX,s.clientY),u=t.touches[1],c=this.lastMousePoints[1],p=new i.a(u.clientX,u.clientY),d=a.subtract(c).length,g=l.subtract(p).length,m=this.lastScale*Math.sqrt(g/d);r=a.add(c),r=r.multiply(.5),r=this.scene.globalToLocal(r),this.scene.scaleScene(m,r)}},e.prototype.touchStart=function(t){if(t.touches.length>1){this.clear(),h.a.inst.update();for(var e=0;e<t.touches.length;e++){var n=t.touches[e];this.lastMousePoints.push(new i.a(n.clientX,n.clientY))}this.lastScale=this.scene.scale}else{var o=t.touches[0];this.mousePoint=this.scene.globalToLocal(new i.a(o.clientX,o.clientY));var r=this.getAdsorbResult(this.mousePoint).point.clone();this._adsorb=null,this.path.push(r),this.calcTransform()}},e.prototype.touchEnd=function(t){if(this.lastMousePoints.length>0)this.close(),this.scene.dispatchEvent(new g.a(g.a.MSCENE_DRAW_CLOSED),this.scene);else{if(this.path.length>=2){var e=this.path[0];if(this.path[1].subtract(e).length<this.adsorbLength)return void this.clear();if(this.drawMode==f.a.PATH)this.scene.addPath(this.path,!1);else if(this.drawMode==f.a.RECT){var n=this.path[0],o=this.path[this.path.length-1];this.path.length=0,this.path.push(n),this.path.push(new i.a(o.x,n.y)),this.path.push(o),this.path.push(new i.a(n.x,o.y)),this.scene.addPath(this.path,!0)}}this.clear()}},e.prototype.clear=function(){this.graphics.clear(),this.mousePoint.setTo(0,0),this._adsorb=null,this.path.length=0,this.lastMousePoints.length=0,this.lastScale=1},Object.defineProperty(e.prototype,"drawMode",{get:function(){return this._drawMode},set:function(t){this._drawMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"adsorb",{get:function(){if(!this._adsorb){this._adsorb=new u.a(this.adsorbLength);var t;for(var e in this.scene.walls)t=this.scene.walls[e],this._adsorb.addEdge(t.start,t.stop);if(this.path.length>0)for(var n=0,o=this.path;n<o.length;n++){var i=o[n];this._adsorb.addPoint(i)}}return this._adsorb},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"adsorbLength",{get:function(){var t=c.a.SCALE_MIN_VALUE,e=Math.min(this.scene.scale,1),n=(e-t)/(1-t);return n=Math.max(n,0),this.maxAdsorbLength-n*(this.maxAdsorbLength-this.minAdsorbLength)},enumerable:!0,configurable:!0}),e.prototype.getAdsorbResult=function(t){return this.adsorb.pointAdsorb(t)},e.prototype.getFinalPoint=function(t){var e;if(e=this._needAdsorb?this.getAdsorbResult(t).point:this.mousePoint,1==this._needOrthogonal&&this.drawMode==f.a.PATH&&this.path.length>0){var n=this.path[this.path.length-1];Math.abs(e.x-n.x)>=Math.abs(e.y-n.y)?e.y=n.y:e.x=n.x}return e},e.prototype.drawPathTargetGraphics=function(){for(var t=this.scene.setting.getWallThickness(),e=this.path.length,n=0;n<e-1;n++){var o=this.path[n],i=this.path[n+1],r=i.subtract(o);if(r.length>=this.adsorbLength){var a=s.a.rotateVector(r,Math.PI/2,!0);a.normalize(Math.round(.5*t));var u=i.add(a),h=o.add(a);o=o.subtract(a),i=i.subtract(a);var c=new Array;c.push(o),c.push(i),c.push(u),c.push(h),this.graphics.lineStyle(1,p.a.GRAY,1),this.graphics.beginFill(p.a.MASTER,.5),l.a.drawPath(this.graphics,c,!0)}}this.graphics.endFill()},e.prototype.drawRectTargetGraphics=function(){if(!(this.path.length<2)){var t=this.path[0],e=this.path[1],n=new a.a,o=e.subtract(t);o.x>=0?n.x=t.x:n.x=e.x,o.y>=0?n.y=t.y:n.y=e.y,n.width=Math.abs(o.x),n.height=Math.abs(o.y),this.graphics.lineStyle(2,6710886,1),this.graphics.beginFill(p.a.MASTER,.5),this.graphics.moveTo(n.left,n.top),this.graphics.lineTo(n.right,n.top),this.graphics.lineTo(n.right,n.bottom),this.graphics.lineTo(n.left,n.bottom),this.graphics.lineTo(n.left,n.top),this.graphics.endFill()}},e.prototype.drawTargetGraphics=function(){this.path.length<2||(this.drawMode==f.a.PATH?this.drawPathTargetGraphics():this.drawMode==f.a.RECT&&this.drawRectTargetGraphics())},e.prototype.calcTransform=function(){this.stage&&(this.graphics.clear(),l.a.drawAuxiliary(this.graphics,this.getFinalPoint(this.mousePoint),this.mousePoint,this.scene.viewRect,p.a.MASTER,Math.round(45/this.scene.scale)),this.drawTargetGraphics())},Object.defineProperty(e.prototype,"opened",{get:function(){return this.scene.contains(this)},enumerable:!0,configurable:!0}),e.prototype.open=function(t){this.close(),this.drawMode=t,this.scene.addChild(this)},e.prototype.close=function(){this.clear(),this.scene.contains(this)&&this.scene.removeChild(this),h.a.inst.update()},Object.defineProperty(e.prototype,"needAdsorb",{get:function(){return this._needAdsorb},set:function(t){this._needAdsorb=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"needOrthogonal",{get:function(){return this._needOrthogonal},set:function(t){this._needOrthogonal=t},enumerable:!0,configurable:!0}),e}(o.a)},IVMV:function(t,e,n){"use strict";var o=n("Pu9O"),i=n("DFUe");n.n(i);n.d(e,"a",function(){return r});var r=function(){function t(e,n){void 0===e&&(e=t.SCALE),void 0===n&&(n=0),this.scale=e,this.clipper=new i.Clipper}return t.prototype.addPath=function(t,e,n){void 0===n&&(n=!0);for(var o=[],r=0,s=t;r<s.length;r++){var a=s[r];o.push(new i.IntPoint(Math.round(a.x*this.scale),Math.round(a.y*this.scale)))}this.clipper.AddPolygon(o,e,n)},t.prototype.addPaths=function(t,e,n){void 0===n&&(n=!0);for(var o=[],r=0,s=t;r<s.length;r++){for(var a=s[r],l=[],u=0,h=a;u<h.length;u++){var c=h[u];l.push(new i.IntPoint(Math.round(c.x*this.scale),Math.round(c.y*this.scale)))}o.push(l)}this.clipper.AddPolygons(o,e)},t.prototype.execute=function(e,n,i){void 0===n&&(n=t.PFT_EVEN_ODD),void 0===i&&(i=t.PFT_EVEN_ODD);var r=[];this.clipper.Execute(e,r,n,i);for(var s=[],a=0,l=r;a<l.length;a++){for(var u=l[a],h=[],c=0,p=u;c<p.length;c++){var d=p[c];h.push(new o.a(d.X/this.scale,d.Y/this.scale))}s.push(h)}return s},t.prototype.orientation=function(t){for(var e=[],n=0,o=t;n<o.length;n++){var r=o[n];e.push(new i.IntPoint(r.x,r.y))}var s=new i.Polygon(e);return this.clipper.Area(s)>=0},t}();r.SCALE=1e5,r.PFT_EVEN_ODD=i.PolyFillType.pftEvenOdd,r.PFT_NON_ZERO=i.PolyFillType.pftNonZero,r.PFT_POSITIVE=i.PolyFillType.pftPositive,r.PFT_NEGATIVE=i.PolyFillType.pftNegative,r.PT_SUBJECT=i.PolyType.ptSubject,r.PT_CLIP=i.PolyType.ptClip,r.CT_INTERSECTION=i.ClipType.ctIntersection,r.CT_UNION=i.ClipType.ctUnion,r.CT_DIFFERENCE=i.ClipType.ctDifference,r.CT_XOR=i.ClipType.ctXor},"InW/":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){this.queue=null,this.currentIndex=0,this.queue=[],this.currentIndex=-1,this.queue.length=0}return t.getInstance=function(){return t._instance||(t._instance=new t),t._instance},t.prototype.clear=function(){this.currentIndex=-1,this.queue.length=0},Object.defineProperty(t.prototype,"undoable",{get:function(){return 0!=this.queue.length&&this.currentIndex<this.queue.length-1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"redoable",{get:function(){return 0!=this.queue.length&&this.currentIndex>0},enumerable:!0,configurable:!0}),t.prototype.popUndoObject=function(){return this.undoable?(this.currentIndex++,this.queue[this.currentIndex]):null},t.prototype.popRedoObject=function(){return this.redoable?(this.currentIndex--,this.queue[this.currentIndex]):null},t.prototype.undo=function(){this.undoable&&this.currentIndex++},t.prototype.redo=function(){this.redoable&&this.currentIndex--},t.prototype.backup=function(e){this.currentIndex>0&&this.queue.splice(0,this.currentIndex),this.queue.unshift(e),this.currentIndex=0,this.queue.length>t.QUEUE_SIZE&&(this.queue.length=t.QUEUE_SIZE)},t}();o.QUEUE_SIZE=20,o._instance=null},Ivjm:function(t,e,n){"use strict";function o(t){return s._12(0,[s._13(402653184,1,{image:0}),(t()(),s._15(0,[[1,0],["image",1]],null,0,"div",[],null,null,null,null,null)),(t()(),s._14(null,["\n"])),(t()(),s._15(0,null,null,1,"p",[],null,null,null,null,null)),(t()(),s._14(null,["",""]))],null,function(t,e){t(e,4,0,e.component.structVO.text)})}function i(t){return s._12(0,[(t()(),s._15(16777216,null,null,1,"huxing-struct-renderer",[],null,[[null,"touchmove"],[null,"touchstart"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==s._16(t,1)._touchMove(n)&&o}if("touchstart"===e){o=!1!==s._16(t,1).touchStart(n)&&o}return o},o,u)),s._17(4308992,null,0,a.a,[s.Q,s._18],null,null)],function(t,e){t(e,1,0)},null)}var r=n("/hM2"),s=n("/oeL"),a=n("oV/x");n.d(e,"a",function(){return h});var l=[r.a],u=s._11({encapsulation:0,styles:l,data:{}}),h=s._19("huxing-struct-renderer",a.a,i,{position:"position",width:"width",height:"height",left:"left",top:"top",right:"right",bottom:"bottom",visible:"visible",alpha:"alpha",depth:"depth",rotation:"rotation",scalex:"scalex",scaley:"scaley",tooltip:"tooltip",backgroundcolor:"backgroundcolor",filter:"filter",buttonMode:"buttonMode",structVO:"structVO"},{},[])},JCpi:function(t,e,n){"use strict";var o=n("/oeL"),i=n("8Tef");n.d(e,"a",function(){return s});var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.parent=null,o.buttons=[],o}return r(e,t),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.updateComponentProperty(),this.buttons=this.buttonQueryList.toArray()},e.prototype.setData=function(t){this.targetRoom=t,this.highlightRoomButton(this.targetRoom.tag)},e.prototype.roomTypeClick=function(t){this.targetRoom&&(this.targetRoom.doChangeTag(t),this.highlightRoomButton(this.targetRoom.tag))},e.prototype.highlightRoomButton=function(t){for(var e=0,n=this.buttons;e<n.length;e++){var o=n[e];o.label==t?o.downStyle():o.upStyle()}},e.prototype.touchStart=function(t){var e=this.dom.scrollTop,n=this.dom.scrollHeight,o=e+this.dom.offsetHeight;0===e?this.dom.scrollTop=1:o===n&&(this.dom.scrollTop=e-1)},e.prototype.touchMove=function(t){this.parent.scrollable=!1,this.dom.offsetHeight<this.dom.scrollHeight&&(this.parent.scrollable=!0)},e.ctorParameters=function(){return[{type:o.Q},{type:o._18}]},e}(i.a)},JTqu:function(t,e,n){"use strict";var o=n("/oeL"),i=n("8Tef"),r=n("+N0H"),s=n("pPSP");n.d(e,"a",function(){return l});var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),l=function(t){function e(n,o){var i=t.call(this,n,o)||this;return i.target=null,e._instance=i,i}return a(e,t),Object.defineProperty(e,"inst",{get:function(){return e._instance},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.updateComponentProperty(),this.textInput=this.textInputRef.nativeElement},e.prototype.open=function(t){this.visible="true",this.target=t,this.textInput.value=t.text,this.textInput.setSelectionRange(t.text.length,t.text.length),this.textInput.focus(),this.textInput.selectionStart=0,this.textInput.selectionEnd=t.text.length},e.prototype.finish=function(){var t=this.textInput.value;if(""==t)return s.a.inst.warning("内容不能为空"),this.textInput.setSelectionRange(0,0),void this.textInput.focus();this.visible="false",this.target&&(this.target.text=t,this.target.update()),r.a.inst.dom.focus()},e.prototype.delete=function(){this.visible="false",this.target&&r.a.inst.removeNote(this.target),r.a.inst.dom.focus()},e.ctorParameters=function(){return[{type:o.Q},{type:o._18}]},e}(i.a)},KC10:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(t,e,n,o,i){void 0===o&&(o=null),void 0===i&&(i=!1),this.type=t,this.imageUrl=e,this.text=n,this.subType=o,this.dragable=i}return t}()},KE74:function(t,e,n){"use strict";var o=n("ZvbM"),i=n("WFe8"),r=n("yOTB"),s=n("Eezr"),a=n("w9Am"),l=n("7/ty"),u=n("gMRQ"),h=n("Y+7l"),c=n("byMr"),p=n("Pu9O"),d=n("vP7T"),f=n("gILL"),g=n("bv23"),m=n("/ZnK"),_=n("vgYD"),y=n("tXdn"),b=n("aJ2T"),v=n("/T2q"),w=n("qweZ"),x=n("oWBL");n.d(e,"a",function(){return P});var O=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),P=function(t){function e(){var e=t.call(this,!0,!0)||this;return e._itemNo="",e._tag="",e._overrideBoundPolygon=null,e.drawMask=!1,e.touchEndPoint=new p.a,e._walls=[],e._corners=[],e._centerPoint=new p.a(0,0),e._boundRectangle=new d.a,e._drawMatrix=new g.a,e.floor=null,e.depth=s.a.ROOM,e.itemNo=w.a.inst.defaultRoomItemNo,e.tag="主卧",e.drawMask=!1,e}return O(e,t),Object.defineProperty(e.prototype,"tagName",{get:function(){return"Room"},enumerable:!0,configurable:!0}),e.prototype.onAdd=function(){t.prototype.onAdd.call(this),this.calculateTransform()},e.prototype.onRemove=function(){t.prototype.onRemove.call(this)},e.prototype.touchStart=function(e){e.touches.length>1||(t.prototype.touchStart.call(this,e),this.drawMask=!1,this.calculateTransform())},e.prototype.touchEnd=function(e){var n=e.changedTouches[0];this.touchEndPoint.setTo(n.clientX,n.clientY),1==this.hasMouseDown&&(t.prototype.touchEnd.call(this,e),b.a.inst.focus(this))},e.prototype.focusIn=function(){t.prototype.focusIn.call(this),this.drawMask=!0,this.calculateTransform();var e={selectedItem:this,selectedPoint:this.touchEndPoint.clone()};this.scene.dispatchEvent(new v.a(v.a.MSCENE_ITEM_SELECTED,e),this.scene)},e.prototype.focusOut=function(){t.prototype.focusOut.call(this),this.drawMask=!1,this.calculateTransform(),this.scene.dispatchEvent(new v.a(v.a.MSCENE_ITEM_UNSELECTED),this.scene)},e.prototype.clear=function(){t.prototype.clear.call(this),this._walls.length=0,this._corners.length=0},e.prototype.clearModels=function(){for(var t in this.scene.models){var e=this.scene.getModelByName(t);e&&(this.boundPolygon.containsInXY(e.realX,e.realY)&&this.scene.removeModel(e))}},Object.defineProperty(e.prototype,"item",{get:function(){return u.a.getInstance().getItemByNo(this.itemNo)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemNo",{get:function(){return this._itemNo},set:function(t){this._itemNo&&this.item.removeEvent(h.a.HUXING_ITEM_ASSET_READY,this.assetsReadyHandler,this),this._itemNo=t,0==this.item.assetsReady?this.item.addEvent(h.a.HUXING_ITEM_ASSET_READY,this.assetsReadyHandler,this):null!=this.stage&&this.assetsReadyHandler()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tag",{get:function(){return this._tag},set:function(t){this._tag=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"walls",{get:function(){this._walls.length=0;var t;for(var e in this.scene.walls)t=this.scene.walls[e],t.forwardRoomName!=this.name&&t.backwardRoomName!=this.name&&t.aloneRoomName!=this.name||this._walls.push(t);return this._walls},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"roomWalls",{get:function(){var t,e=new Array;for(var n in this.scene.walls)t=this.scene.walls[n],0!=t.adjacentRoomCount&&(t.forwardRoomName!=this.name&&t.backwardRoomName!=this.name||e.push(t));return e},enumerable:!0,configurable:!0}),e.prototype.isWallInThisRoom=function(t){return t.forwardRoomName==this.name||t.backwardRoomName==this.name||t.aloneRoomName==this.name},e.prototype.updateBoundPolygonAfterCornerChange=function(){var t=this.roomWalls;if(!(t.length<=1)){var e=t[0],n=[e],o=[e.start],i=e.stopCornerName;t.splice(0,1);for(var r=t.length;t.length>0;){for(var s=0;s<t.length;s++){if(t[s].startCornerName==i){n.push(t[s]),o.push(t[s].startCorner.point),i=t[s].stopCornerName,t.splice(s,1);break}if(t[s].stopCornerName==i){n.push(t[s]),o.push(t[s].stopCorner.point),i=t[s].startCornerName,t.splice(s,1);break}}if(--r<=0)break}this._boundPolygon.clear();for(var a=0,l=o;a<l.length;a++){var u=l[a];this._boundPolygon.addPointXY(u.x,u.y)}this._boundPolygon.area>0&&this._boundPolygon.inversePoints(),this.computeOverrideBoundPolygon()}},e.prototype.calcArea=function(){return Math.abs(this.boundPolygon.area)/1e4},e.prototype.calcPureArea=function(){this.clearWallRelation(),this.createWallRelation();for(var t,e=(new c.a,this.walls),n=new Array,o=new Array,i=0,r=e;i<r.length;i++)t=r[i],t.aloneRoomName&&t.aloneRoomName==this.name?n.push(t):o.push(t);for(var s=0,a=0,l=o;a<l.length;a++){t=l[a];var u=new c.a;u.addVertex(t.localStart),u.addVertex(t.localStop),t.forwardRoomName==this.name?(u.addVertex(t.topRight),u.addVertex(t.topLeft)):(u.addVertex(t.bottomRight),u.addVertex(t.bottomLeft),u.inversePoints()),s+=Math.abs(u.area)}for(var h=0,p=0,d=n;p<d.length;p++)t=d[p],h+=t.calcArea();return(Math.abs(this.boundPolygon.area)-h-s)/1e4},Object.defineProperty(e.prototype,"corners",{get:function(){this._corners.length=0;var t;for(var e in this.scene.corners)t=this.scene.corners[e],this.boundPolygon.containsOn(t.point)&&this._corners.push(t);return this._corners},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"centerPoint",{get:function(){return this.boundPolygon.getCenterPoint(this._centerPoint)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boundRectangle",{get:function(){if(0==this.boundPolygon.vertexCount)return this._boundRectangle.x=-100,this._boundRectangle.y=-100,this._boundRectangle.width=200,this._boundRectangle.height=200,this._boundRectangle;for(var t,e=Number.MAX_VALUE,n=Number.MAX_VALUE,o=-Number.MAX_VALUE,r=-Number.MAX_VALUE,s=0;s<this.boundPolygon.pointLength;s++)t=this.boundPolygon.getPointAt(s),e=Math.min(t.x,e),n=Math.min(t.y,n),o=Math.max(t.x,o),r=Math.max(t.y,r);return e-=i.a.DEFAULT_LENGTH,n-=i.a.DEFAULT_LENGTH,o+=i.a.DEFAULT_LENGTH,r+=i.a.DEFAULT_LENGTH,this._boundRectangle.x=e,this._boundRectangle.y=n,this._boundRectangle.width=o-e,this._boundRectangle.height=r-n,this._boundRectangle},enumerable:!0,configurable:!0}),e.prototype.assetsReadyHandler=function(t){void 0===t&&(t=null),this.item.removeEvent(h.a.HUXING_ITEM_ASSET_READY,this.assetsReadyHandler,this),this.calculateTransform()},Object.defineProperty(e.prototype,"boundPolygon",{get:function(){return this._boundPolygon},enumerable:!0,configurable:!0}),e.prototype.createWallRelation=function(){var t,e,n,o,i=this.boundPolygon.pointLength;for(e=0;e<i;e++)n=this.boundPolygon.points[e],o=this.boundPolygon.points[(e+1)%i],(t=this.scene.getWallByEnds(n,o))&&(f.a.isPointEqual(t.start,n)&&f.a.isPointEqual(t.stop,o)?t.forwardRoomName=this.name:f.a.isPointEqual(t.start,o)&&f.a.isPointEqual(t.stop,n)&&(t.backwardRoomName=this.name));for(var r in this.scene.walls)t=this.scene.walls[r],t.forwardRoom||t.backwardRoom||(this.boundPolygon.containsIn(t.start)||this.boundPolygon.containsIn(t.stop))&&(t.aloneRoomName=this.name)},e.prototype.clearWallRelation=function(){var t;for(var e in this.scene.walls)t=this.scene.walls[e],t.forwardRoomName==this.name&&(t.forwardRoomName=""),t.backwardRoomName==this.name&&(t.backwardRoomName=""),t.aloneRoomName==this.name&&(t.aloneRoomName="");this._walls.length=0},e.prototype.calculatePolygon=function(){if(0!=this._updateControl.getValue(r.a.TAG_POLYGON)){this.polygon.clear();for(var t=this.sceneToLocalMatrix,e=0;e<this.boundPolygon.pointLength;e++)this.polygon.addPoint(t.transformPoint(this.boundPolygon.getPointAt(e)));this._updateControl.getValue(r.a.TAG_POLYGON)}},e.prototype.calculateTransform=function(){var t=this.centerPoint;this.realX=t.x,this.realY=t.y,this.x=this.realX,this.y=this.realY,this.alpha=1,this.calculatePolygon(),this.draw()},e.prototype.draw=function(){this.graphics.clear();var t=this.polygon.boundRect;if(this.graphics.width=t.width>>1,this.graphics.height=t.height>>1,this.graphics.lineStyle(1,1048575,0),this._drawMatrix.identity(),this.item&&this.item.assetsReady){var e=this.item.planBMD;this.graphics.beginRepeatBitmapFill(e,this.item.width,this.item.length),m.a.drawPath(this.graphics,this.polygon.vertices),this.graphics.endFill()}else this.graphics.beginFill(w.a.inst.huxingRoomFloorColors[this.tag]),m.a.drawPath(this.graphics,this.polygon.vertices),this.graphics.endFill();this.drawMask&&(this.graphics.beginFill(_.a.MASTER2,.3),m.a.drawPath(this.graphics,this.polygon.vertices),this.graphics.endFill())},e.prototype.addColorFloor=function(){this.floor=new x.a(!0,!0);var t=this.polygon.boundRect;this.floor.graphics.width=t.width>>1,this.floor.graphics.height=t.height>>1,this.floor.graphics.beginFill(w.a.inst.huxingRoomFloorColors[this.tag]),m.a.drawPath(this.floor.graphics,this.polygon.vertices),this.floor.graphics.endFill(),this.addChild(this.floor)},e.prototype.removeColorFloor=function(){this.floor&&this.removeChild(this.floor),this.floor=null},e.prototype.drawPolygon=function(){if(!(this.polygon.pointLength<3)){var t=this.getDrawPolygonObj();this.graphics.drawPath(t.commands,t.points),t.destroy()}},e.prototype.getDrawPolygonPoints=function(){var t,e,n,o=new Array,i=this.boundPolygon.pointLength,r=this.boundPolygon.points;for(o.push(r[0]),t=1;t<=i;t++)e=r[t-1],n=r[t%i],this.scene.getWallByEnds(e,n),o.push(r[t%i]);return o.length-=1,o},e.prototype.getDrawPolygonObj=function(){var t,e,n,o=new l.a,i=this.polygon.pointLength,r=this.localToSceneMatrix;for(o.addPointAndCommand(this.polygon.points[0],y.a.MOVE_TO),t=1;t<=i;t++)e=r.transformPoint(this.polygon.points[t-1]),n=r.transformPoint(this.polygon.points[t%i]),this.scene.getWallByEnds(e,n),o.addPointAndCommand(this.polygon.points[t%i],y.a.LINE_TO);return o},e.prototype.actionClearModel=function(){this.clearModels(),this.scene.change()},e.prototype.actionDelete=function(){for(var t,e=this.walls,n=!1,o=0,i=e;o<i.length;o++)if(t=i[o],1==t.adjacentRoomCount){n=!0;break}if(n){for(var r,s=this.corners,a=0,l=e;a<l.length;a++)t=l[a],(t=this.scene.getWallByName(t.name))&&t.adjacentRoomCount<2&&this.scene.removeWall(t,!0);for(var u=0,h=s;u<h.length;u++)r=h[u],this.scene.getCornerByName(r.name)&&r.calcWallCorner();for(var c in this.scene.walls){t=this.scene.walls[c];for(var p=0,d=s;p<d.length;p++)if(r=d[p],this.scene.getCornerByName(r.name)&&(t.startCornerName==r.name||t.stopCornerName==r.name)){t.setPolygonChangeFlag(!0),t.calculateTransform();break}}this.scene.removeRoom(this,!0),this.scene.change(!0,!0)}},e.prototype.doChangeTag=function(t){if(t){this.tag=t,a.a.inst.update();var e=w.a.inst.huxingRoomItemNos;e[this.tag]&&(this.itemNo=e[this.tag]),this.scene.change()}},Object.defineProperty(e.prototype,"overrideBoundPolygon",{get:function(){return null==this._overrideBoundPolygon&&this.computeOverrideBoundPolygon(),this._overrideBoundPolygon},enumerable:!0,configurable:!0}),e.prototype.computeOverrideBoundPolygon=function(){null==this._overrideBoundPolygon&&(this._overrideBoundPolygon=new c.a),this._overrideBoundPolygon.clear(),this._overrideBoundPolygon.points=this.getDrawPolygonPoints()},e.prototype.doesBoundPolygonContaineVector2D=function(t,e){return this.overrideBoundPolygon?this.overrideBoundPolygon.containsInXY(t,e):this.boundPolygon.containsInXY(t,e)},e.prototype.dumpData=function(){var t,e=new Object,n=[];for(t=0;t<this.boundPolygon.pointLength;t++)n.push({x:this.boundPolygon.points[t].x,y:this.boundPolygon.points[t].y});return e.name=this.name,e.points=n,e.itemNo=this.itemNo,e.tag=this.tag,e},e.loadData=function(t){var n=new e;n.name=t.name,t.hasOwnProperty("itemNo")&&(n.itemNo=t.itemNo),t.hasOwnProperty("tag")&&(n.tag=t.tag);for(var o=0,i=t.points;o<i.length;o++){var r=i[o];n.boundPolygon.addPointXY(r.x,r.y)}return n.computeOverrideBoundPolygon(),n},e}(o.a)},Kmjt:function(t,e,n){"use strict";function o(t){return s._12(0,[s._13(402653184,1,{structWidthInput:0}),s._13(402653184,2,{structLengthInput:0}),(t()(),s._15(0,null,null,21,"div",[["class","bg"]],null,null,null,null,null)),(t()(),s._14(null,["\n    "])),(t()(),s._15(0,null,null,8,"div",[["class","editArea"]],null,null,null,null,null)),(t()(),s._14(null,["\n        "])),(t()(),s._14(null,["\n        "])),(t()(),s._15(0,null,null,1,"div",[["class","label"]],null,null,null,null,null)),(t()(),s._14(null,["长度"])),(t()(),s._14(null,["\n        "])),(t()(),s._15(16777216,null,null,1,"virtual-input",[["class","virtualInput"],["height","19px"],["width","60px"]],null,[[null,"touchstart"],[null,"touchmove"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==s._16(t,11)._touchMove(n)&&o}if("touchstart"===e){o=!1!==i.showWallWidthSetting()&&o}return o},l.a,l.b)),s._17(4308992,[[1,4],["structWidthInput",4]],0,u.a,[s.Q,s._18],{width:[0,"width"],height:[1,"height"]},null),(t()(),s._14(null,["\n    "])),(t()(),s._14(null,["\n    "])),(t()(),s._15(0,null,null,8,"div",[["class","editArea"]],null,null,null,null,null)),(t()(),s._14(null,["\n        "])),(t()(),s._14(null,["\n        "])),(t()(),s._15(0,null,null,1,"div",[["class","label"]],null,null,null,null,null)),(t()(),s._14(null,["厚度"])),(t()(),s._14(null,["\n        "])),(t()(),s._15(16777216,null,null,1,"virtual-input",[["class","virtualInput"],["height","19px"],["width","60px"]],null,[[null,"touchstart"],[null,"touchmove"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==s._16(t,21)._touchMove(n)&&o}if("touchstart"===e){o=!1!==i.showWallLengthSetting()&&o}return o},l.a,l.b)),s._17(4308992,[[2,4],["structLengthInput",4]],0,u.a,[s.Q,s._18],{width:[0,"width"],height:[1,"height"]},null),(t()(),s._14(null,["\n    "])),(t()(),s._14(null,["\n"]))],function(t,e){t(e,11,0,"60px","19px");t(e,21,0,"60px","19px")},null)}function i(t){return s._12(0,[(t()(),s._15(16777216,null,null,1,"struct-setting-bar",[],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==s._16(t,1)._touchMove(n)&&o}return o},o,c)),s._17(4308992,null,0,a.a,[s.Q,s._18],null,null)],function(t,e){t(e,1,0)},null)}var r=n("U3zN"),s=n("/oeL"),a=n("3cEh"),l=n("15L3"),u=n("oFVN");n.d(e,"b",function(){return c}),e.a=o;var h=[r.a],c=s._11({encapsulation:0,styles:h,data:{}});s._19("struct-setting-bar",a.a,i,{position:"position",width:"width",height:"height",left:"left",top:"top",right:"right",bottom:"bottom",visible:"visible",alpha:"alpha",depth:"depth",rotation:"rotation",scalex:"scalex",scaley:"scaley",tooltip:"tooltip",backgroundcolor:"backgroundcolor",filter:"filter",buttonMode:"buttonMode"},{},[])},LSAk:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=[".VToolButton[_ngcontent-%COMP%]{background-color:transparent}"]},Luvd:function(t,e,n){"use strict";var o=n("/oeL"),i=n("8Tef"),r=n("wRF1");n.d(e,"a",function(){return a});var s=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.inputVisible=!1,o.checkLegalTimer=null,o}return s(e,t),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){var t=this;this.height="42px",this.updateComponentProperty(),this.textInput=this.textInputRef.nativeElement,this.textInput.onkeyup=function(){return t.keyUp()},this.showInput(!1)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this.dom&&this.renderer.setStyle(this.dom,"width",t),this.textInput&&this.renderer.setStyle(this.textInput,"width",this.widthNumber-85+"px")},enumerable:!0,configurable:!0}),e.prototype.keyUp=function(){this.checkLegal(),this.dispatchEvent(new r.a(r.a.OPTION_SETTING_INPUT_CHANGE,{on:!0,value:this.textInput.value}),this)},e.prototype.startCheckLegalTimer=function(){var t=this;this.stopCheckLegalTimer(),this.checkLegalTimer=setInterval(function(){t.checkLegal()},100)},e.prototype.stopCheckLegalTimer=function(){this.checkLegalTimer&&clearInterval(this.checkLegalTimer),this.checkLegalTimer=null},e.prototype.checkLegal=function(){var t=this.textInput.value.replace(/[^\d]/g,"");t=""==t?"0":t,this.value=t},Object.defineProperty(e.prototype,"value",{set:function(t){var n=parseInt(t);n=Math.min(e.MAX,n),n=Math.max(e.MIN,n),this.textInput.value=n.toString()},enumerable:!0,configurable:!0}),e.prototype.slideClick=function(){this.showInput(!this.inputVisible)},e.prototype.showInput=function(t){var e=this;this.inputVisible=t,this.slideBox.selected=t,1==t?(this.renderer.setStyle(this.textInput,"display","block"),setTimeout(function(){e.textInput.setSelectionRange(e.textInput.value.length,e.textInput.value.length),e.textInput.focus(),e.textInput.selectionStart=0,e.textInput.selectionEnd=e.textInput.value.length},100),this.dispatchEvent(new r.a(r.a.OPTION_SETTING_INPUT_CHANGE,{on:!0,value:this.textInput.value}),this)):(this.renderer.setStyle(this.textInput,"display","none"),this.dom.focus(),this.dispatchEvent(new r.a(r.a.OPTION_SETTING_INPUT_CHANGE,{on:!1,value:"0"}),this))},e.ctorParameters=function(){return[{type:o.Q},{type:o._18}]},e}(i.a);a.MAX=99999,a.MIN=0},"M2/t":function(t,e,n){"use strict";var o=n("/xq4");n.n(o);n.d(e,"a",function(){return i});var i=function(){function t(){}return t.encrypt=function(e){var n=o.enc.Utf8.parse(t.KEY),i=o.enc.Utf8.parse(t.IV);return o.DES.encrypt(e,n,{iv:i,mode:o.mode.CBC,padding:o.pad.Pkcs7}).toString()},t.decrypt=function(e){var n=o.enc.Utf8.parse(t.KEY),i=o.enc.Utf8.parse(t.IV);return o.DES.decrypt(e,n,{iv:i,mode:o.mode.CBC,padding:o.pad.Pkcs7}).toString(o.enc.Utf8)},t.stringToByteArray=function(t){for(var e=[],n=0,o=0;o<t.length;o++){for(var i=t.charCodeAt(o);i>255;)e[n++]=255&i,i>>=8;e[n++]=i}return e},t.byteArrayToString=function(t){if(t.length<=8192)return String.fromCharCode.apply(null,t);for(var e="",n=0;n<t.length;n+=8192){var o=t.slice(n,n+8192);e+=String.fromCharCode.apply(null,o)}return e},t}();i.KEY="f056380ed970b169",i.IV="912467427a354o9x"},MP1y:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=[".bg[_ngcontent-%COMP%]{width:48px;height:100%;background-color:rgba(0,0,0,.6);border-radius:4px;box-shadow:0 2px 4px 0 hsla(0,0%,84%,.5);color:#fff;font-size:12px}"]},MgL2:function(t,e,n){"use strict";var o=n("/oeL"),i=n("8Tef"),r=n("Tcd4"),s=n("FtES"),a=n("YihH"),l=n("+ByO");n.d(e,"a",function(){return h});var u=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),h=function(t){function e(e,n){return t.call(this,e,n)||this}return u(e,t),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){var t=window.innerHeight,e=0;if(t<514)for(e=Math.round(.537*t);e%3!=0;)e-=1;else e=276,t=514;this.width=e+"px",this.height=t+"px",this.updateComponentProperty(),this.virtualNumberBoard.updateSize(this.widthNumber,this.heightNumber),this.virtualNumberBoard.addEvent(r.a.VIRTUAL_NUMBER_BOARD_CONFIRM,this.onConfirm,this)},e.prototype.setData=function(t,e,n){this.target=t,this.virtualNumberBoard.setData(e,n)},e.prototype.onConfirm=function(t){var e=t.data,n={target:this.target,value:e},o=a.a.inst;o.dispatchEvent(new s.a(s.a.SETTINGS_CONFIRM,n),o),a.a.inst.close(),l.a.inst.moveCenter()},e.ctorParameters=function(){return[{type:o.Q},{type:o._18}]},e}(i.a)},MhWs:function(t,e,n){"use strict";var o=n("tdkC"),i=n("ThMJ"),r=n("ijgM"),s=n("tTVb");n.d(e,"a",function(){return l});var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),l=function(t){function e(){var e=t.call(this)||this;return e.onTouchEndLambda=function(t){return e.onTouchEnd(t)},e.onTouchMoveLambda=function(t){return e.onTouchMove(t)},e}return a(e,t),Object.defineProperty(e,"inst",{get:function(){return null==e._instance&&(e._instance=new e),e._instance},enumerable:!0,configurable:!0}),e.prototype.startDrag=function(t,e,n,o){this.sourceData=t,this.image=e,document.body.addEventListener(s.a.TOUCH_END,this.onTouchEndLambda),document.body.addEventListener(s.a.TOUCH_MOVE,this.onTouchMoveLambda),this.image.depth=9999,this.image.x=n-(this.image.width>>1),this.image.y=o-(this.image.height>>1),document.body.appendChild(this.image.dom)},e.prototype.stopDrag=function(){null!=this.image&&(document.body.removeChild(this.image.dom),this.image=null),document.body.removeEventListener(s.a.TOUCH_END,this.onTouchEndLambda),document.body.removeEventListener(s.a.TOUCH_MOVE,this.onTouchMoveLambda)},e.prototype.onTouchEnd=function(t){this.stopDrag();var e=t.changedTouches[0],n=new r.a;n.sourceData=this.sourceData,n.mouseX=e.clientX,n.mouseY=e.clientY,this.dispatchEvent(new i.a(i.a.DRAG_ENTER,n),this)},e.prototype.onTouchMove=function(t){if(this.image){var e=t.touches[0];this.image.x=e.clientX-(this.image.width>>1),this.image.y=e.clientY-(this.image.height>>1)}},e}(o.a)},N8J1:function(t,e,n){"use strict";var o=n("/oeL"),i=n("8Tef"),r=n("vgYD");n.d(e,"a",function(){return a});var s=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.color=r.a.toString(r.a.LINE2),o.renderer.setStyle(o.dom,"background-color",o.color),o}return s(e,t),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.updateComponentProperty()},e.ctorParameters=function(){return[{type:o.Q},{type:o._18}]},e}(i.a)},NBqy:function(t,e,n){"use strict";function o(t){return r._12(0,[],null,null)}function i(t){return r._12(0,[(t()(),r._15(16777216,null,null,1,"line",[],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==r._16(t,1)._touchMove(n)&&o}return o},o,l)),r._17(4308992,null,0,s.a,[r.Q,r._18],null,null)],function(t,e){t(e,1,0)},null)}var r=n("/oeL"),s=n("N8J1");n.d(e,"b",function(){return l}),e.a=o;var a=[],l=r._11({encapsulation:2,styles:a,data:{}});r._19("line",s.a,i,{position:"position",width:"width",height:"height",left:"left",top:"top",right:"right",bottom:"bottom",visible:"visible",alpha:"alpha",depth:"depth",rotation:"rotation",scalex:"scalex",scaley:"scaley",tooltip:"tooltip",backgroundcolor:"backgroundcolor",filter:"filter",buttonMode:"buttonMode",color:"color"},{},[])},NhKt:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=["huxing-toolbar[_ngcontent-%COMP%]{position:absolute;left:0;top:0;width:100%;height:56px;background-color:#fff;box-shadow:0 1px 7px 0 hsla(0,0%,84%,.5)}threed-navigation[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;width:35px;height:35px}huxing-resource[_ngcontent-%COMP%]{position:absolute;left:0;top:0;bottom:0;height:100%}setting-bars[_ngcontent-%COMP%]{position:absolute;top:66px}settings[_ngcontent-%COMP%]{right:0;bottom:0}optionSetting[_ngcontent-%COMP%], settings[_ngcontent-%COMP%]{position:absolute;top:0;height:100%}optionSetting[_ngcontent-%COMP%]{left:0;width:100%}operator[_ngcontent-%COMP%]{position:absolute;right:10px;width:48px}alert[_ngcontent-%COMP%], note-editor[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%}alert[_ngcontent-%COMP%]{background-color:transparent}.editor[_ngcontent-%COMP%]{position:absolute;left:0;top:0;width:100%;height:100%}"]},NiEO:function(t,e,n){"use strict";var o=n("B0l3"),i=n("byMr"),r=n("gILL");n.d(e,"a",function(){return s});var s=function(){function t(){this.points=null,this.nodeLength=0,this.nodes=null,this.edges=new o.a,this.polygonLength=0,this.polygons=null,this.tmpV=[],this.points=new Array,this.nodeLength=0,this.nodes=new Array,this.edges=new o.a,this.polygonLength=0,this.polygons=[]}return t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},t.prototype.clear=function(){this.points.length=0,this.nodeLength=0,this.edges=new o.a,this.polygonLength=0},t.edgeKey=function(t,e){return t.toString()+"-"+e.toString()},t.prototype.getPolygonAt=function(t){return t<this.polygonLength?this.polygons[t]:null},t.prototype.addPolygon=function(){return this.polygonLength<=this.polygons.length&&this.polygons.push(new i.a),this.polygonLength+=1,this.polygons[this.polygonLength-1].clear(),this.polygons[this.polygonLength-1]},t.prototype.removePolygon=function(t){t<0||t>=this.polygonLength||(this.polygons.splice(t,1),this.polygonLength-=1)},t.prototype.addPoint=function(t){var e=r.a.pointIndex(this.points,t);return e!=r.a.NONE_INDEX?e:(this.points.push(t),this.nodes.length<this.points.length?this.nodes.push(new a(this.points.length-1)):this.nodes[this.points.length-1].clear(),this.nodeLength=this.points.length,this.points.length-1)},t.prototype.connect=function(e,n){return this.edges[t.edgeKey(e,n)]},t.prototype.addEdge=function(e,n){var o=this.addPoint(e),i=this.addPoint(n);return-1!=o&&-1!=i&&o!=i&&(1!=this.edges[t.edgeKey(o,i)]&&(this.nodes[o].connectedNodes.push(this.nodes[i]),this.edges[t.edgeKey(o,i)]=!0),1!=this.edges[t.edgeKey(i,o)]&&(this.nodes[i].connectedNodes.push(this.nodes[o]),this.edges[t.edgeKey(i,o)]=!0),!0)},t.prototype.cropLeafNodes=function(t){var e,n=null;0!=t.connectedNodes.length&&1==t.connectedNodes.length&&(n=t.connectedNodes[0],e=n.connectedNodes.indexOf(t),-1!=e&&n.connectedNodes.splice(e,1),t.connectedNodes.length=0,t.exclude=!0,this.cropLeafNodes(n))},t.prototype.searchPolygon=function(e){var n,o,i,s,a,l,u,h,c;for(n=0;n<e.connectedNodes.length;n++){for(s=e.connectedNodes[n],s.parentNode=e;;){if(0==this.connect(s.parentNode.index,s.index))break;if(s.index==e.index)break;for(a=null,l=this.points[s.parentNode.index].subtract(this.points[s.index]),c=Number.MAX_VALUE,o=0;o<s.connectedNodes.length;o++)s.connectedNodes[o].index!=s.parentNode.index&&(s.exclude||0!=this.connect(s.index,s.connectedNodes[o].index)&&(u=this.points[s.connectedNodes[o].index].subtract(this.points[s.index]),(h=r.a.vectorIncludedAngle(l,u,!0))<c&&(c=h,a=s.connectedNodes[o])));if(null==a)break;if(null!=a.parentNode)break;a.parentNode=s,s=a}if(s.index==e.index){var p=this.addPolygon();for(i=s;;){if(p.addPointXY(this.points[i.index].x,this.points[i.index].y,!0),i.parentNode.index==e.index)break;if(null==i.parentNode)break;i=i.parentNode}if(p.vertexCount>=3&&p.area<0)for(i=s;;){if(this.edges[t.edgeKey(i.parentNode.index,i.index)]=!1,i.parentNode.index==e.index)break;if(null==i.parentNode)break;i=i.parentNode}else for(this.polygonLength-=1,i=s;;){if(this.edges[t.edgeKey(i.parentNode.index,i.index)]=!1,i.parentNode.index==e.index)break;if(null==i.parentNode)break;i=i.parentNode}}i=s;for(var d;;){if(null==i.parentNode)break;if(i.parentNode.index==e.index){i.parentNode=null;break}d=i,i=i.parentNode,d.parentNode=null}}},t.prototype.boundary=function(t){void 0===t&&(t=!0);var e;for(e=0;e<this.nodeLength;e++)this.cropLeafNodes(this.nodes[e]);for(e=0;e<this.nodeLength;e++)this.nodes[e].exclude||this.searchPolygon(this.nodes[e]);if(!t){this.tmpV.length=0;var n;for(e=0;e<this.polygonLength;e++)for(n=0;n<this.polygonLength;n++)e!=n&&this.polygons[e].surround(this.polygons[n])&&this.tmpV.push(n);for(;this.tmpV.length>0;)this.removePolygon(this.tmpV[this.tmpV.length-1]),this.tmpV.length-=1}},t}();s._instance=null;var a=function(){function t(t){this.index=t,this.connectedNodes=[],this.parentNode=null,this.exclude=!1}return t.prototype.clear=function(){this.connectedNodes.length=0,this.parentNode=null,this.exclude=!1},t}()},OtGR:function(t,e,n){"use strict";var o=n("tXdn"),i=n("vgYD"),r=n("n80j");n.d(e,"a",function(){return a});var s=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=function(t){function e(){var e=t.call(this)||this;return e.isPivotCenter=!0,e.gpu=!0,e}return s(e,t),Object.defineProperty(e.prototype,"tagName",{get:function(){return"canvas"},enumerable:!0,configurable:!0}),e.prototype.createDom=function(){t.prototype.createDom.call(this);var e=this.canvasDom;this.context=e.getContext("2d")},e.prototype.beginBitmapFill=function(t){var e=t.img;this.context.drawImage(e,0,0,this.width,this.height)},e.prototype.beginRepeatBitmapFill=function(t,e,n){void 0===e&&(e=100),void 0===n&&(n=100);var o=t.img,i=document.createElement("canvas");i.width=e,i.height=n,i.getContext("2d").drawImage(o,0,0,e,n);var r=this.context.createPattern(i,"repeat");this.context.fillStyle=r},e.prototype.beginFill=function(t,e){void 0===e&&(e=1);var n=i.a.toRGB(t);n.push(e);var o=n.join(",");this.context.fillStyle="rgba("+o+")"},e.prototype.clear=function(){this.context.clearRect(0,0,this.canvasDom.width,this.canvasDom.height)},e.prototype.clearRect=function(t,e,n,o){this.context.clearRect(t+this.offsetX,e+this.offsetX,n,o)},e.prototype.drawCircle=function(t,e,n){this.context.arc(t+this.offsetX,e+this.offsetY,n,0,2*Math.PI)},e.prototype.drawRect=function(t,e,n,o){this.context.fillRect(t+this.offsetX,e+this.offsetY,n,o),this.context.strokeRect(t+this.offsetX,e+this.offsetY,n,o)},e.prototype.drawStrokeRect=function(t,e,n,o){this.context.strokeRect(t+this.offsetX,e+this.offsetY,n,o)},e.prototype.drawPath=function(t,e){for(var n=t.length,i=0;i<n;i++){var r=e[i];switch(t[i]){case o.a.MOVE_TO:this.moveTo(r.x,r.y);break;case o.a.LINE_TO:this.lineTo(r.x,r.y)}}},e.prototype.endFill=function(){this.context.closePath(),this.context.fill(),this.context.stroke()},e.prototype.endStroke=function(){this.context.closePath(),this.context.stroke()},e.prototype.lineStyle=function(t,e,n){void 0===t&&(t=1),void 0===e&&(e=0),void 0===n&&(n=1);var o=i.a.toRGB(e);o.push(n);var r=o.join(",");this.context.lineWidth=t,this.context.strokeStyle="rgba("+r+")",this.context.beginPath()},e.prototype.lineTo=function(t,e){this.context.lineTo(t+this.offsetX,e+this.offsetY)},e.prototype.moveTo=function(t,e){this.context.moveTo(t+this.offsetX,e+this.offsetY)},e.prototype.curveTo=function(t,e,n,o){this.context.quadraticCurveTo(t+this.offsetX,e+this.offsetY,n+this.offsetX,o+this.offsetY)},e.prototype.scale=function(t,e){this.context.scale(t,e)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){1==this.isPivotCenter?(this.x=-t,this._width=2*t,this.canvasDom.width=this._width):(this.canvasDom.style.left="0px",this.canvasDom.width=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){1==this.isPivotCenter?(this.y=-t,this._height=2*t,this.canvasDom.height=this._height):(this.canvasDom.style.top="0px",this.canvasDom.height=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offsetX",{get:function(){return 1==this.isPivotCenter?this.width>>1:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offsetY",{get:function(){return 1==this.isPivotCenter?this.height>>1:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canvasDom",{get:function(){return this._dom},enumerable:!0,configurable:!0}),e}(r.a)},PRZ3:function(t,e,n){"use strict";function o(t){return s._12(0,[s._13(402653184,1,{wallWidthInput:0}),s._13(402653184,2,{wallLengthInput:0}),s._13(402653184,3,{wallHeightInput:0}),s._13(402653184,4,{bearingCheckBox:0}),s._13(402653184,5,{parapetCheckBox:0}),(t()(),s._15(0,null,null,42,"div",[["class","bg"]],null,null,null,null,null)),(t()(),s._14(null,["\n    "])),(t()(),s._15(0,null,null,8,"div",[["class","editArea"]],null,null,null,null,null)),(t()(),s._14(null,["\n        "])),(t()(),s._14(null,["\n        "])),(t()(),s._15(0,null,null,1,"div",[["class","label"]],null,null,null,null,null)),(t()(),s._14(null,["墙长"])),(t()(),s._14(null,["\n        "])),(t()(),s._15(16777216,null,null,1,"virtual-input",[["class","virtualInput"],["height","19px"],["width","60px"]],null,[[null,"touchstart"],[null,"touchmove"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==s._16(t,14)._touchMove(n)&&o}if("touchstart"===e){o=!1!==i.showWallWidthSetting()&&o}return o},l.a,l.b)),s._17(4308992,[[1,4],["wallWidthInput",4]],0,u.a,[s.Q,s._18],{width:[0,"width"],height:[1,"height"]},null),(t()(),s._14(null,["\n    "])),(t()(),s._14(null,["\n    "])),(t()(),s._15(0,null,null,8,"div",[["class","editArea"]],null,null,null,null,null)),(t()(),s._14(null,["\n        "])),(t()(),s._14(null,["\n        "])),(t()(),s._15(0,null,null,1,"div",[["class","label"]],null,null,null,null,null)),(t()(),s._14(null,["墙厚"])),(t()(),s._14(null,["\n        "])),(t()(),s._15(16777216,null,null,1,"virtual-input",[["class","virtualInput"],["height","19px"],["width","60px"]],null,[[null,"touchstart"],[null,"touchmove"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==s._16(t,24)._touchMove(n)&&o}if("touchstart"===e){o=!1!==i.showWallLengthSetting()&&o}return o},l.a,l.b)),s._17(4308992,[[2,4],["wallLengthInput",4]],0,u.a,[s.Q,s._18],{width:[0,"width"],height:[1,"height"]},null),(t()(),s._14(null,["\n    "])),(t()(),s._14(null,["\n    "])),(t()(),s._15(0,null,null,8,"div",[["class","editArea"]],null,null,null,null,null)),(t()(),s._14(null,["\n        "])),(t()(),s._14(null,["\n        "])),(t()(),s._15(0,null,null,1,"div",[["class","label"]],null,null,null,null,null)),(t()(),s._14(null,["墙高"])),(t()(),s._14(null,["\n        "])),(t()(),s._15(16777216,null,null,1,"virtual-input",[["class","virtualInput"],["height","19px"],["width","60px"]],null,[[null,"touchstart"],[null,"touchmove"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==s._16(t,34)._touchMove(n)&&o}if("touchstart"===e){o=!1!==i.showWallHeightSetting()&&o}return o},l.a,l.b)),s._17(4308992,[[3,4],["wallHeightInput",4]],0,u.a,[s.Q,s._18],{width:[0,"width"],height:[1,"height"]},null),(t()(),s._14(null,["\n    "])),(t()(),s._14(null,["\n    "])),(t()(),s._15(0,null,null,9,"div",[["class","editArea"]],null,null,null,null,null)),(t()(),s._14(null,["\n        "])),(t()(),s._14(null,["\n        "])),(t()(),s._15(16777216,null,null,1,"checkbox",[["class","checkbox"],["label","承重墙"]],null,[[null,"touchstart"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchend"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==s._16(t,41)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,41).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,41).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,41).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,41).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,41).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,41).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,41).touchEnd(n)&&o}if("touchstart"===e){o=!1!==i.setWallBearing()&&o}return o},h.a,h.b)),s._17(4308992,[[4,4],["bearingCheckBox",4]],0,c.a,[s.Q,s._18],{label:[0,"label"],iconSelected:[1,"iconSelected"],iconUnSelected:[2,"iconUnSelected"]},null),(t()(),s._14(null,["\n        "])),(t()(),s._14(null,["\n        "])),(t()(),s._15(16777216,null,null,1,"checkbox",[["class","checkbox"],["label","矮墙"]],null,[[null,"touchstart"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchend"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==s._16(t,45)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,45).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,45).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,45).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,45).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,45).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,45).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,45).touchEnd(n)&&o}if("touchstart"===e){o=!1!==i.setWallParapet()&&o}return o},h.a,h.b)),s._17(4308992,[[5,4],["parapetCheckBox",4]],0,c.a,[s.Q,s._18],{label:[0,"label"],iconSelected:[1,"iconSelected"],iconUnSelected:[2,"iconUnSelected"]},null),(t()(),s._14(null,["\n    "])),(t()(),s._14(null,["\n"]))],function(t,e){var n=e.component;t(e,14,0,"60px","19px");t(e,24,0,"60px","19px");t(e,34,0,"60px","19px");t(e,41,0,"承重墙",n.checkboxIconSelected,n.checkboxIconUnSelected);t(e,45,0,"矮墙",n.checkboxIconSelected,n.checkboxIconUnSelected)},null)}function i(t){return s._12(0,[(t()(),s._15(16777216,null,null,1,"wall-setting-bar",[],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==s._16(t,1)._touchMove(n)&&o}return o},o,d)),s._17(4308992,null,0,a.a,[s.Q,s._18],null,null)],function(t,e){t(e,1,0)},null)}var r=n("riTu"),s=n("/oeL"),a=n("CQOF"),l=n("15L3"),u=n("oFVN"),h=n("sC/0"),c=n("QSW1");n.d(e,"b",function(){return d}),e.a=o;var p=[r.a],d=s._11({encapsulation:0,styles:p,data:{}});s._19("wall-setting-bar",a.a,i,{position:"position",width:"width",height:"height",left:"left",top:"top",right:"right",bottom:"bottom",visible:"visible",alpha:"alpha",depth:"depth",rotation:"rotation",scalex:"scalex",scaley:"scaley",tooltip:"tooltip",backgroundcolor:"backgroundcolor",filter:"filter",buttonMode:"buttonMode"},{},[])},PSoK:function(t,e,n){"use strict";var o=n("ZvbM"),i=n("Eezr"),r=n("WFe8"),s=n("Pu9O"),a=n("vgYD"),l=n("gILL"),u=n("DE4s"),h=n("UPT1"),c=n("aJ2T"),p=n("tTVb"),d=n("ANVg"),f=n("/T2q");n.d(e,"a",function(){return m});var g=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),m=function(t){function e(e,n){var o=t.call(this,!0,!0)||this;return o.fillColor=0,o.fillAlpha=.5,o.fillRadius=6,o._point=null,o._connectedWalls=[],o._connectedCorners=[],o.initPoint=new s.a,o.tmpPoint=new s.a,o.dragTouchMoveHandlerLamda=function(t){o.dragTouchMoveHandler(t)},o.dragTouchEndHandlerLamda=function(t){o.dragTouchEndHandler(t)},o.depth=i.a.CORNER,o.realX=e,o.realY=n,o._point=new s.a(e,n),o.fillColor=a.a.CORNER_FILL_COLOR,o.fillAlpha=.5,o.calculateTransform(),o}return g(e,t),Object.defineProperty(e.prototype,"tagName",{get:function(){return"Corner"},enumerable:!0,configurable:!0}),e.prototype.onAdd=function(){t.prototype.onAdd.call(this),this.calculateTransform()},e.prototype.onRemove=function(){t.prototype.onRemove.call(this)},e.prototype.clear=function(){t.prototype.clear.call(this),this._connectedWalls.length=0,this._connectedCorners.length=0},Object.defineProperty(e.prototype,"point",{get:function(){return this._point.x=this.realX,this._point.y=this.realY,this._point},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"connectedWalls",{get:function(){this._connectedWalls=[];var t;for(t in this.scene.walls){var e=this.scene.walls[t];e.startCornerName!=this.name&&e.stopCornerName!=this.name||this._connectedWalls.push(e)}return this._connectedWalls},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"connectedCorners",{get:function(){this._connectedCorners.length=0;for(var t in this.scene.walls){var e=this.scene.walls[t];e.startCornerName==this.name?this._connectedCorners.push(e.stopCorner):e.stopCornerName==this.name&&this._connectedCorners.push(e.startCorner)}return this._connectedCorners},enumerable:!0,configurable:!0}),e.prototype.mergeConer=function(){var t=null;for(var e in this.scene.corners){var n=this.scene.corners[e];if(n.name!=this.name&&(0!=n.visible&&l.a.isPointEqual(this.point,n.point))){t=n;break}}if(!t)return 0;var o=this.scene.getWallByCorners(this,t);o&&this.scene.removeWall(o,!1,!1);for(var i=0,r=t.connectedWalls;i<r.length;i++){var s=r[i];s.startCornerName==t.name?s.startCornerName=this.name:s.stopCornerName=this.name}return this.scene.removeCorner(t),1},e.prototype.splitWall=function(){var t=null;for(var e in this.scene.walls){var n=this.scene.walls[e];n.startCornerName!=this.name&&n.stopCornerName!=this.name&&(l.a.isPointInSegment(n.start,n.stop,this.point)&&(t=n.split(this.point)))}return!!t},e.prototype.eraseWallAble=function(){var t=this.connectedCorners;return 2==t.length&&!!l.a.isPointInSegment(t[0].point,t[1].point,this.point)},e.prototype.mergeWall=function(){if(!this.eraseWallAble())return null;var t,e=this.connectedWalls,n=e[0],o=e[1];t=o.startCornerName==this.name?o.stopCorner:o.startCorner,n.startCornerName==this.name?n.startCornerName=t.name:n.stopCornerName=t.name;var i=o.openings;if(i.length>0)for(var r=0,s=i;r<s.length;r++){var a=s[r];a.wallName=n.name}return this.scene.removeWall(o,!0),n.setPolygonChangeFlag(!0),n},e.prototype.calcWallCorner=function(){function t(t,e){return t.angle>e.angle?1:t.angle<e.angle?-1:0}for(var e,n,o=this.connectedWalls,i=[],r=0,a=o;r<a.length;r++)if(e=a[r],e.empty)e.topLeft.x=e.topLeft.y=e.bottomLeft.x=e.bottomLeft.y=0,e.topRight.x=e.topRight.y=e.bottomRight.x=e.bottomRight.y=0;else{var u,h,c=new _;e.startCornerName==this.name?(n=e.stopCorner.point.subtract(this.point),n.normalize(1),u=.5*e.realWidth,h=.5*e.realLength,c.wall=e,c.angle=Math.atan2(n.y,n.x),c.dir=n,c.topLine=new d.a(e.localToScene(new s.a(-u,-h)),e.localToScene(new s.a(u,-h))),c.bottomLine=new d.a(e.localToScene(new s.a(-u,h)),e.localToScene(new s.a(u,h))),c.leftLine=new d.a(e.localToScene(new s.a(u,h)),e.localToScene(new s.a(u,-h))),c.rightLine=new d.a(e.localToScene(new s.a(-u,h)),e.localToScene(new s.a(-u,-h))),i.push(c)):e.stopCornerName==this.name&&(n=e.startCorner.point.subtract(this.point),n.normalize(1),u=.5*e.realWidth,h=.5*e.realLength,c.wall=e,c.angle=Math.atan2(n.y,n.x),c.dir=n,c.topLine=new d.a(e.localToScene(new s.a(-u,h)),e.localToScene(new s.a(u,h))),c.bottomLine=new d.a(e.localToScene(new s.a(-u,-h)),e.localToScene(new s.a(u,-h))),c.leftLine=new d.a(e.localToScene(new s.a(-u,h)),e.localToScene(new s.a(-u,-h))),c.rightLine=new d.a(e.localToScene(new s.a(u,h)),e.localToScene(new s.a(u,-h))),i.push(c)),e.resetCorner(this)}if(i.sort(t),1!=i.length){var p,f;for(p=0;p<i.length;p++)if(f=l.a.nextIndex(p,i.length),p!=f){var g=i[p],m=i[f],y=g.wall,b=m.wall,v=g.bottomLine,w=m.topLine,x=this.calculateIntersectionOfCornerStruct(v,w);if(null==x){var O=m.leftLine;x=this.calculateIntersectionOfCornerStruct(v,O)}if(null==x){var P=g.leftLine;x=this.calculateIntersectionOfCornerStruct(w,P)}if(null==x&&(x=this.calculateIntersectionOfCornerStruct(v.line,w.line)),null!=x){var E=y.sceneToLocal(x),C=b.sceneToLocal(x);y.startCornerName==this.name?(y.bottomLeft.x=E.x,y.bottomLeft.y=E.y):y.stopCornerName==this.name&&(y.topRight.x=E.x,y.topRight.y=E.y),b.startCornerName==this.name?(b.topLeft.x=C.x,b.topLeft.y=C.y):b.stopCornerName==this.name&&(b.bottomRight.x=C.x,b.bottomRight.y=C.y)}}}},e.prototype.calculateIntersectionOfCornerStruct=function(t,e){if(t instanceof u.a){var n=l.a.lineLineIntersection(t,e);return n.length>0?n[0]:null}if(t instanceof d.a){var o=t,i=e;return l.a.calculateIntersectPointOnSegment(o.start,o.stop,i.start,i.stop,!1)}return null},e.prototype.touchStart=function(e){e.touches.length>1||(t.prototype.touchStart.call(this,e),c.a.inst.focusTarget==this&&this.dragTouchStartHandler(e))},e.prototype.touchEnd=function(e){1==this.hasMouseDown&&t.prototype.touchEnd.call(this,e)},e.prototype.touchClick=function(e){c.a.inst.focus(this),t.prototype.touchClick.call(this,e)},e.prototype.focusIn=function(){t.prototype.focusIn.call(this),this.fillColor=a.a.CORNER_FOCUS_FILL_COLOR,this.fillAlpha=.9,this.fillRadius=15,this.calculateTransform();var e={selectedItem:this,selectedPoint:new s.a};this.scene.dispatchEvent(new f.a(f.a.MSCENE_ITEM_SELECTED,e),this.scene)},e.prototype.focusOut=function(){t.prototype.focusOut.call(this),this.fillColor=a.a.CORNER_FILL_COLOR,this.fillAlpha=.5,this.fillRadius=6,this.calculateTransform(),this.scene.dispatchEvent(new f.a(f.a.MSCENE_ITEM_UNSELECTED),this.scene)},e.prototype.draw=function(){this.stage&&(this.graphics.width=15,this.graphics.height=15,this.graphics.clear(),this.graphics.lineStyle(0,a.a.WHITE,0),this.graphics.beginFill(this.fillColor,this.fillAlpha),this.graphics.drawCircle(0,0,this.fillRadius),this.graphics.endFill(),this.connectedWalls.length<2&&(this.graphics.lineStyle(2,a.a.RED,.5),this.graphics.drawCircle(0,0,4),this.graphics.endFill()))},e.prototype.calculateTransform=function(){this.x=this.realX,this.y=this.realY,this.draw()},e.prototype.isLegalPosition=function(t){for(var e,n,o,i=(this.connectedWalls,this.connectedCorners),s=0,a=i;s<a.length;s++){e=a[s];for(var u=0,h=i;u<h.length;u++)if(n=h[u],n.name!=e.name){if(l.a.segmentIntersect(t,e.point,t,n.point))return!1;if(Math.abs(l.a.vectorsAngle(e.point.subtract(t),n.point.subtract(t)))<r.a.MIN_ANGLE)return!1}for(var c in this.scene.walls){var o=this.scene.walls[c];if(o.startCornerName!=this.name&&o.stopCornerName!=this.name&&l.a.segmentIntersect(t,e.point,o.start,o.stop))return!1}}return!0},e.prototype.calculateNewPosition=function(t){var e=t.clone(),n=this.connectedWalls,o=Number.MAX_VALUE,i=Number.MAX_VALUE;for(var s in this.scene.corners){var a=this.scene.corners[s];if(a.name!=this.name){if(t.subtract(a.point).length<r.a.DEFAULT_LENGTH)return e.x=a.realX,e.y=a.realY,e;Math.abs(a.realX-t.x)<Math.abs(o)&&(o=a.realX-t.x),Math.abs(a.realY-t.y)<Math.abs(i)&&(i=a.realY-t.y)}}if(Math.abs(o)<r.a.DEFAULT_LENGTH&&(e.x=t.x+o),Math.abs(i)<r.a.DEFAULT_LENGTH&&(e.y=t.y+i),!l.a.isNumberEqual(e.x,t.x)&&!l.a.isNumberEqual(e.y,t.y))return e;var u;if(1==n.length){var h,c=n[0];h=c.startCornerName==this.name?c.stopCorner:c.startCorner;var p,d;for(var s in this.scene.walls)if(p=this.scene.walls[s],p.name!=c.name&&null!=(d=l.a.calculateIntersectPoint(h.point,e,p.start,p.stop))&&l.a.isPointOnSegment(p.start,p.stop,d)&&!(d.subtract(e).length>d.subtract(h.point).length)&&d.subtract(e).length<r.a.DEFAULT_LENGTH)return e.x=d.x,e.y=d.y,e;for(var s in this.scene.walls)if(p=this.scene.walls[s],p.name!=c.name&&(u=l.a.calcFoot(p.start,p.stop,t),l.a.isPointOnSegment(p.start,p.stop,u)&&u.subtract(t).length<r.a.DEFAULT_LENGTH))return e.x=u.x,e.y=u.y,e}if(!l.a.isNumberEqual(e.x,t.x)||!l.a.isNumberEqual(e.y,t.y))return e;var f=this.connectedCorners;return 2==f.length&&(u=l.a.calcFoot(f[0].point,f[1].point,e),e.subtract(u).length<r.a.DEFAULT_LENGTH)?(e.x=u.x,e.y=u.y,e):e},e.prototype.dragTouchStartHandler=function(t){this.initPoint.setTo(this.realX,this.realY),this.stage.addEventListener(p.a.TOUCH_MOVE,this.dragTouchMoveHandlerLamda),this.stage.addEventListener(p.a.TOUCH_END,this.dragTouchEndHandlerLamda)},e.prototype.dragTouchMoveHandler=function(t){if(0!=this.hasMouseDown&&!(t.touches.length>1)){var e=t.touches[0];this.tmpPoint.setTo(e.clientX,e.clientY);var n=this.scene.globalToLocal(this.tmpPoint),o=this.calculateNewPosition(n);this.moveCorner(o)}},e.prototype.moveCorner=function(t){if(this.isLegalPosition(t)){this.realX=t.x,this.realY=t.y,this.calculateTransform();var e=this.connectedCorners;e.push(this);for(var n,o=0,i=e;o<i.length;o++)n=i[o],n.calcWallCorner();var r;for(var s in this.scene.walls){r=this.scene.walls[s];for(var a=0,u=e;a<u.length;a++)if(n=u[a],r.startCornerName==n.name||r.stopCornerName==n.name){r.setPolygonChangeFlag(!0),r.calculateTransform();break}}for(var c,p,d=0,f=this.connectedWalls;d<f.length;d++){if(r=f[d],r.startCornerName==this.name)p=r.stopCorner;else{if(r.stopCornerName!=this.name)continue;p=r.startCorner}c=r.openings;for(var g=0,m=c;g<m.length;g++){var _=m[g];if(_=this.scene.getOpeningByName(_.name)){this._tmpPoint.setTo(_.realX,_.realY);var y=this._tmpPoint.subtract(p.point).length;this._tmpPoint=l.a.vectorMovement(p.point,this.point.subtract(p.point),y),_.realX=this._tmpPoint.x,_.realY=this._tmpPoint.y,_.realRotationZ=r.realRotationZ,_.backup.reversed&&(_.realRotationZ+=180),_.x=_.realX,_.y=_.realY,_.rotation=_.realRotationZ}}}}h.a.inst.update()},e.prototype.dragTouchEndHandler=function(t){this.stage.removeEventListener(p.a.TOUCH_MOVE,this.dragTouchMoveHandlerLamda),this.stage.removeEventListener(p.a.TOUCH_END,this.dragTouchEndHandlerLamda),this.hasMouseDown=!1;var e;if(this.mergeConer()>0){this.calcWallCorner();for(var n=0,o=this.connectedWalls;n<o.length;n++)e=o[n],e.setPolygonChangeFlag(!0),e.calculateTransform()}if(this.splitWall()){this.calcWallCorner();for(var i=(this.connectedCorners,0),r=this.connectedCorners;i<r.length;i++){r[i].calcWallCorner()}for(var s=(this.connectedWalls,0),a=this.connectedWalls;s<a.length;s++)e=a[s],e.setPolygonChangeFlag(!0),e.calculateTransform()}this.calculateTransform(),l.a.isPointEqual(this.initPoint,this.point)||this.scene.change(!0,!0)},e.prototype.doubleClick=function(e){t.prototype.doubleClick.call(this,e),this.doMergeWall()},e.prototype.doMergeWall=function(){var t=this.mergeWall();t&&(t.startCorner.calcWallCorner(),t.stopCorner.calcWallCorner(),t.calculateTransform(),this.scene.change(!0,!0))},e.prototype.dumpData=function(){var t=new Object;return t.name=this.name,t.x=this.realX,t.y=this.realY,t},e.loadData=function(t){var n=new e(t.x,t.y);return n.name=t.name,n},e}(o.a),_=function(){function t(){}return t}()},PbJf:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){}return t}();o.MM=1,o.CM=2,o.M=3},Pu9O:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this._x=0,this._y=0,this._x=t,this._y=e}return t.prototype.clone=function(){return new t(this._x,this._y)},t.prototype.setTo=function(t,e){this.x=t,this.y=e},t.prototype.copyFrom=function(t){this.x=t.x,this.y=t.y},t.prototype.zero=function(){return this._x=0,this._y=0,this},t.prototype.isZero=function(){return 0==this._x&&0==this._y},Object.defineProperty(t.prototype,"length",{get:function(){return Math.sqrt(this.lengthSQ)},set:function(t){var e=this.angle;this._x=Math.cos(e)*t,this._y=Math.sin(e)*t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lengthSQ",{get:function(){return this._x*this._x+this._y*this._y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return Math.atan2(this._y,this._x)},set:function(t){var e=length;this._x=Math.cos(t)*e,this._y=Math.sin(t)*e},enumerable:!0,configurable:!0}),t.prototype.rotate=function(t,e){var n=this.subtract(t);return n.angle+=e,t.add(n)},t.prototype.getMidpoint=function(t){return t.add(this).multiply(.5)},t.prototype.getVerticalLine=function(e,n){if(e.equals(n))return e.subtract(this);var o,i=n.subtract(e),r=this.subtract(e),s=t.angleBetween(r,i);return i.length=r.length*Math.cos(s),o=e.add(i).subtract(this),Math.abs(o.x)<.01&&(o.x=0),Math.abs(o.y)<.01&&(o.y=0),o},t.prototype.normalize=function(t){if(void 0===t&&(t=1),0==this.length)return this._x=t,this;var e=this.length;return this.x=this.x/e*t,this.y=this.y/e*t,this},t.prototype.truncate=function(t){return length=Math.min(t,length),this},t.prototype.reverse=function(){return this._x=-this._x,this._y=-this._y,this},t.prototype.isNormalized=function(){return 1==length},t.prototype.dotProd=function(t){return this._x*t.x+this._y*t.y},t.prototype.crossProd=function(t){return this._x*t.y-this._y*t.x},t.angleBetween=function(t,e){t=t.clone().normalize(),e=e.clone().normalize();var n=t.dotProd(e);return n>1&&(n=1),Math.acos(n)},t.prototype.sign=function(t){return this.perp.dotProd(t)<0?-1:1},Object.defineProperty(t.prototype,"perp",{get:function(){return new t(-this._y,this._x)},enumerable:!0,configurable:!0}),t.prototype.dist=function(t){return Math.sqrt(this.distSQ(t))},t.prototype.distSQ=function(t){var e=t.x-this._x,n=t.y-this._y;return e*e+n*n},t.prototype.add=function(e){return new t(this._x+e.x,this._y+e.y)},t.prototype.subtract=function(e){return new t(this._x-e.x,this._y-e.y)},t.prototype.multiply=function(e){return new t(this._x*e,this._y*e)},t.prototype.divide=function(e){return new t(this._x/e,this._y/e)},t.prototype.equals=function(t){return this._x=Math.round(1e4*this._x)/1e4,this._y=Math.round(1e4*this._y)/1e4,t.x=Math.round(1e4*t.x)/1e4,t.y=Math.round(1e4*t.y)/1e4,this._x==t.x&&this._y==t.y},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return"x : "+this._x+" ------------ y : "+this._y},t}()},QSW1:function(t,e,n){"use strict";var o=n("/oeL"),i=n("ExGp");n.d(e,"a",function(){return s});var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.label="",o.iconSelected="",o.iconUnSelected="",o}return r(e,t),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.updateComponentProperty(),this.checkbox=this.checkboxRef.nativeElement,this.checkBoxLabel=this.checkBoxLabelRef.nativeElement,this.upStyle()},e.prototype.touchStart=function(t){void 0===t&&(t=null),1==this.enabled&&(this.selected=!this.selected)},e.prototype.upStyle=function(){this.renderer.setStyle(this.checkbox,"background-image","url("+this.iconUnSelected+")"),t.prototype.upStyle.call(this)},e.prototype.downStyle=function(){this.renderer.setStyle(this.checkbox,"background-image","url("+this.iconSelected+")"),t.prototype.downStyle.call(this)},e.ctorParameters=function(){return[{type:o.Q},{type:o._18}]},e}(i.a)},Qb7I:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){}return t}();o.EDGE_LENGTH="EdgeLength",o.EDGE_DISTANCE="EdgeDistance",o.DRAW_LENGTH="DrawLength",o.OPENING_LENGTH="OpeningLength",o.NEIGHBOR_WALL_LENGTH="NeighborWallLength",o.MODEL_LENGTH="ModelLength",o.CORNER_LENGTH="CornerLength"},R4k5:function(t,e,n){"use strict";var o=n("/oeL"),i=n("vgYD"),r=n("ExGp");n.d(e,"a",function(){return a});var s=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.arrowUp="assets/view/toolbar/arrow_up.png",o.arrowOver="assets/view/toolbar/arrow_over.png",o.arrowDown="assets/view/toolbar/arrow_over.png",o.textUp=i.a.toString(i.a.FONT),o.textOver=i.a.toString(i.a.FONT2),o.textDown=i.a.toString(i.a.FONT2),o.hasArrow="false",o}return s(e,t),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.updateComponentProperty(),this.imageDom=this.imageRef.nativeElement,this.labelDom=this.labelRef.nativeElement,this.arrowDom=this.arrowRef.nativeElement,"true"==this.hasArrow?(this.arrowDom.style.visibility="visible",this.arrowDom.style.position="relative"):(this.arrowDom.style.visibility="hidden",this.arrowDom.style.position="absolute",this.labelDom.style.width="100%"),this.upStyle()},e.prototype.upStyle=function(){this.imageDom.style.backgroundImage="url("+this.iconUp+")",this.labelDom.style.color=this.textUp,this.arrowDom.style.backgroundImage="url("+this.arrowUp+")"},e.prototype.overStyle=function(){this.imageDom.style.backgroundImage="url("+this.iconOver+")",this.labelDom.style.color=this.textOver,this.arrowDom.style.backgroundImage="url("+this.arrowOver+")"},e.prototype.downStyle=function(){this.imageDom.style.backgroundImage="url("+this.iconDown+")",this.labelDom.style.color=this.textDown,this.arrowDom.style.backgroundImage="url("+this.arrowDown+")"},e.ctorParameters=function(){return[{type:o.Q},{type:o._18}]},e}(r.a)},RWwX:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){this.dataList=[]}return t.prototype.add=function(t,e){var n=this.getVO(t);n?n.value=e:(n=new i,n.key=t,n.value=e,this.dataList.push(n))},t.prototype.remove=function(t){for(var e=0;e<this.dataList.length;e++){this.dataList[e].key==t&&this.dataList.splice(e,1)}},t.prototype.getVO=function(t){for(var e=0,n=this.dataList;e<n.length;e++){var o=n[e];if(o.key==t)return o}return null},t.prototype.getKey=function(t){for(var e=0,n=this.dataList;e<n.length;e++){var o=n[e];if(o.value==t)return o.key}return null},t.prototype.getValue=function(t){var e=this.getVO(t);return e?e.value:null},Object.defineProperty(t.prototype,"keys",{get:function(){for(var t=[],e=0,n=this.dataList;e<n.length;e++){var o=n[e];t.push(o.key)}return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"values",{get:function(){for(var t=[],e=0,n=this.dataList;e<n.length;e++){var o=n[e];t.push(o.value)}return t},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this.dataList=[]},t}(),i=function(){function t(){}return t}()},S23b:function(t,e,n){"use strict";var o=n("oWBL");n.d(e,"a",function(){return r});var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=function(t){function e(e){void 0===e&&(e=!1);var n=t.call(this,!1,!1)||this;return n.editable=!1,n._text="",n.editable=e,n.createTextfieldDom(),n.borderColor="#000000",n.borderThickness=0,n}return i(e,t),Object.defineProperty(e.prototype,"tagName",{get:function(){return"TextField"},enumerable:!0,configurable:!0}),e.prototype.createDom=function(){},e.prototype.createTextfieldDom=function(){1==this.editable?(this._dom=document.createElement("input"),this._dom.setAttribute("type","text")):this._dom=document.createElement("p"),this._dom.style.position="absolute",this._dom.style.borderStyle="solid",this.x=0,this.y=0},Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){this._dom&&(1==this.editable?this._dom.setAttribute("value",t):this._dom.innerHTML=t),this._text=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{set:function(t){this.dom.style.color=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{set:function(t){this.dom.style.fontSize=t+"px"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textGlow",{set:function(t){this.dom.style.textShadow=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"borderThickness",{set:function(t){this.dom.style.borderWidth=t+"px"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"borderColor",{set:function(t){this.dom.style.borderColor=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"backgroundColor",{set:function(t){this.dom.style.backgroundColor=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"align",{set:function(t){this.dom.style.textAlign=t},enumerable:!0,configurable:!0}),e}(o.a)},SFC0:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){}return t.stringsAreEqual=function(t,e,n){return n?t==e:t.toUpperCase()==e.toUpperCase()},t.trim=function(e){return t.ltrim(t.rtrim(e))},t.ltrim=function(t){for(var e=t.length,n=0;n<e;n++)if(t.charCodeAt(n)>32)return t.substring(n);return""},t.rtrim=function(t){for(var e=t.length,n=e;n>0;n--)if(t.charCodeAt(n-1)>32)return t.substring(0,n);return""},t.beginsWith=function(t,e){return e==t.substring(0,e.length)},t.endsWith=function(t,e){return e==t.substring(t.length-e.length)},t.remove=function(e,n){return t.replace(e,n,"")},t.replace=function(t,e,n){return t.split(e).join(n)},t.stringHasValue=function(t){return null!=t&&t.length>0},t.toUpperCases=function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()},t}()},SJcU:function(t,e,n){"use strict";var o=n("oWBL"),i=n("B0l3"),r=n("PSoK"),s=n("gILL"),a=n("WFe8"),l=n("Pu9O"),u=n("gvna");n.d(e,"a",function(){return c});var h=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),c=function(t){function e(){var e=t.call(this,!1,!1)||this;return e.corners=null,e.walls=null,e.rooms=null,e.openings=null,e.models=null,e.structs=null,e.setting=null,e.viewPort=null,e.corners=new i.a,e.walls=new i.a,e.rooms=new i.a,e.openings=new i.a,e.models=new i.a,e.structs=new i.a,e.viewPort=null,e.setting=new u.a,e}return h(e,t),e.prototype.change=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!1)},e.prototype.addPath=function(t,e){void 0===e&&(e=!1)},Object.defineProperty(e.prototype,"empty",{get:function(){return!(this.getLength(this.corners)>0)&&(!(this.getLength(this.rooms)>0)&&(!(this.getLength(this.walls)>0)&&(!(this.getLength(this.openings)>0)&&(!(this.getLength(this.models)>0)&&!(this.getLength(this.structs)>0)))))},enumerable:!0,configurable:!0}),e.prototype.getLength=function(t){var e=0;for(var n in t)e+=1;return e},e.prototype.getCornerByName=function(t){return this.corners[t]},e.prototype.getCornerByXY=function(t,e,n){void 0===n&&(n=!1);var o=null;for(var i in this.corners)if(o=this.getCornerByName(i),s.a.isNumberEqual(t,o.realX)&&s.a.isNumberEqual(e,o.realY))return o;return o=null,n&&(o=new r.a(t,e),this.addCorner(o)),o},e.prototype.addCorner=function(t){this.corners[t.name]=t,this.addChild(t)},e.prototype.removeCorner=function(t){t.connectedWalls.length>0||(t.clear(),delete this.corners[t.name],t.parent==this&&this.removeChild(t))},e.prototype.getRoomByName=function(t){return this.rooms[t]},e.prototype.getRoomByXY=function(t,e){for(var n in this.rooms){var o=this.rooms[n];if(o.doesBoundPolygonContaineVector2D(t,e))return o}return null},e.prototype.addRoom=function(t){this.rooms[t.name]=t,this.addChild(t),t.createWallRelation()},e.prototype.removeRoom=function(t,e){void 0===e&&(e=!1),t.clearWallRelation(),t.clearModels(),t.clear(),delete this.rooms[t.name],t.parent==this&&this.removeChild(t)},e.prototype.calculateWallsAndRooms=function(){var t;for(t in this.rooms){this.rooms[t].calculateTransform()}for(t in this.walls){this.walls[t].calculateTransform()}},e.prototype.clearContent=function(){for(var t in this.rooms)this.removeRoom(this.getRoomByName(t),!0);for(var e in this.walls)this.removeWall(this.getWallByName(e),!0);for(var n in this.corners)this.removeCorner(this.getCornerByName(n));for(var o in this.openings)this.removeOpening(this.getOpeningByName(o));for(var i in this.models)this.removeModel(this.getModelByName(i));for(var r in this.structs)this.removeStruct(this.getStructByName(r))},e.prototype.getWallByName=function(t){return this.walls[t]},e.prototype.getWallByPoint=function(t,e){void 0===e&&(e=!1);for(var n in this.walls){var o=this.walls[n];if(0==e){if(s.a.isPointInSegment(o.start,o.stop,t))return o}else if(s.a.isPointOnSegment(o.start,o.stop,t))return o}return null},e.prototype.getWallByCorners=function(t,e){if(t.name==e.name)return null;for(var n in this.walls){var o=this.walls[n];if(o.startCornerName==t.name&&o.stopCornerName==e.name)return o;if(o.stopCornerName==t.name&&o.startCornerName==e.name)return o}return null},e.prototype.getWallByEnds=function(t,e){for(var n in this.walls){var o=this.walls[n];if(s.a.isPointEqual(o.start,t)&&s.a.isPointEqual(o.stop,e))return o;if(s.a.isPointEqual(o.start,e)&&s.a.isPointEqual(o.stop,t))return o}return null},e.prototype.createWallByEnds=function(t,e){if(s.a.isPointEqual(t,e))return null;var n=this.getCornerByXY(t.x,t.y,!0),o=this.getCornerByXY(e.x,e.y,!0);return new a.a(n.name,o.name,this.setting.getWallThickness())},e.prototype.addWall=function(t){this.walls[t.name]=t,this.addChild(t)},e.prototype.removeWall=function(t,e,n){if(void 0===n&&(n=!0),1==e)for(var o=t.openings,i=0,r=o;i<r.length;i++){var s=r[i];s=this.getOpeningByName(s.name),s&&this.removeOpening(s)}t.clear(),delete this.walls[t.name],t.parent==this&&this.removeChild(t),n&&(t.startCorner&&this.removeCorner(t.startCorner),t.stopCorner&&this.removeCorner(t.stopCorner))},e.prototype.getOpeningByName=function(t){return this.openings[t]},e.prototype.addOpening=function(t){this.openings[t.name]=t,this.addChild(t)},e.prototype.removeOpening=function(t){t.clear(),delete this.openings[t.name],t.parent==this&&this.removeChild(t)},e.prototype.getModelByName=function(t){return this.models[t]},e.prototype.addModel=function(t){this.models[t.name]=t,this.addChild(t)},e.prototype.removeModel=function(t){t.clear(),delete this.models[t.name],t.parent==this&&this.removeChild(t)},e.prototype.getStructByName=function(t){return this.structs[t]},e.prototype.addStruct=function(t){this.structs[t.name]=t,this.addChild(t)},e.prototype.removeStruct=function(t){t.clear(),delete this.structs[t.name],t.parent==this&&this.removeChild(t)},e.prototype.calcOpeningAttachWall=function(t,e){void 0===e&&(e=48);var n=new l.a,o=null;for(var i in this.walls){var r=this.walls[i];n=s.a.calcFoot(r.start,r.stop,t),s.a.isPointInSegment(r.start,r.stop,n)&&(t.subtract(n).length<=e&&(e=t.subtract(n).length,o=r))}return o},e.prototype.scaleScene=function(t,e){},Object.defineProperty(e.prototype,"scale",{get:function(){return this.scaleX},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"viewRect",{get:function(){return null},enumerable:!0,configurable:!0}),e}(o.a)},SirN:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=[".label[_ngcontent-%COMP%]{float:left;margin-left:15px;font-size:14px}.slide[_ngcontent-%COMP%]{float:right;margin-top:10px;margin-right:15px;width:40px;height:22px;vertical-align:middle;background-size:100% 100%}"]},Tcd4:function(t,e,n){"use strict";var o=n("iHFl");n.d(e,"a",function(){return r});var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=function(t){function e(e,n){return void 0===n&&(n=null),t.call(this,e,n)||this}return i(e,t),e}(o.a);r.VIRTUAL_NUMBER_BOARD_CONFIRM="VIRTUAL_NUMBER_BOARD_CONFIRM"},Tgrg:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=[".bg[_ngcontent-%COMP%]{width:130px;height:100%;background-color:rgba(0,0,0,.6);border-radius:2px}.editArea[_ngcontent-%COMP%]{margin-left:12px}.editArea[_ngcontent-%COMP%], .label[_ngcontent-%COMP%]{float:left;height:100%}.label[_ngcontent-%COMP%]{margin-right:5px;line-height:40px;font-size:14px;text-align:center;color:#fff}.virtualInput[_ngcontent-%COMP%]{float:left;margin-top:8px;font-size:16px;color:#000;border-radius:5px;border-width:2px;border-style:solid;border-color:#fff;background-color:#fff}"]},ThMJ:function(t,e,n){"use strict";var o=n("iHFl");n.d(e,"a",function(){return r});var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=function(t){function e(e,n){return void 0===n&&(n=null),t.call(this,e,n)||this}return i(e,t),e}(o.a);r.DRAG_ENTER="DRAG_ENTER"},TzOb:function(t,e,n){"use strict";function o(t){return s._12(0,[s._13(402653184,1,{bgRef:0}),s._13(402653184,2,{iconRef:0}),(t()(),s._15(0,[[1,0],["bg",1]],null,0,"div",[["class","bg"]],null,null,null,null,null)),(t()(),s._15(0,[[2,0],["icon",1]],null,0,"div",[["class","icon"]],null,null,null,null,null))],null,null)}function i(t){return s._12(0,[(t()(),s._15(16777216,null,null,1,"icon-button",[],null,[[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchstart"],[null,"touchend"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==s._16(t,1)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,1).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,1).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,1).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,1).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,1).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,1).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,1).touchEnd(n)&&o}return o},o,u)),s._17(4308992,null,0,a.a,[s.Q,s._18],null,null)],function(t,e){t(e,1,0)},null)}var r=n("r76s"),s=n("/oeL"),a=n("kVR7");n.d(e,"b",function(){return u}),e.a=o;var l=[r.a],u=s._11({encapsulation:0,styles:l,data:{}});s._19("icon-button",a.a,i,{position:"position",width:"width",height:"height",left:"left",top:"top",right:"right",bottom:"bottom",visible:"visible",alpha:"alpha",depth:"depth",rotation:"rotation",scalex:"scalex",scaley:"scaley",tooltip:"tooltip",backgroundcolor:"backgroundcolor",filter:"filter",buttonMode:"buttonMode",iconUp:"iconUp",iconOver:"iconOver",iconDown:"iconDown",isShowBg:"isShowBg",bgColor:"bgColor",bgOverColor:"bgOverColor",bgDownColor:"bgDownColor",borderWidth:"borderWidth",borderColor:"borderColor"},{},[])},U3zN:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=[".bg[_ngcontent-%COMP%]{width:240px;height:100%;background-color:rgba(0,0,0,.6);border-radius:2px}.editArea[_ngcontent-%COMP%]{margin-left:12px}.editArea[_ngcontent-%COMP%], .label[_ngcontent-%COMP%]{float:left;height:100%}.label[_ngcontent-%COMP%]{margin-right:5px;line-height:40px;font-size:14px;text-align:center;color:#fff}.virtualInput[_ngcontent-%COMP%]{float:left;margin-top:8px;font-size:16px;color:#000;border-radius:5px;border-width:2px;border-style:solid;border-color:#fff;background-color:#fff}"]},UOls:function(t,e,n){"use strict";var o=n("/oeL"),i=n("KC10"),r=n("oV/x"),s=n("8Tef"),a=n("r4QP"),l=n("fr6C"),u=n("fqCj"),h=n("jDyV");n.d(e,"a",function(){return p});var c=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();n.i(o.a)();var p=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.doors=[],o.windows=[],o.structs=[],o.parent=null,o}return c(e,t),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.updateComponentProperty(),this.doors.push(new i.a(u.a.OPENING,e.DOOR_COMMON_IMAGE,"门",a.a.DOOR_COMMON,!0)),this.doors.push(new i.a(u.a.OPENING,e.DOOR_DOUBLE_IMAGE,"双开门",a.a.DOOR_DOUBLE,!0)),this.doors.push(new i.a(u.a.OPENING,e.DOOR_SLIDING_IMAGE,"移门",a.a.DOOR_SLIDING,!0)),this.windows.push(new i.a(u.a.OPENING,e.WINDOW_COMMON_IMAGE,"窗",a.a.WINDOW_COMMON,!0)),this.windows.push(new i.a(u.a.OPENING,e.WINDOW_BAY_IMAGE,"飘窗",a.a.WINDOW_BAY,!0)),this.windows.push(new i.a(u.a.OPENING,e.WINDOW_FRENCH_IMAGE,"落地窗",a.a.WINDOW_FRENCH,!0)),this.structs.push(new i.a(u.a.STRUCT,e.STRUCT_PILLAR_IMAGE,"柱子",h.a.PILLAR,!1)),this.structs.push(new i.a(u.a.STRUCT,e.STRUCT_FLUE_IMAGE,"烟道",h.a.FLUE,!1));for(var t=0;t<this.doors.length;t++){l.a.inst.createComponent(r.a,this.listDoorView).instance.structVO=this.doors[t]}for(var t=0;t<this.windows.length;t++){l.a.inst.createComponent(r.a,this.listWindowView).instance.structVO=this.windows[t]}for(var t=0;t<this.structs.length;t++){l.a.inst.createComponent(r.a,this.listStructView).instance.structVO=this.structs[t]}},e.prototype.touchStart=function(t){var e=this.dom.scrollTop,n=this.dom.scrollHeight,o=e+this.dom.offsetHeight;0===e?this.dom.scrollTop=1:o===n&&(this.dom.scrollTop=e-1)},e.prototype.touchMove=function(t){this.parent.scrollable=!1,this.dom.offsetHeight<this.dom.scrollHeight&&(this.parent.scrollable=!0)},e.ctorParameters=function(){return[{type:o.Q},{type:o._18}]},e}(s.a);p.DOOR_COMMON_IMAGE="assets/view/struct/door_common_3x.png",p.DOOR_DOUBLE_IMAGE="assets/view/struct/door_double_3x.png",p.DOOR_SLIDING_IMAGE="assets/view/struct/door_sliding_3x.png",p.WINDOW_COMMON_IMAGE="assets/view/struct/window_common_3x.png",p.WINDOW_BAY_IMAGE="assets/view/struct/window_bay_3x.png",p.WINDOW_FRENCH_IMAGE="assets/view/struct/window_french_3x.png",p.STRUCT_PILLAR_IMAGE="assets/view/struct/struct_pillar_3x.png",p.STRUCT_FLUE_IMAGE="assets/view/struct/struct_flue_3x.png"},UPT1:function(t,e,n){"use strict";var o=n("Pu9O"),i=n("Qb7I"),r=n("ljPL"),s=n("Wilg"),a=n("+N0H"),l=n("H8MY"),u=n("PbJf"),h=n("Eezr"),c=n("gILL"),p=n("fPy1"),d=n("/T2q");n.d(e,"a",function(){return f});var f=function(){function t(){this.isShow=!0,this.scene=a.a.inst,this.rulerGroup=new l.a(this.scene),this.rulerGroup.unit=u.a.MM,this.rulerGroup.depth=h.a.RULER,this.rulerGroup.addEvent(p.a.CLICK,this.rulerClickHandler,this)}return Object.defineProperty(t,"inst",{get:function(){return null==t._instance&&(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),t.prototype.showEdgeRuler=function(){this.isShow=!0,this.update()},t.prototype.hideEdgeRuler=function(){this.isShow=!1,this.rulerGroup.clear(),this.rulerGroup.visible=!1},Object.defineProperty(t.prototype,"visible",{get:function(){return this.rulerGroup.visible},enumerable:!0,configurable:!0}),t.prototype.changeUnit=function(t){this.rulerGroup.unit=t},t.prototype.rulerClickHandler=function(t){var e=t.data;this.scene.dispatchEvent(new d.a(d.a.MSCENE_RULER_CHANGED,e),this.scene)},t.prototype.update=function(){if(this.rulerGroup.visible=this.isShow,0!=this.isShow){this.rulerGroup.clear();var t;if(this.scene.setting.wallRulerMode==s.a.MIDLINE)for(var e in this.scene.walls)t=this.scene.walls[e],this.drawMidlineRuler(t);else if(this.scene.setting.wallRulerMode==s.a.INLINE)for(var e in this.scene.walls)t=this.scene.walls[e],this.drawInlineRuler(t)}},t.prototype.drawMidlineRuler=function(e,n,o){if(void 0===n&&(n=!1),void 0===o&&(o=null),!e.empty){var i=c.a.rotateVector(e.start.subtract(e.stop),Math.PI/2);i.normalize(e.realLength/2+t.RULER_VERTICAL_DISTANCE),e.backwardRoom?this.rulerGroup.addRuler(e.name,e.start.subtract(i),e.stop.subtract(i),n,o):this.rulerGroup.addRuler(e.name,e.start.add(i),e.stop.add(i),n,o)}},t.prototype.drawInlineRuler=function(e,n,o){if(void 0===n&&(n=!1),void 0===o&&(o=null),!e.empty){var i=c.a.rotateVector(e.start.subtract(e.stop),Math.PI/2);i.normalize(t.RULER_VERTICAL_DISTANCE);var r=e.localToSceneMatrix,s=r.transformPoint(e.topLeft),a=r.transformPoint(e.topRight),l=r.transformPoint(e.bottomRight),u=r.transformPoint(e.bottomLeft),h=null;e.adjacentRoomCount>0?(e.forwardRoom&&(h=o?o.clone():null,this.rulerGroup.addRuler(e.name,s.add(i),a.add(i),n,h)),e.backwardRoom&&(h=o?o.clone():null,this.rulerGroup.addRuler(e.name,l.subtract(i),u.subtract(i),n,h))):(h=o?o.clone():null,this.rulerGroup.addRuler(e.name,s.add(i),a.add(i),n,h),c.a.isNumberEqual(s.subtract(a).length,l.subtract(u).length)||(h=o?o.clone():null,this.rulerGroup.addRuler(e.name,l.subtract(i),u.subtract(i),n,h)))}},t.prototype.updateDrawRuler=function(e,n){if(!(e.length<2)){var o=this.scene.setting.getWallThickness();this.rulerGroup.visible=!0,this.rulerGroup.clear();for(var s=e.length,a=0;a<s-1;a++){var l=e[a],u=e[a+1];if(!(u.subtract(l).length<n)){var h=c.a.rotateVector(u.subtract(l),Math.PI/2);h.normalize(Math.round(.5*o)+t.RULER_VERTICAL_DISTANCE);var p=new r.a(i.a.DRAW_LENGTH);this.rulerGroup.addRuler("",l.subtract(h),u.subtract(h),!1,p)}}}},t.prototype.drawRulerChangeHandler=function(t){},t.prototype.showOpeningRuler=function(e){this.changeOpening=e,this.rulerGroup.visible=!0,this.rulerGroup.clear();var n=this.scene.getWallByName(e.wallName),o=c.a.rotateVector(n.start.subtract(n.stop),Math.PI/2);o.normalize(n.realLength/2+t.RULER_VERTICAL_DISTANCE);var s,a,l,u,h=n.localToSceneMatrix,p=h.transformPoint(n.topLeft),d=h.transformPoint(n.topRight),f=h.transformPoint(n.bottomRight),g=h.transformPoint(n.bottomLeft),m=n.realWidth>=n.start.subtract(e.start).length+n.stop.subtract(e.stop).length,_=e.localToSceneMatrix;n.adjacentRoomCount>0&&n.backwardRoom?(s=f.clone(),u=g.clone(),1==m?(a=_.transformPoint(e.bottomRight),l=_.transformPoint(e.bottomLeft)):(a=_.transformPoint(e.topLeft),l=_.transformPoint(e.topRight)),o.x*=-1,o.y*=-1):(s=p.clone(),u=d.clone(),1==m?(a=_.transformPoint(e.topLeft),l=_.transformPoint(e.topRight)):(a=_.transformPoint(e.bottomRight),l=_.transformPoint(e.bottomLeft))),s=s.add(o),a=a.add(o),l=l.add(o),u=u.add(o);var y=s.subtract(u).length-e.realWidth,b=u.subtract(s);b.normalize();var v=new r.a(i.a.OPENING_LENGTH);v.target=e,v.direct=b,v.maxValue=y,this.rulerGroup.addRuler(n.name,s,a,!0,v),b=s.subtract(u),b.normalize(),v=new r.a(i.a.OPENING_LENGTH),v.target=e,v.direct=b,v.maxValue=y,this.rulerGroup.addRuler(n.name,l,u,!0,v)},t.prototype.showWallInputRuler=function(t){this.rulerGroup.visible=!0,this.rulerGroup.clear();var e,n,o;this.changeWall=t;var a,l=[];for(var u in this.scene.walls)a=this.scene.walls[u],1!=a.empty&&t!=a&&t.realRotationZ-a.realRotationZ!=0&&180!=Math.abs(t.realRotationZ-a.realRotationZ)&&(t.startCornerName==a.startCornerName||t.startCornerName==a.stopCornerName?l.push(a):t.stopCornerName!=a.startCornerName&&t.stopCornerName!=a.stopCornerName||l.push(a));for(var u in l)a=l[u],this.rulerGroup.removeRuler(a.name),e=a.startCornerName==t.startCornerName||a.startCornerName==t.stopCornerName?a.start.subtract(a.stop):a.stop.subtract(a.start),e.normalize(1),n=!0,o=new r.a(i.a.NEIGHBOR_WALL_LENGTH),o.target=t,o.direct=e,this.scene.setting.wallRulerMode==s.a.MIDLINE?this.drawMidlineRuler(a,n,o):this.scene.setting.wallRulerMode==s.a.INLINE&&this.drawInlineRuler(a,n,o);var h=t.startCorner,c=t.stopCorner;(h.connectedWalls.length<=1||c.connectedWalls.length<=1)&&(h.connectedWalls.length<=1?(this.changeCorner=h,e=t.start.subtract(t.stop)):(this.changeCorner=c,e=t.stop.subtract(t.start)),n=!0,o=new r.a(i.a.CORNER_LENGTH),o.target=this.changeCorner,o.direct=e,this.scene.setting.wallRulerMode==s.a.MIDLINE?this.drawMidlineRuler(t,n,o):this.scene.setting.wallRulerMode==s.a.INLINE&&this.drawInlineRuler(t,n,o))},t.prototype.showModelRuler=function(t,e){function n(t,e){return t.dist>e.dist?1:t.dist<e.dist?-1:0}void 0===e&&(e=!1),this.rulerGroup.visible=!0,this.rulerGroup.clear(),this.changeModel=t;var s=t.realWidth,a=t.realLength,l=new o.a(t.realX,t.realY),u=new o.a(-s>>1,0);u=t.localToScene(u);var h=new o.a(0,-a>>1);h=t.localToScene(h);var p=new o.a(s>>1,0);p=t.localToScene(p);var d=new o.a(0,a>>1);d=t.localToScene(d);for(var f=[u,h,p,d],g=0,m=f;g<m.length;g++){var _=m[g],y=_.subtract(l);y.normalize(1);var b=[];for(var v in this.scene.walls){var w=this.scene.walls[v],x=c.a.vectorsAngle(y,w.stop.subtract(w.start));if(1==c.a.isNumberEqual(Math.abs(x)/90%2,1)){var O=c.a.raySegmentIntersection(_,y,w.start,w.stop);O&&(O.wall=w,b.push(O))}}if(b.length>0){b.sort(n);var P=b[0].wall,E=b[0].point,C=y.clone();C.x*=-1,C.y*=-1,C.normalize(P.realLength/2);var S=new r.a(i.a.MODEL_LENGTH);S.target=t,S.direct=C,this.rulerGroup.addRuler("",_,E.add(C),e,S)}}},t.prototype.showCornerRuler=function(t){this.rulerGroup.visible=!0;var e=t.connectedWalls;if(2==e.length){var n=e[0],o=e[1];if(n.realRotationZ-o.realRotationZ==0||180==Math.abs(n.realRotationZ-o.realRotationZ)){this.rulerGroup.clear(),this.changeCorner=t;var a,l;n.startCornerName==t.name?(a=n.start.subtract(n.stop),l=n.stop.subtract(n.start)):(a=n.stop.subtract(n.start),l=n.start.subtract(n.stop)),a.normalize(1),l.normalize(1);var u=new r.a(i.a.CORNER_LENGTH);u.target=t,u.direct=a;var h=new r.a(i.a.CORNER_LENGTH);h.target=t,h.direct=l,this.scene.setting.wallRulerMode==s.a.MIDLINE?(this.drawMidlineRuler(n,!0,u),this.drawMidlineRuler(o,!0,h)):this.scene.setting.wallRulerMode==s.a.INLINE&&(this.drawInlineRuler(n,!0,u),this.drawInlineRuler(o,!0,h))}}},t.prototype.clear=function(){this.rulerGroup.clear()},t}();f.RULER_VERTICAL_DISTANCE=12},Upsx:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=[".titleBg[_ngcontent-%COMP%]{width:100%;background-color:#3c3c3c}.title[_ngcontent-%COMP%]{width:100%;font-size:18px}.title[_ngcontent-%COMP%], .virtualInput[_ngcontent-%COMP%]{padding-left:15px;color:#fff}.virtualInput[_ngcontent-%COMP%]{width:64%;font-size:30px;background-color:transparent}.bluetoothButton[_ngcontent-%COMP%]{position:absolute}.centerNumberButton[_ngcontent-%COMP%], .leftNumberButton[_ngcontent-%COMP%]{border-right:1px solid #9b9b9b}.centerNumberButton[_ngcontent-%COMP%], .leftNumberButton[_ngcontent-%COMP%], .rightNumberButton[_ngcontent-%COMP%]{float:left;border-bottom:1px solid #9b9b9b}.removeButton[_ngcontent-%COMP%]{float:left;border-right:1px solid #9b9b9b}.confirmButton[_ngcontent-%COMP%]{float:left}"]},WFe8:function(t,e,n){"use strict";var o=n("ZvbM"),i=n("Eezr"),r=n("PSoK"),s=n("Yyq6"),a=n("yOTB"),l=n("r4QP"),u=n("Pu9O"),h=n("lbiv"),c=n("vgYD"),p=n("gILL"),d=n("Zkyf"),f=n("/ZnK"),g=n("byMr"),m=n("UPT1"),_=n("tTVb"),y=n("aJ2T"),b=n("/T2q"),v=n("PbJf"),w=n("jDyV");n.d(e,"a",function(){return O});var x=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),O=function(t){function e(e,n,o,r){void 0===r&&(r=!1);var s=t.call(this,!0,!0)||this;return s._startCornerName="",s._stopCornerName="",s._bearing=!1,s._parapet=!1,s._topLeft=null,s._bottomLeft=null,s._topRight=null,s._bottomRight=null,s._forwardRoomName="",s._backwardRoomName="",s._aloneRoomName="",s.borderColor=0,s.fillColor=0,s.initPoint=null,s._forwardName="",s._backwardName="",s._startName="",s._stopName="",s._localStart=new u.a,s._localStop=new u.a,s._openings=[],s._oldStartCorner=null,s._oldStopCorner=null,s._newStartPoint=new u.a(0,0),s._newStopPoint=new u.a(0,0),s._lastMouseDownPoint=new u.a(0,0),s._lastMouseUpPoint=new u.a(0,0),s.dragTouchMoveHandlerLamda=function(t){s.dragTouchMoveHandler(t)},s.dragTouchEndHandlerLamda=function(t){s.dragTouchEndHandler(t)},s.depth=i.a.WALL,s.forwardName=h.a.createPureUID(),s.backwardName=h.a.createPureUID(),s.startName=h.a.createPureUID(),s.stopName=h.a.createPureUID(),s.realLength=o,s.startCornerName=e,s.stopCornerName=n,s.bearing=r,s.parapet=!1,s._forwardRoomName="",s._backwardRoomName="",s._aloneRoomName="",s._topLeft=new u.a(s.localStart.x,-.5*s.realLength),s._bottomLeft=new u.a(s.localStart.x,.5*s.realLength),s._topRight=new u.a(s.localStop.x,-.5*s.realLength),s._bottomRight=new u.a(s.localStop.x,.5*s.realLength),s.borderColor=c.a.WALL_BORDER_COLOR,s.fillColor=s.normalFillColor,s.calculateTransform(),s}return x(e,t),Object.defineProperty(e.prototype,"tagName",{get:function(){return"Wall"},enumerable:!0,configurable:!0}),e.prototype.onAdd=function(){t.prototype.onAdd.call(this),this.calculateTransform()},e.prototype.onRemove=function(){t.prototype.onRemove.call(this)},e.prototype.clear=function(){t.prototype.clear.call(this),this.forwardRoomName="",this.backwardRoomName="",this._openings.length=0},Object.defineProperty(e.prototype,"startCornerName",{get:function(){return this._startCornerName},set:function(t){this._startCornerName=t,this.setPolygonChangeFlag(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stopCornerName",{get:function(){return this._stopCornerName},set:function(t){this._stopCornerName=t,this.setPolygonChangeFlag(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startCorner",{get:function(){return this.scene.getCornerByName(this.startCornerName)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stopCorner",{get:function(){return this.scene.getCornerByName(this.stopCornerName)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"realWidth",{get:function(){return Math.sqrt((this.startCorner.realX-this.stopCorner.realX)*(this.startCorner.realX-this.stopCorner.realX)+(this.startCorner.realY-this.stopCorner.realY)*(this.startCorner.realY-this.stopCorner.realY))},set:function(t){this._realWidth=t,this.setPolygonChangeFlag(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"realX",{get:function(){return.5*(this.startCorner.realX+this.stopCorner.realX)},set:function(t){this._realX=t,this.setPositionChangeFlag(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"realY",{get:function(){return.5*(this.startCorner.realY+this.stopCorner.realY)},set:function(t){this._realY=t,this.setPositionChangeFlag(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"realHeight",{get:function(){return this.parapet?this._realHeight:this.scene.setting.getStoreyHeight(v.a.CM)},set:function(t){var e=this.realHeight;if(this._realHeight=t,p.a.less(this.realHeight,e))for(var n=this.openings,o=0,i=n;o<i.length;o++){var r=i[o];r.realHeight>this.realHeight&&(r.realHeight=this.realHeight),r.realZ>this.realHeight-r.realHeight&&(r.realZ=this.realHeight-r.realHeight)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"realRotationZ",{get:function(){return 180*Math.atan2(this.stopCorner.realY-this.startCorner.realY,this.stopCorner.realX-this.startCorner.realX)/Math.PI},set:function(t){this._realRotationZ=p.a.formatAngle(t),this.setPositionChangeFlag(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"overCursor",{get:function(){return d.a.rotationArrowCursor(this.rotation)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"normalFillColor",{get:function(){return this.bearing?c.a.BEARING_WALL_FILL_COLOR:this.parapet?c.a.PARAPET_WALL_FILL_COLOR:c.a.NORMAL_WALL_FILL_COLOR},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bearing",{get:function(){return this._bearing},set:function(t){this._bearing=t,this.fillColor=this.normalFillColor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parapet",{get:function(){return this._parapet},set:function(t){this._parapet=t,t||(this.realHeight=this.scene.setting.getStoreyHeight(v.a.CM)),this.fillColor=this.normalFillColor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"start",{get:function(){return this.startCorner.point},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stop",{get:function(){return this.stopCorner.point},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"forwardName",{get:function(){return this._forwardName},set:function(t){this._forwardName=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"backwardName",{get:function(){return this._backwardName},set:function(t){this._backwardName=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startName",{get:function(){return this._startName},set:function(t){null!=t&&""!=t||(t=h.a.createPureUID()),this._startName=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stopName",{get:function(){return this._stopName},set:function(t){null!=t&&""!=t||(t=h.a.createPureUID()),this._stopName=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"localStart",{get:function(){return this._localStart.setTo(-.5*this.realWidth,0),this._localStart},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"localStop",{get:function(){return this._localStop.setTo(.5*this.realWidth,0),this._localStop},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topLeft",{get:function(){return this._topLeft},set:function(t){this._topLeft=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomLeft",{get:function(){return this._bottomLeft},set:function(t){this._bottomLeft=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomRight",{get:function(){return this._bottomRight},set:function(t){this._bottomRight=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topRight",{get:function(){return this._topRight},set:function(t){this._topRight=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minOpeningStartX",{get:function(){return Math.max(this.topLeft.x,this.bottomLeft.x)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxOpeningStopX",{get:function(){return Math.min(this.topRight.x,this.bottomRight.x)},enumerable:!0,configurable:!0}),e.prototype.getLegalRange=function(t){function e(t,e){return t.dist>e.dist?1:t.dist<e.dist?-1:0}if(0==this.openings.length)return{minX:this.minOpeningStartX,maxX:this.maxOpeningStopX};for(var n=[],o=[],i=0,r=this.openings;i<r.length;i++){var s=r[i],a=s.wallX-t;a<0?n.push({dist:Math.abs(a),opening:s}):o.push({dist:a,opening:s})}return n.sort(e),o.sort(e),{minX:n[0]?n[0].opening.wallX+n[0].opening.realWidth/2:this.minOpeningStartX,maxX:o[0]?o[0].opening.wallX-o[0].opening.realWidth/2:this.maxOpeningStopX}},e.prototype.getLegalOpeningPosition=function(t,e){var n=Number.MAX_VALUE,o=-Number.MAX_VALUE;n=Math.min(n,this.minOpeningStartX),o=Math.max(o,this.maxOpeningStopX);for(var i,r=this.openings,s=0,a=r;s<a.length;s++)i=a[s],(i=this.scene.getOpeningByName(i.name))&&(e&&i.name==e.name||(i.wallX<t?p.a.less(i.stopWallX,t)?n=Math.max(n,i.stopWallX):(n=t,o=t):p.a.less(t,i.startWallX)?o=Math.min(o,i.startWallX):(n=t,o=t)));return[n,o]},Object.defineProperty(e.prototype,"empty",{get:function(){return p.a.isNumberEqual(this.realWidth,0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"openings",{get:function(){this._openings.length=0;var t;for(t in this.scene.openings){var e=this.scene.openings[t];e.wallName==this.name&&this._openings.push(e)}return this._openings},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"forwardRoomName",{get:function(){return this._forwardRoomName},set:function(t){this._forwardRoomName=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"backwardRoomName",{get:function(){return this._backwardRoomName},set:function(t){this._backwardRoomName=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"aloneRoomName",{get:function(){return this._aloneRoomName},set:function(t){this._aloneRoomName=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"forwardRoom",{get:function(){return this.scene.getRoomByName(this.forwardRoomName)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"backwardRoom",{get:function(){return this.scene.getRoomByName(this.backwardRoomName)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"aloneRoom",{get:function(){return this.scene.getRoomByName(this.aloneRoomName)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"adjacentRoomCount",{get:function(){return this.forwardRoom&&this.backwardRoom?2:this.forwardRoom||this.backwardRoom?1:0},enumerable:!0,configurable:!0}),e.prototype.split=function(t){if(!p.a.isPointInSegment(this.start,this.stop,t))return null;var n=this.scene.getCornerByXY(t.x,t.y,!0),o=new e(n.name,this.stopCornerName,this.realLength,this.bearing);return o.parapet=this.parapet,o.realHeight=this.realHeight,this.stopCornerName=n.name,this.setPolygonChangeFlag(!0),this.scene.addWall(o),n},e.prototype.splitXY=function(t,e){return this._tmpPoint.setTo(t,e),this.split(this._tmpPoint)},e.prototype.draw=function(){this.graphics.clear(),this.empty||this.drawStraightWall()},e.prototype.drawStraightWall=function(){var t=this.polygon.boundRect,e=t.centerPoint,n=Math.round((t.width>>1)+Math.abs(e.x))+2,o=Math.round((t.height>>1)+Math.abs(e.y))+2;this.graphics.width=n,this.graphics.height=o+5,this.graphics.lineStyle(1,0,0),this.graphics.beginFill(this.fillColor,1),f.a.drawPath(this.graphics,this.polygon.vertices),this.graphics.endFill(),this.graphics.lineStyle(1,c.a.WALL_BORDER_COLOR,1),f.a.drawLine(this.graphics,this.topLeft,this.topRight),f.a.drawLine(this.graphics,this.bottomLeft,this.bottomRight),this.graphics.endStroke()},Object.defineProperty(e.prototype,"boundPolygon",{get:function(){if(this._updateControl.getValue(a.a.TAG_BOUNDARY)){this._boundPolygon=new g.a;var t,e=this.localToSceneMatrix;for(t=0;t<this.polygon.pointLength;t++)this._boundPolygon.addPoint(e.transformPoint(this.polygon.getPointAt(t)));this._boundPolygon.pointLength>0&&this._updateControl.setValue(a.a.TAG_BOUNDARY,!1)}return this._boundPolygon},enumerable:!0,configurable:!0}),e.prototype.calculatePolygon=function(){0!=this._updateControl.getValue(a.a.TAG_POLYGON)&&(this.polygon.clear(),this.polygon.addPoint(this.topLeft),this.polygon.addPoint(this.localStart),this.polygon.addPoint(this.bottomLeft),this.polygon.addPoint(this.bottomRight),this.polygon.addPoint(this.localStop),this.polygon.addPoint(this.topRight),this.setPolygonChangeFlag(!1))},e.prototype.calculateTransform=function(){this.startCorner&&this.stopCorner&&(this.x=this.realX,this.y=this.realY,this.rotation=this.realRotationZ,this.calculatePolygon(),this.draw())},e.prototype.isLegalPosition=function(t,n){if(t.subtract(n).length<e.DEFAULT_LENGTH)return!1;var o,i;for(i in this.scene.walls)if(o=this.scene.walls[i],o.startCornerName!=this.startCornerName&&o.stopCornerName!=this.startCornerName&&o.startCornerName!=this.stopCornerName&&o.stopCornerName!=this.stopCornerName&&p.a.segmentIntersect(t,n,o.start,o.stop))return!1;var r,s,a,l=this.startCornerLocked,u=this.stopCornerLocked;if(!l){a=this.startCorner.connectedCorners;for(var h=0,c=a;h<c.length;h++)if(r=c[h],r.name!=this.stopCornerName)for(i in this.scene.walls)if(o=this.scene.walls[i],o.name!=this.name)if(o.startCornerName==this.startCornerName||o.stopCornerName==this.startCornerName){if(s=o.startCornerName==this.startCornerName?o.stopCorner:o.startCorner,s.name==r.name)continue;if(p.a.segmentIntersect(t,r.point,t,s.point))return!1}else if(p.a.segmentIntersect(t,r.point,o.start,o.stop))return!1}if(!u){a=this.stopCorner.connectedCorners;for(var d=0,f=a;d<f.length;d++)if(r=f[d],r.name!=this.startCornerName)for(i in this.scene.walls)if(o=this.scene.walls[i],o.name!=this.name)if(o.startCornerName==this.stopCornerName||o.stopCornerName==this.stopCornerName){if(s=o.startCornerName==this.stopCornerName?o.stopCorner:o.startCorner,s.name==r.name)continue;if(p.a.segmentIntersect(n,r.point,n,s.point))return!1}else if(p.a.segmentIntersect(n,r.point,o.start,o.stop))return!1}return!0},Object.defineProperty(e.prototype,"startCornerLocked",{get:function(){var t=this.startCorner.connectedCorners;if(t.length<=1)return!1;if(2==t.length)return!!p.a.isPointInSegment(t[0].point,t[1].point,this.start);if(3==t.length){for(var e=0;e<t.length;e++)if(t[e].name==this.stopCornerName){t.splice(e,1);break}return!p.a.isPointInSegment(t[0].point,t[1].point,this.start)}return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stopCornerLocked",{get:function(){var t=this.stopCorner.connectedCorners;if(t.length<=1)return!1;if(2==t.length)return!!p.a.isPointInSegment(t[0].point,t[1].point,this.stop);if(3==t.length){for(var e=0;e<t.length;e++)if(t[e].name==this.startCornerName){t.splice(e,1);break}return!p.a.isPointInSegment(t[0].point,t[1].point,this.stop)}return!0},enumerable:!0,configurable:!0}),e.prototype.calculateStartForwardCorner=function(t){p.a.isPointOnLine(this.start,this.stop,t);var e,n=null,o=p.a.vectorsAngle(t.subtract(this.start),this.stop.subtract(this.start));o>0&&(e=Number.MAX_VALUE),o<0&&(e=Number.MIN_VALUE);for(var i=0,r=this.startCorner.connectedCorners;i<r.length;i++){var s=r[i];if(s.name!=this.stopCornerName){var a=p.a.vectorsAngle(s.point.subtract(this.start),this.stop.subtract(this.start));a<0&&(a+=360),o>0?a<e&&(e=a,n=s):o<0&&a>e&&(e=a,n=s)}}return n},e.prototype.calculateStopForwardCorner=function(t){p.a.isPointOnLine(this.start,this.stop,t);var e,n=null,o=p.a.vectorsAngle(t.subtract(this.stop),this.start.subtract(this.stop));o>0&&(e=Number.MAX_VALUE),o<0&&(e=Number.MIN_VALUE);for(var i=0,r=this.stopCorner.connectedCorners;i<r.length;i++){var s=r[i];if(s.name!=this.startCornerName){var a=p.a.vectorsAngle(s.point.subtract(this.stop),this.start.subtract(this.stop));a<0&&(a+=360),o>0?a<e&&(e=a,n=s):o<0&&a>e&&(e=a,n=s)}}return n},e.prototype.calculateAdsorbPoint=function(t){var e,n,o,i,r=null,s=null,a=p.a.calcFoot(this.start,this.stop,t),l=t.x-a.x,h=t.y-a.y,c=new u.a(this.start.x+l,this.start.y+h),d=new u.a(this.stop.x+l,this.stop.y+h),f=Number.MAX_VALUE;for(var g in this.scene.walls){var m=this.scene.walls[g],_=Math.abs(this.realRotationZ-m.realRotationZ);if(m!=this&&(1==p.a.isNumberEqual(_,0,.01)||1==p.a.isNumberEqual(_,180,.01))){a=p.a.calcFoot(c,d,m.start),i=a.subtract(m.start);var y=Math.abs(i.length-Math.abs(m.realLength/2-this.realLength/2));y<=4&&y<f&&(f=y,e=m,i.normalize(Math.abs(e.realLength/2-this.realLength/2)),n=e.start.add(i),e.realLength>this.realLength?i.normalize(e.realLength/2):(i.normalize(e.realLength/2),i.x*=-1,i.y*=-1),o=e.start.add(i))}}var b,v;i=null,f=Number.MAX_VALUE;for(var g in this.scene.corners){var w=this.scene.corners[g];w.name!=this.startCornerName&&(w.name!=this.stopCornerName&&(a=p.a.calcFoot(c,d,w.point),i=a.subtract(w.point),i.length<Math.min(f,4)&&(f=i.length,w,b=w.point.clone(),v=b.clone())))}if(b)if(n){a=p.a.calcFoot(c,d,n);var x=a.subtract(n).length;a=p.a.calcFoot(c,d,b);var O=a.subtract(b).length;x<O?(r=n,s=o):(r=b,s=v)}else r=b,s=v;else n&&(r=n,s=o);return{adsorbPoint:r,auxiliaryPoint:s}},e.prototype.calculateNewPosition=function(t,n){if(void 0===n&&(n=!0),this._newStartPoint.x=this.start.x,this._newStartPoint.y=this.start.y,this._newStopPoint.x=this.stop.x,this._newStopPoint.y=this.stop.y,1==n){var o=this.calculateAdsorbPoint(t),i=o.adsorbPoint;i&&(t=i)}var s=new u.a(this.start.x,this.start.y),a=new u.a(this.stop.x,this.stop.y);if(!p.a.isPointOnLine(this.start,this.stop,t)){var l=p.a.calcFoot(this.start,this.stop,t),h=t.x-l.x,c=t.y-l.y,d=this.startCornerLocked,f=this.stopCornerLocked;if(!((d||f)&&Math.sqrt(h*h+c*c)<e.DEFAULT_LENGTH)){var g=this.calculateStartForwardCorner(t),m=this.calculateStopForwardCorner(t);s.x+=h,s.y+=c,a.x+=h,a.y+=c,this._newStartPoint.x=s.x,this._newStartPoint.y=s.y,this._newStopPoint.x=a.x,this._newStopPoint.y=a.y;var _,y;if(g){if(_=p.a.calculateIntersectPoint(s,a,this.start,g.point),d){this._oldStartCorner=this.startCorner;var b=new r.a(this.startCorner.realX,this.startCorner.realY);if(this.scene.addCorner(b),this.startCornerName=b.name,y=new e(b.name,this._oldStartCorner.name,e.DEFAULT_LENGTH),this.scene.addWall(y),_&&p.a.isPointInSegment(this._oldStartCorner.point,g.point,_)){var v=this.scene.getWallByCorners(this._oldStartCorner,g);v&&(v.startCornerName==this._oldStartCorner.name?v.startCornerName=b.name:v.stopCornerName==this._oldStartCorner.name&&(v.stopCornerName=b.name),y.realLength=v.realLength)}}_&&(this._newStartPoint.x=_.x,this._newStartPoint.y=_.y)}if(m){if(_=p.a.calculateIntersectPoint(s,a,this.stop,m.point),f){this._oldStopCorner=this.stopCorner;var w=new r.a(this.stopCorner.realX,this.stopCorner.realY);if(this.scene.addCorner(w),this.stopCornerName=w.name,y=new e(w.name,this._oldStopCorner.name,e.DEFAULT_LENGTH),this.scene.addWall(y),_&&p.a.isPointInSegment(this._oldStopCorner.point,m.point,_)){var x=this.scene.getWallByCorners(this._oldStopCorner,m);x&&(x.startCornerName==this._oldStopCorner.name?x.startCornerName=w.name:x.stopCornerName==this._oldStopCorner.name&&(x.stopCornerName=w.name),y.realLength=x.realLength)}}_&&(this._newStopPoint.x=_.x,this._newStopPoint.y=_.y)}}}},e.prototype.touchStart=function(e){if(!(e.touches.length>1)){t.prototype.touchStart.call(this,e);var n=e.touches[0];this._lastMouseDownPoint.setTo(n.clientX,n.clientY),y.a.inst.focusTarget==this&&(this.stage.addEventListener(_.a.TOUCH_MOVE,this.dragTouchMoveHandlerLamda),this.stage.addEventListener(_.a.TOUCH_END,this.dragTouchEndHandlerLamda))}},e.prototype.touchEnd=function(e){1==this.hasMouseDown&&t.prototype.touchEnd.call(this,e)},e.prototype.touchClick=function(e){y.a.inst.focus(this),t.prototype.touchClick.call(this,e)},e.prototype.focusIn=function(){t.prototype.focusIn.call(this),this.fillColor=c.a.WALL_HOVER_FILL_COLOR,this.calculateTransform();var e={selectedItem:this,selectedPoint:this._lastMouseDownPoint.clone()};this.scene.dispatchEvent(new b.a(b.a.MSCENE_ITEM_SELECTED,e),this.scene)},e.prototype.focusOut=function(){t.prototype.focusOut.call(this),this.fillColor=this.normalFillColor,this.calculateTransform(),this.scene.dispatchEvent(new b.a(b.a.MSCENE_ITEM_UNSELECTED),this.scene)},e.prototype.dragTouchMoveHandler=function(t){if(0!=this.hasMouseDown&&!(t.touches.length>1)){var e=t.touches[0];this._tmpPoint.setTo(e.clientX,e.clientY);var n=this.scene.globalToLocal(this._tmpPoint);this._oldStartCorner=null,this._oldStopCorner=null,this.moveWall(n,!0)}},e.prototype.moveWall=function(t,e){void 0===e&&(e=!0),this.calculateNewPosition(t,e);var n=this.isLegalPosition(this._newStartPoint,this._newStopPoint);if(1==n){this.startCorner.realX=this._newStartPoint.x,this.startCorner.realY=this._newStartPoint.y,this.stopCorner.realX=this._newStopPoint.x,this.stopCorner.realY=this._newStopPoint.y,this.startCorner.calculateTransform(),this.stopCorner.calculateTransform();var o,i,r;o=this.startCorner.connectedCorners;for(var s=0,a=o;s<a.length;s++)i=a[s],i.calcWallCorner();o=this.stopCorner.connectedCorners;for(var l=0,u=o;l<u.length;l++)i=u[l],i.calcWallCorner();this._oldStartCorner&&this._oldStartCorner.calcWallCorner(),this._oldStopCorner&&this._oldStopCorner.calcWallCorner();for(var h in this.scene.walls)r=this.scene.walls[h],this.isHaveCommonCorner(r)?(r.setPolygonChangeFlag(!0),r.calculateTransform()):!this._oldStartCorner||r.startCornerName!=this._oldStartCorner.name&&r.stopCornerName!=this._oldStartCorner.name?this._oldStopCorner&&(r.startCornerName!=this._oldStopCorner.name&&r.stopCornerName!=this._oldStopCorner.name||(r.setPolygonChangeFlag(!0),r.calculateTransform())):(r.setPolygonChangeFlag(!0),r.calculateTransform());for(var c=0,d=this.openings;c<d.length;c++){var f=d[c];f=this.scene.getOpeningByName(f.name),f&&(this._tmpPoint.setTo(f.realX,f.realY),this._tmpPoint=p.a.calcFoot(this.start,this.stop,this._tmpPoint),f.realX=this._tmpPoint.x,f.realY=this._tmpPoint.y,f.x=f.realX,f.y=f.realY)}}return this.startCorner.mergeConer(),this.stopCorner.mergeConer(),m.a.inst.update(),n},e.prototype.dragTouchEndHandler=function(t){this.hasMouseDown=!1;var e=t.changedTouches[0];this._lastMouseUpPoint.setTo(e.clientX,e.clientY);var n,o;for(var i in this.scene.rooms)if(o=this.scene.rooms[i],o.isWallInThisRoom(this)){o.calculateTransform(),o.setPolygonChangeFlag(!0);for(var r=0,s=o.roomWalls;r<s.length;r++)n=s[r],this.isHaveCommonCorner(n)||(n.setPolygonChangeFlag(!0),n.calculateTransform())}0==p.a.isPointEqual(this._lastMouseDownPoint,this._lastMouseUpPoint,1)&&this.scene.change(!0,!0),this.stage.removeEventListener(_.a.TOUCH_MOVE,this.dragTouchMoveHandlerLamda),this.stage.removeEventListener(_.a.TOUCH_END,this.dragTouchEndHandlerLamda)},e.prototype.actionDelete=function(){var t,e,n;n=new Array,n.push(this.startCorner,this.stopCorner),this.scene.removeWall(this,!0);for(var o=0,i=n;o<i.length;o++)if(e=i[o],t=e.mergeWall())t.startCorner.calcWallCorner(),t.stopCorner.calcWallCorner(),t.calculateTransform();else if(e.stage){e.calcWallCorner();for(var r=0,s=e.connectedWalls;r<s.length;r++)t=s[r],t.setPolygonChangeFlag(!0),t.calculateTransform()}n.length=0,this.scene.change(!0,!0)},e.prototype.actionSplit=function(){if(!p.a.isNumberEqual(this._lastMouseDownPoint.x,0)||!p.a.isNumberEqual(this._lastMouseDownPoint.y,0)){var t,e;this._tmpPoint=this.globalToLocal(this._lastMouseDownPoint),this._tmpPoint.y=0,this._tmpPoint=this.localToScene(this._tmpPoint),t=this.splitXY(this._tmpPoint.x,this._tmpPoint.y);var n=this.realHeight;if(t){t.calcWallCorner();for(var o=0,i=t.connectedCorners;o<i.length;o++){i[o].calcWallCorner()}for(var r=0,s=t.connectedWalls;r<s.length;r++)e=s[r],e.setPolygonChangeFlag(!0),e.calculateTransform(),e.realHeight=n,e.parapet=this.parapet;this.scene.change(!0,!0),m.a.inst.showCornerRuler(t)}}},e.prototype.actionHole=function(){if(!p.a.isNumberEqual(this._lastMouseDownPoint.x,0)||!p.a.isNumberEqual(this._lastMouseDownPoint.y,0)){this._tmpPoint=this.globalToLocal(this._lastMouseDownPoint),this._tmpPoint.y=0,this._tmpPoint=this.localToScene(this._tmpPoint);var t=this._tmpPoint.x,e=this._tmpPoint.y,n=(this.realRotationZ,new s.a(l.a.HOLE));n.wallName=this.name,n.realX=t,n.realY=e,n.realRotationZ=this.realRotationZ,n.realWidth=s.a.DEFAULT_HOLE_WIDTH,n.realHeight=this.realHeight-60,this.scene.addOpening(n),this.scene.change()}},e.prototype.doChangeLength=function(t,n){if(void 0===n&&(n=!0),!((t=Math.round(t))<e.MIN_LENGTH||t>e.MAX_LENGTH||p.a.isNumberEqual(t,this.realLength))){this.realLength=t,this.startCorner.calcWallCorner(),this.stopCorner.calcWallCorner();var o;for(o in this.scene.walls){var i=this.scene.walls[o];i.startCornerName!=this.startCornerName&&i.stopCornerName!=this.startCornerName&&i.startCornerName!=this.stopCornerName&&i.stopCornerName!=this.stopCornerName||(i.setPolygonChangeFlag(!0),i.calculateTransform())}for(o in this.scene.openings){var r=this.scene.openings[o];r.wallName==this.name&&r.calculateTransform()}this.scene.change(n,!0)}},e.prototype.doChangeWidth=function(t){if(!(p.a.isNumberEqual(t,this.realWidth)||t<e.MIN_WIDTH)){this._newStartPoint.setTo(this.start.x,this.start.y),this._newStopPoint.setTo(this.stop.x,this.stop.y);var n=this.realWidth;if(1==this.stopCorner.connectedWalls.length)this._tmpPoint=p.a.vectorMovement(this.stop,this.stop.subtract(this.start),t-n),this._newStopPoint.setTo(this._tmpPoint.x,this._tmpPoint.y);else{if(1!=this.startCorner.connectedWalls.length)return;this._tmpPoint=p.a.vectorMovement(this.start,this.start.subtract(this.stop),t-n),this._newStartPoint.setTo(this._tmpPoint.x,this._tmpPoint.y)}var o;for(o in this.scene.walls){var i=this.scene.walls[o];if(i.name!=this.name&&p.a.intersectPlus(this._newStartPoint,this._newStopPoint,i.start,i.stop))return}if(p.a.isPointEqual(this._newStartPoint,this.start)){if(p.a.isPointEqual(this._newStopPoint,this.stop))return;this.stopCorner.realX=this._newStopPoint.x,this.stopCorner.realY=this._newStopPoint.y}else this.startCorner.realX=this._newStartPoint.x,this.startCorner.realY=this._newStartPoint.y;this.startCorner.calculateTransform(),this.stopCorner.calculateTransform(),this.startCorner.calcWallCorner(),this.stopCorner.calcWallCorner(),this.setPolygonChangeFlag(!0),this.calculateTransform(),this.scene.change()}},e.prototype.resetCorner=function(t){t==this.startCorner?(this.topLeft.x=-this.realWidth/2,this.topLeft.y=-this.realLength/2,this.bottomLeft.x=-this.realWidth/2,this.bottomLeft.y=this.realLength/2):t==this.stopCorner&&(this.topRight.x=this.realWidth/2,this.topRight.y=-this.realLength/2,this.bottomRight.x=this.realWidth/2,this.bottomRight.y=this.realLength/2)},e.prototype.calcArea=function(){return Math.abs(this.polygon.area)},e.prototype.dumpData=function(){var t=new Object;return t.name=this.name,t.structType=w.a.WALL,t.forwardName=this.forwardName,t.backwardName=this.backwardName,t.startName=this.startName,t.stopName=this.stopName,t.startCornerName=this.startCornerName,t.stopCornerName=this.stopCornerName,t.bearing=1==this.bearing?1:0,t.parapet=1==this.parapet?1:0,t.length=this.realLength,t.height=this.realHeight,t.forwardRoomName=this.forwardRoomName,t.backwardRoomName=this.backwardRoomName,t},e.loadData=function(t){if(t.hasOwnProperty("bearing")||(t.bearing=0),t.hasOwnProperty("parapet")||(t.parapet=0),t.startCornerName==t.stopCornerName)return null;var n=new e(t.startCornerName,t.stopCornerName,t.length,Boolean(t.bearing));return n.name=t.name,n.forwardName=t.forwardName,n.backwardName=t.backwardName,n.startName=t.startName,n.stopName=t.stopName,n.parapet=Boolean(t.parapet),n.realHeight=t.height,n},e.prototype.isHaveCommonCorner=function(t){return t.startCornerName==this.startCornerName||t.startCornerName==this.stopCornerName||t.stopCornerName==this.startCornerName||t.stopCornerName==this.stopCornerName},e}(o.a);O.DEFAULT_LENGTH=12,O.DEFAULT_LOW_HEIGHT=100,O.DEFAULT_HEIGHT=280,O.MIN_LENGTH=8,O.MAX_LENGTH=60,O.MIN_HEIGHT=100,O.MAX_HEIGHT=600,O.MIN_WALL_LOW_HEIGTH=10,O.MIN_WIDTH=24,O.MAX_WIDTH=1500,O.MIN_ANGLE=20,O.DEFAULT_BASEMAP_FILL_COLOR=16776960},Wilg:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){}return t}();o.NULL=0,o.MIDLINE=1,o.INLINE=2},WjyP:function(t,e,n){"use strict";var o=n("XKz0"),i=n("M2/t"),r=n("pPSP");n.d(e,"a",function(){return s});var s=function(){function t(){this.headers=new o.p({"Content-Type":"application/x-www-form-urlencoded"})}return Object.defineProperty(t,"inst",{get:function(){return null==t._instance&&(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),t.prototype.register=function(t){this.http=t},t.prototype.get=function(t,e,n,o,i,r){var s=this;void 0===e&&(e=null),void 0===n&&(n=null),void 0===o&&(o=null),void 0===i&&(i=null),void 0===r&&(r=!1);var a=this.createHttpParams(e);this.http.request("GET",t,{headers:this.headers,params:a,withCredentials:!0}).subscribe(function(t){s.successCalblack(t,n,i,r)},function(t){s.errorCalblack(t,o,i)})},t.prototype.getBinary=function(t,e,n,o,i){var r=this;void 0===e&&(e=null),void 0===n&&(n=null),void 0===o&&(o=null),void 0===i&&(i=null);var s=this.createHttpParams(e);this.http.request("GET",t,{headers:this.headers,params:s,responseType:"arraybuffer",withCredentials:!0}).subscribe(function(t){n&&n.call(i,t)},function(t){r.errorCalblack(t,o,i)})},t.prototype.post=function(t,e,n,o,i){var r=this;void 0===e&&(e=null),void 0===n&&(n=null),void 0===o&&(o=null),void 0===i&&(i=null);var s=this.createHttpParamsString(e);this.http.post(t,s,{headers:this.headers,withCredentials:!0}).subscribe(function(t){r.successCalblack(t,n,i)},function(t){r.errorCalblack(t,o,i)})},t.prototype.createHttpParams=function(e){void 0===e&&(e=null);var n=new o.q;if(e)for(var i in e)n=n.set(i,e[i]);return""!=t.USER_ID&&(n=n.set("user_id",t.USER_ID)),""!=t.TOKEN&&(n=n.set("user_token",t.TOKEN)),n},t.prototype.createHttpParamsString=function(e){void 0===e&&(e=null);var n="";for(var o in e)n+=o+"="+e[o]+"&";return""!=t.USER_ID&&(n+="user_id="+t.USER_ID+"&"),""!=t.TOKEN&&(n+="user_token="+t.TOKEN+"&"),n.length>0&&(n=n.substring(0,n.length-1)),n},t.prototype.successCalblack=function(t,e,n,o){if(void 0===n&&(n=null),void 0===o&&(o=!1),1==t.hasOwnProperty("code")){var s=t.code,a=t.msg;1e4!=s&&"10000"!=s&&a&&r.a.inst.warning(a)}if(e){var l;if(1==t.hasOwnProperty("data"))if(1==o||t.hasOwnProperty("encrypt")&&1==t.encrypt){var u=t.data,h=u.replace(/\n/gi,"");l=JSON.parse(i.a.decrypt(h))}else l=t.data;e.call(n,l)}},t.prototype.errorCalblack=function(t,e,n){void 0===n&&(n=null),r.a.inst.warning("接口错误！"),e&&e.call(n,t)},t}();s.TOKEN="1ebf9478d82ea3aa0b49777f9352b03496ca82c1:1fIqC3:SN4eNQgLS-YOOaVMu8QlNt-gPrs",s.USER_ID="17:1fIqC3:vQEydJxB2f10P7YD8B33xw2mGic"},"X+z+":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=[".image[_ngcontent-%COMP%]{width:20px;height:20px;margin:0 auto;background-size:contain}.label[_ngcontent-%COMP%]{float:left;margin-top:3px;text-align:center;font-size:12;color:#000}.arrow[_ngcontent-%COMP%]{float:left;width:6px;height:4px;margin-top:7px;margin-left:3px}"]},X973:function(t,e,n){"use strict";var o=n("/oeL"),i=n("8Tef"),r=n("+N0H"),s=n("/T2q"),a=n("IKKv"),l=n("3NP2"),u=n("pPSP"),h=n("biAJ"),c=n("p6er"),p=n("YihH"),d=n("+ByO");n.d(e,"a",function(){return g});var f=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),g=function(t){function e(n,o){var i=t.call(this,n,o)||this;return i.backUp="",i.backDown="",i.undoUp="",i.undoDown="",i.redoUp="",i.redoDown="",i.clearUp="",i.clearDown="",i.moveUp="",i.moveDown="",i.drawWallUp="",i.drawWallDown="",i.drawRoomUp="",i.drawRoomDown="",i.centerUp="",i.centerDown="",i.buttons=[],i.undoable=!1,i.redoable=!1,e.inst=i,i}return f(e,t),e.prototype.ngOnInit=function(){this.backUp="assets/view/toolbar/back_up_3x.png",this.backDown="assets/view/toolbar/back_up_3x.png",this.undoUp="assets/view/toolbar/undo_up_3x.png",this.undoDown="assets/view/toolbar/undo_up_3x.png",this.redoUp="assets/view/toolbar/redo_up_3x.png",this.redoDown="assets/view/toolbar/redo_up_3x.png",this.clearUp="assets/view/toolbar/clear_up_3x.png",this.clearDown="assets/view/toolbar/clear_up_3x.png",this.moveUp="assets/view/toolbar/move_up_3x.png",this.moveDown="assets/view/toolbar/move_down_3x.png",this.drawWallUp="assets/view/toolbar/draw_wall_up_3x.png",this.drawWallDown="assets/view/toolbar/draw_wall_down_3x.png",this.drawRoomUp="assets/view/toolbar/draw_rect_up_3x.png",this.drawRoomDown="assets/view/toolbar/draw_rect_down_3x.png",this.centerUp="assets/view/toolbar/center_up_3x.png",this.centerDown="assets/view/toolbar/center_up_3x.png"},e.prototype.ngAfterViewInit=function(){this.buttons=this.buttonQueryList.toArray(),this.scene=r.a.inst,this.scene.addEvent(s.a.MSCENE_CONTENT_CHANGED,this.onMSceneContentChanged,this),this.scene.addEvent(s.a.MSCENE_DRAW_CLOSED,this.onMSceneDrawClosed,this),this.moveHandler()},e.prototype.onMSceneContentChanged=function(t){this.undoable=this.scene.backup.undoable,this.redoable=this.scene.backup.redoable},e.prototype.onMSceneDrawClosed=function(t){this.moveHandler()},e.prototype.saveHandler=function(){},e.prototype.undoHandler=function(){this.closeSettingUI(),1==this.undoable&&this.scene.undo()},e.prototype.redoHandler=function(){this.closeSettingUI(),1==this.redoable&&this.scene.redo()},e.prototype.clearHandler=function(){u.a.inst.dialog("是否确定清空？",new h.a("取消"),new h.a("确定",this.clearYes,this))},e.prototype.clearYes=function(){this.scene.clearData(),this.moveHandler()},e.prototype.centerHandler=function(){this.scene.center(),this.moveHandler()},e.prototype.moveHandler=function(){a.a.inst.close(),this.closeSettingUI(),this.buttons[1].selected=!1,this.buttons[2].selected=!1,this.buttons[3].selected=!0},e.prototype.drawWallHandler=function(){a.a.inst.open(l.a.PATH),this.closeSettingUI(),this.buttons[1].selected=!0,this.buttons[2].selected=!1,this.buttons[3].selected=!1},e.prototype.drawRoomHandler=function(){a.a.inst.open(l.a.RECT),this.closeSettingUI(),this.buttons[1].selected=!1,this.buttons[2].selected=!0,this.buttons[3].selected=!1},e.prototype.show=function(){this.renderer.setStyle(this.dom,"animation","showToolbar 0.4s forwards"),this.renderer.setStyle(this.dom,"-moz-animation","showToolbar 0.4s forwards"),this.renderer.setStyle(this.dom,"-webkit-animation","showToolbar 0.4s forwards"),this.renderer.setStyle(this.dom,"-o-animation","showToolbar 0.4s forwards")},e.prototype.hide=function(){this.renderer.setStyle(this.dom,"animation","hideToolbar 0.4s forwards"),this.renderer.setStyle(this.dom,"-moz-animation","hideToolbar 0.4s forwards"),this.renderer.setStyle(this.dom,"-webkit-animation","hideToolbar 0.4s forwards"),this.renderer.setStyle(this.dom,"-o-animation","hideToolbar 0.4s forwards")},e.prototype.closeSettingUI=function(){r.a.inst.unfocus(),c.a.inst.close(),p.a.inst.close(),d.a.inst.close()},e.ctorParameters=function(){return[{type:o.Q},{type:o._18}]},e}(i.a);g.inst=null},XOoE:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=[".title[_ngcontent-%COMP%]{float:left;width:100%;height:32px;line-height:32px;background-color:#e9e9e9;font-size:14px;color:#333;padding-left:12px}.content[_ngcontent-%COMP%]{float:left;padding-bottom:10px}.roomTypeButton[_ngcontent-%COMP%]{float:left;margin-left:0;margin-top:10px}"]},XckH:function(t,e,n){"use strict";function o(t){return s._12(0,[s._13(402653184,1,{radioRef:0}),s._13(402653184,2,{radioLabelRef:0}),(t()(),s._15(0,[[2,0],["lb",1]],null,1,"div",[["class","label"]],null,null,null,null,null)),(t()(),s._14(null,["",""])),(t()(),s._14(null,["\n"])),(t()(),s._15(0,[[1,0],["radio",1]],null,0,"div",[["class","radio"]],null,null,null,null,null))],null,function(t,e){t(e,3,0,e.component.label)})}function i(t){return s._12(0,[(t()(),s._15(16777216,null,null,1,"radio-button",[],null,[[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchstart"],[null,"touchend"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==s._16(t,1)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,1).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,1).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,1).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,1).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,1).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,1).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,1).touchEnd(n)&&o}return o},o,u)),s._17(4308992,null,0,a.a,[s.Q,s._18],null,null)],function(t,e){t(e,1,0)},null)}var r=n("g2Ph"),s=n("/oeL"),a=n("ymZg");n.d(e,"b",function(){return u}),e.a=o;var l=[r.a],u=s._11({encapsulation:0,styles:l,data:{}});s._19("radio-button",a.a,i,{position:"position",width:"width",height:"height",left:"left",top:"top",right:"right",bottom:"bottom",visible:"visible",alpha:"alpha",depth:"depth",rotation:"rotation",scalex:"scalex",scaley:"scaley",tooltip:"tooltip",backgroundcolor:"backgroundcolor",filter:"filter",buttonMode:"buttonMode",label:"label",iconSelected:"iconSelected",iconUnSelected:"iconUnSelected",iconUnEnabledSelected:"iconUnEnabledSelected",iconUnEnabledUnSelected:"iconUnEnabledUnSelected",hasIcon:"hasIcon",selectedColor:"selectedColor",unSelectedColor:"unSelectedColor",unEnabledColor:"unEnabledColor",textSize:"textSize"},{},[])},"Xx/s":function(t,e,n){"use strict";var o=n("S23b"),i=n("Pu9O"),r=n("vgYD"),s=n("gILL");n.d(e,"a",function(){return l});var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),l=function(t){function e(){var e=t.call(this,!1)||this;return e.scene=null,e.hasTouch=!1,e.mouseFirstPoint=new i.a,e.mouseMovePoint=new i.a,e.touchEnable=!0,e.dom.style.borderRadius="2px",e.dom.style.borderStyle="dashed",e.dom.style.padding="2px 5px 2px 5px",e.borderThickness=1,e.borderColor=r.a.toString(r.a.BLUE2),e.backgroundColor=r.a.toRGBAstring(r.a.WHITE,1),e.color=r.a.toString(r.a.FONT),e.size=12,e.text="点击输入文字",e}return a(e,t),e.prototype.update=function(){this.scaleX=1/this.scene.scale,this.scaleY=1/this.scene.scale,this.touchEnable=!0},e.prototype.touchStart=function(e){this.hasTouch=!0;var n=e.touches[0];this.mouseFirstPoint.setTo(n.clientX,n.clientY),this.mouseFirstPoint=this.scene.globalToLocal(this.mouseFirstPoint),this.mouseMovePoint.setTo(this.mouseFirstPoint.x,this.mouseFirstPoint.y),t.prototype.touchStart.call(this,e)},e.prototype.touchMove=function(e){if(0!=this.hasTouch){var n=e.touches[0],o=new i.a(n.clientX,n.clientY);o=this.scene.globalToLocal(o),this.x+=o.x-this.mouseMovePoint.x,this.y+=o.y-this.mouseMovePoint.y,this.mouseMovePoint.setTo(o.x,o.y),t.prototype.touchMove.call(this,e)}},e.prototype.touchEnd=function(e){this.hasTouch=!1;var n=this.parent;n&&1==s.a.isPoint2DEqual(this.mouseFirstPoint,this.mouseMovePoint,.1)&&n.noteClick(this),t.prototype.touchEnd.call(this,e)},e.prototype.clear=function(){this.scene=null,this.mouseFirstPoint=null,this.mouseMovePoint=null},e.prototype.dumpData=function(){var t=new Object;return t.name=this.name,t.x=this.x,t.y=this.y,t.text=this.text,t.textX=this.x,t.textY=this.y,t.textWidth=80,t},e.loadData=function(t){var n=new e;return n.name=t.name,n.x=t.x,n.y=t.y,n.text=t.text,n},e}(o.a)},"Y+7l":function(t,e,n){"use strict";var o=n("iHFl");n.d(e,"a",function(){return r});var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=function(t){function e(e,n){return void 0===n&&(n=null),t.call(this,e,n)||this}return i(e,t),e}(o.a);r.HUXING_ITEM_ASSET_READY="HUXING_ITEM_ASSET_READY"},"Y/NI":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=[""]},Yhhh:function(t,e,n){"use strict";var o=n("ZvbM"),i=n("Eezr"),r=n("gMRQ"),s=n("Y+7l"),a=n("vgYD"),l=n("bv23"),u=n("/ZnK"),h=n("Pu9O"),c=n("tTVb"),p=n("aJ2T"),d=n("/T2q"),f=n("UPT1");n.d(e,"a",function(){return m});var g=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),m=function(t){function e(e){var n=t.call(this,!0,!0)||this;return n._itemNo="",n.mirror=!1,n.borderColor=0,n.borderAlpha=0,n._drawMatrix=new l.a,n._mouseLastPoint=new h.a,n._mouseMovePoint=new h.a,n.dragTouchMoveHandlerLamda=function(t){return n.dragTouchMoveHandler(t)},n.dragTouchEndHandlerLamda=function(t){return n.dragTouchEndHandler(t)},n.depth=i.a.MODEL,n.itemNo=e,n.mirror=!1,n.borderColor=a.a.MODEL_BORDER_COLOR,n.borderAlpha=a.a.MODEL_BORDER_ALPHA,n}return g(e,t),Object.defineProperty(e.prototype,"tagName",{get:function(){return"Model"},enumerable:!0,configurable:!0}),e.prototype.onAdd=function(){t.prototype.onAdd.call(this),this.calculateTransform()},e.prototype.onRemove=function(){t.prototype.onRemove.call(this)},e.prototype.clear=function(){t.prototype.clear.call(this)},Object.defineProperty(e.prototype,"itemNo",{get:function(){return this._itemNo},set:function(t){this._itemNo&&this.item.removeEvent(s.a.HUXING_ITEM_ASSET_READY,this.assetsReadyHandler,this),this._itemNo=t,0==this.item.assetsReady?this.item.addEvent(s.a.HUXING_ITEM_ASSET_READY,this.assetsReadyHandler,this):null!=this.stage&&this.assetsReadyHandler()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"item",{get:function(){return r.a.getInstance().getItemByNo(this.itemNo)},enumerable:!0,configurable:!0}),e.prototype.assetsReadyHandler=function(t){void 0===t&&(t=null),this.item.removeEvent(s.a.HUXING_ITEM_ASSET_READY,this.assetsReadyHandler,this),this.calculateTransform()},e.prototype.draw=function(){if(this.item&&this.item.assetsReady){this.graphics.clear();var t=this.polygon.boundRect;this.graphics.width=t.width>>1,this.graphics.height=t.height>>1,this.graphics.lineStyle(1,this.borderColor,this.borderAlpha),u.a.drawPath(this.graphics,this.polygon.vertices),this.graphics.endStroke(),this._drawMatrix.identity(),this.mirror?(this._drawMatrix.scale(-this.realWidth/this.item.planBMD.width,this.realLength/this.item.planBMD.height),this._drawMatrix.translate(.5*this.realWidth,-.5*this.realLength)):(this._drawMatrix.scale(this.realWidth/this.item.planBMD.width,this.realLength/this.item.planBMD.height),this._drawMatrix.translate(-.5*this.realWidth,-.5*this.realLength)),this.graphics.beginBitmapFill(this.item.planBMD)}},e.prototype.calculatePolygon=function(){this.polygon.clear(),this.polygon.addVertex(new h.a(-.5*this.realWidth,-.5*this.realLength)),this.polygon.addVertex(new h.a(.5*this.realWidth,-.5*this.realLength)),this.polygon.addVertex(new h.a(.5*this.realWidth,.5*this.realLength)),this.polygon.addVertex(new h.a(-.5*this.realWidth,.5*this.realLength))},e.prototype.calculateTransform=function(){this.x=this.realX,this.y=this.realY,this.rotation=this.realRotationZ,this.calculatePolygon(),this.draw()},e.prototype.touchStart=function(e){e.touches.length>1||(t.prototype.touchStart.call(this,e),p.a.inst.focusTarget==this&&this.dragTouchStartHandler(e))},e.prototype.touchEnd=function(e){0!=this.hasMouseDown&&t.prototype.touchEnd.call(this,e)},e.prototype.touchClick=function(e){p.a.inst.focus(this),t.prototype.touchClick.call(this,e)},e.prototype.focusIn=function(){t.prototype.focusIn.call(this),this.borderColor=a.a.MODEL_HOVER_BORDER_COLOR,this.borderAlpha=a.a.MODEL_HOVER_BORDER_ALPHA,this.calculateTransform();var e={selectedItem:this,selectedPoint:this._mouseLastPoint.clone()};this.scene.dispatchEvent(new d.a(d.a.MSCENE_ITEM_SELECTED,e),this.scene)},e.prototype.focusOut=function(){t.prototype.focusOut.call(this),this.borderColor=a.a.MODEL_BORDER_COLOR,this.borderAlpha=a.a.MODEL_BORDER_ALPHA,this.calculateTransform(),this.scene.dispatchEvent(new d.a(d.a.MSCENE_ITEM_UNSELECTED),this.scene)},e.prototype.isLegal=function(){return!0},e.prototype.dragTouchStartHandler=function(t){var e=t.touches[0];this._tmpPoint.setTo(e.clientX,e.clientY),this._tmpPoint=this.scene.globalToLocal(this._tmpPoint),this._mouseLastPoint.setTo(this._tmpPoint.x,this._tmpPoint.y),this.stage.addEventListener(c.a.TOUCH_MOVE,this.dragTouchMoveHandlerLamda),this.stage.addEventListener(c.a.TOUCH_END,this.dragTouchEndHandlerLamda)},e.prototype.dragTouchMoveHandler=function(t){if(0!=this.hasMouseDown&&!(t.touches.length>1)){var e=t.touches[0];this._tmpPoint.setTo(e.clientX,e.clientY),this._tmpPoint=this.scene.globalToLocal(this._tmpPoint),this._mouseMovePoint.setTo(this._tmpPoint.x,this._tmpPoint.y),this.realX+=this._mouseMovePoint.x-this._mouseLastPoint.x,this.realY+=this._mouseMovePoint.y-this._mouseLastPoint.y,this._mouseLastPoint.copyFrom(this._mouseMovePoint),this.calculateTransform(),f.a.inst.showModelRuler(this,!1)}},e.prototype.dragTouchEndHandler=function(t){this.hasMouseDown=!1,this.stage.removeEventListener(c.a.TOUCH_MOVE,this.dragTouchMoveHandlerLamda),this.stage.removeEventListener(c.a.TOUCH_END,this.dragTouchEndHandlerLamda),this.calculateTransform(),this.scene.change()},e.prototype.actionDelete=function(t){void 0===t&&(t=!0),this.scene.removeModel(this),t&&this.scene.change()},e.prototype.actionMirror=function(){this.mirror=!this.mirror,this.calculateTransform(),this.scene.change()},e.prototype.actionRotate=function(){this.realRotationZ+=90,this.calculateTransform(),this.scene.change()},e.prototype.doChangeWidth=function(t){this.realWidth=t,this.scene.change(),this.calculateTransform()},e.prototype.doChangeLength=function(t){this.realLength=t,this.scene.change(),this.calculateTransform()},e.prototype.doSizeChanged=function(){this.scene.change()},e.prototype.dumpData=function(){var t=new Object;return t.name=this.name,t.itemNo=this.itemNo,t.mirror=1==this.mirror?1:0,t.x=this.realX,t.y=this.realY,t.z=this.realZ,t.rotationZ=this.realRotationZ,t.width=this.realWidth,t.length=this.realLength,t.height=this.realHeight,t},e.loadData=function(t){var n=new e(t.itemNo);return n.name=t.name,n.mirror=Boolean(t.mirror),n.realX=t.x,n.realY=t.y,n.realZ=t.z,n.realRotationZ=t.rotationZ,n.realWidth=t.width,n.realHeight=t.height,n.realLength=t.length,n},e}(o.a);m.MIN_WIDTH=20,m.MIN_LENGTH=20,m.MAX_WIDTH=1e3,m.MAX_LENGTH=1e3},YihH:function(t,e,n){"use strict";var o=n("/oeL"),i=n("8Tef"),r=n("WFe8"),s=n("Yyq6"),a=n("Yhhh"),l=n("KE74"),u=n("ihW0"),h=n("CW6F");n.d(e,"a",function(){return p});var c=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),p=function(t){function e(n,o){var i=t.call(this,n,o)||this;return i.settings=[],e._instance=i,i}return c(e,t),Object.defineProperty(e,"inst",{get:function(){return e._instance},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.updateComponentProperty(),this.settings=[this.commonSetting,this.roomSetting,this.rulerSetting],this.roomSetting.parent=this},Object.defineProperty(e.prototype,"totalWidth",{get:function(){return"true"==this.commonSetting.visible?this.commonSetting.widthNumber:"true"==this.roomSetting.visible?this.roomSetting.widthNumber:"true"==this.rulerSetting.visible?this.rulerSetting.widthNumber:0},enumerable:!0,configurable:!0}),e.prototype.open=function(t,e,n){void 0===e&&(e=""),void 0===n&&(n=0),this.target=t,this.visible="true";for(var o=0,i=this.settings;o<i.length;o++){i[o].visible="false"}t instanceof r.a||t instanceof s.a||t instanceof a.a||t instanceof h.a?(this.commonSetting.visible="true",this.commonSetting.setData(t,e,n)):t instanceof l.a?(this.roomSetting.visible="true",this.roomSetting.setData(t)):t instanceof u.a&&(this.rulerSetting.visible="true",this.rulerSetting.setData(t,e,n)),this.showAnimation()},e.prototype.close=function(){this.hideAnimation()},e.prototype.showAnimation=function(){this.animation(this.dom,"showSettings 0.25s forwards")},e.prototype.hideAnimation=function(){this.animation(this.dom,"hideSettings 0.25s forwards",this.hideAnimationEnd,this)},e.prototype.hideAnimationEnd=function(){this.visible="false";for(var t=0,e=this.settings;t<e.length;t++){e[t].visible="false"}},e.ctorParameters=function(){return[{type:o.Q},{type:o._18}]},e}(i.a)},Yyq6:function(t,e,n){"use strict";var o=n("ZvbM"),i=n("Eezr"),r=n("/m+Y"),s=n("WFe8"),a=n("r4QP"),l=n("vgYD"),u=n("gILL"),h=n("Pu9O"),c=n("pR39"),p=n("byMr"),d=n("tTVb"),f=n("aJ2T"),g=n("/T2q"),m=n("UPT1");n.d(e,"a",function(){return y});var _=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),y=function(t){function e(e){var n=t.call(this,!0,!0)||this;switch(n._type=0,n._wallName="",n._mirror=!1,n._wallX=0,n._archHeight=0,n.borderColor=0,n.fillColor=0,n.backup=null,n._localStart=new h.a,n._localStop=new h.a,n._newMousePoint=new h.a,n._newPoint=new h.a,n._initPoint=new h.a,n._mouseDownOffset=new h.a,n._mouseDownPoint=new h.a,n.dragTouchMoveHandlerLamda=function(t){n.dragTouchMoveHandler(t)},n.dragTouchEndHandlerLamda=function(t){n.dragTouchEndHandler(t)},n.depth=i.a.OPENING,n.type=e,n.wallName="",n.mirror=!1,n.archHeight=0,n.type){case a.a.HOLE:case a.a.DOOR_COMMON:n.realWidth=80,n.realHeight=220;break;case a.a.DOOR_DOUBLE:case a.a.DOOR_SLIDING:n.realWidth=150,n.realHeight=220;break;case a.a.WINDOW_COMMON:case a.a.WINDOW_BAY:n.realWidth=80,n.realHeight=100;break;case a.a.WINDOW_FRENCH:n.realWidth=150,n.realHeight=220}return n.borderColor=l.a.OPENING_BORDER_COLOR,n.fillColor=l.a.OPENING_FILL_COLOR,n.backup=new r.a,n}return _(e,t),Object.defineProperty(e.prototype,"tagName",{get:function(){return"Opening"},enumerable:!0,configurable:!0}),e.prototype.onAdd=function(){t.prototype.onAdd.call(this),this.calculateTransform()},e.prototype.onRemove=function(){t.prototype.onRemove.call(this)},e.prototype.clear=function(){t.prototype.clear.call(this),this.wallName=""},Object.defineProperty(e.prototype,"wallName",{get:function(){return this._wallName},set:function(t){this._wallName=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wallX",{get:function(){return this.wall?(this._tmpPoint.setTo(this.realX,this.realY),this.wall.sceneToLocal(this._tmpPoint).x):0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"realLength",{get:function(){return this.wallLength},set:function(t){this._realLength=t,this.setPolygonChangeFlag(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wallLength",{get:function(){return this.wall?this.wall.realLength:s.a.DEFAULT_LENGTH},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"localStart",{get:function(){return this._localStart.setTo(-.5*this.realWidth,0),this._localStart},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"localStop",{get:function(){return this._localStop.setTo(.5*this.realWidth,0),this._localStop},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isHole",{get:function(){return this.type==a.a.HOLE},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDoor",{get:function(){return this.type==a.a.DOOR_COMMON||this.type==a.a.DOOR_DOUBLE||this.type==a.a.DOOR_SLIDING},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isWindow",{get:function(){return this.type==a.a.WINDOW_COMMON||this.type==a.a.WINDOW_BAY||this.type==a.a.WINDOW_FRENCH},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mirror",{get:function(){return this._mirror},set:function(t){this._mirror=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reversed",{get:function(){return!!this.wall&&!u.a.isDegreeAngleEqual(this.realRotationZ,this.wall.realRotationZ)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"archHeight",{get:function(){return Math.min(this._archHeight,this.maxArchHeight)},set:function(t){this._archHeight=Math.min(t,this.maxArchHeight)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"openHeight",{get:function(){return this.realHeight-this.archHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"archAngle",{get:function(){return 0==this.archHeight?0:2*u.a.asin(.5*this.realWidth/this.archRadius)*180/Math.PI},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"archRadius",{get:function(){return 0==this.archHeight?Number.MAX_VALUE:(.5*this.realWidth*.5*this.realWidth+this.archHeight*this.archHeight)/(2*this.archHeight)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxArchHeight",{get:function(){return Math.floor(Math.min(.5*this.realWidth,this.realHeight))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"realWidth",{get:function(){return this._realWidth},set:function(t){this.wall&&t>this.wall.realWidth?(this._realWidth=this.wall.realWidth,this.setPolygonChangeFlag(!0)):(this._realWidth=t,this.setPolygonChangeFlag(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"realHeight",{get:function(){return this._realHeight},set:function(t){this.wall&&t>this.wall.realHeight?this._realHeight=this.wall.realHeight:this._realHeight=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return u.a.isNumberEqual(this.realHeight,this.wall.height)&&this.archHeight<=0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wall",{get:function(){return""!=this.wallName&&this.wallName?this.scene.getWallByName(this.wallName):null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"start",{get:function(){return this.localToScene(new h.a(-.5*this.realWidth,0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stop",{get:function(){return this.localToScene(new h.a(.5*this.realWidth,0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startWallX",{get:function(){return this.wallX-.5*this.realWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stopWallX",{get:function(){return this.wallX+.5*this.realWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topLeft",{get:function(){return new h.a(this.localStart.x,-.5*this.realLength)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomLeft",{get:function(){return new h.a(this.localStart.x,.5*this.realLength)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topRight",{get:function(){return new h.a(this.localStop.x,-.5*this.realLength)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomRight",{get:function(){return new h.a(this.localStop.x,.5*this.realLength)},enumerable:!0,configurable:!0}),e.prototype.draw=function(){this.graphics.clear(),this.graphics.lineStyle(1,0,1);var t=this.realWidth,n=this.wallLength;switch(this.graphics.width=1+(t>>1),this.graphics.height=1+(n>>1)+6,this.type){case a.a.HOLE:this.graphics.lineStyle(1,this.borderColor,1),this.graphics.beginFill(this.fillColor,1),this.graphics.drawRect(-.5*t,-.5*n,t,n),this.graphics.endFill();break;case a.a.DOOR_COMMON:this.graphics.width=1+(t>>1),this.graphics.height=t+1,this.mirror?(c.a.drawSector(this.graphics,-.5*t,0,t,90,270,this.borderColor,this.fillColor,.5),this.graphics.lineStyle(1,this.borderColor,.7),this.graphics.beginFill(this.fillColor),this.graphics.drawRect(-.5*t,-.5*n,t,n),this.graphics.endFill(),this.graphics.lineStyle(1,this.borderColor,1),this.graphics.beginFill(this.fillColor),this.graphics.drawRect(-.5*t,-t,e.DEFAULT_OPENING_WIDTH,t),this.graphics.endFill()):(c.a.drawSector(this.graphics,.5*t,0,t,90,180,this.borderColor,this.fillColor,.2),this.graphics.lineStyle(1,this.borderColor,.7),this.graphics.beginFill(this.fillColor),this.graphics.drawRect(-.5*t,-.5*n,t,n),this.graphics.endFill(),this.graphics.lineStyle(1,this.borderColor,1),this.graphics.beginFill(this.fillColor),this.graphics.drawRect(.5*t-e.DEFAULT_OPENING_WIDTH,-t,e.DEFAULT_OPENING_WIDTH,t),this.graphics.endFill());break;case a.a.DOOR_DOUBLE:this.graphics.width=2+(t>>1),this.graphics.height=2+(t>>1),c.a.drawSector(this.graphics,-.5*t,0,.5*t,90,0,this.borderColor,this.fillColor,.2),c.a.drawSector(this.graphics,.5*t,0,.5*t,90,90,this.borderColor,this.fillColor,.2),this.graphics.lineStyle(1,this.borderColor,0),this.graphics.beginFill(this.fillColor),this.graphics.drawRect(-.5*t+1,-.5*n+1,t-2,n-2),this.graphics.endFill(),this.graphics.lineStyle(1,this.borderColor,1),this.graphics.beginFill(this.fillColor),this.graphics.drawRect(-.5*t,0,e.DEFAULT_OPENING_WIDTH,.5*t),this.graphics.drawRect(.5*t-e.DEFAULT_OPENING_WIDTH,0,e.DEFAULT_OPENING_WIDTH,.5*t),this.graphics.endFill();break;case a.a.DOOR_SLIDING:this.graphics.lineStyle(1,this.borderColor,0),this.graphics.beginFill(this.fillColor,1),this.graphics.drawRect(-.5*t,-.5*n,t,n),this.graphics.endFill(),this.graphics.lineStyle(1,this.borderColor,1),this.graphics.beginFill(this.fillColor,1),this.graphics.drawRect(-.5*t+2,-.5*n+2,.55*t-4,.5*n-2),this.graphics.drawRect(-.5*t+.45*t+2,0,.55*t-4,.5*n-2),this.graphics.endFill();break;case a.a.WINDOW_COMMON:this.graphics.lineStyle(1,this.borderColor,1),this.graphics.beginFill(this.fillColor),this.graphics.drawRect(-.5*t,-.5*n,t,n),this.graphics.endFill(),this.graphics.moveTo(-.5*t,-.5*n+1/3*n),this.graphics.lineTo(.5*t,-.5*n+1/3*n),this.graphics.lineTo(.5*t,.5*n-1/3*n),this.graphics.lineTo(-.5*t,.5*n-1/3*n),this.graphics.endFill();break;case a.a.WINDOW_FRENCH:this.graphics.lineStyle(1,this.borderColor,1),this.graphics.beginFill(this.fillColor),this.graphics.drawRect(-.5*t,-.5*n,t,n),this.graphics.endFill(),this.graphics.moveTo(-.5*t,-.5*n+1/3*n),this.graphics.lineTo(.5*t,-.5*n+1/3*n),this.graphics.lineTo(.5*t,.5*n-1/3*n),this.graphics.lineTo(-.5*t,.5*n-1/3*n),this.graphics.lineTo(0,.5*n-1/3*n),this.graphics.lineTo(0,-.5*n+1/3*n),this.graphics.endFill();break;case a.a.WINDOW_BAY:var o=2*this.realLength;this.graphics.width=1+(t+2*n>>1),this.graphics.height=o+.5*n+1,this.graphics.lineStyle(1,this.borderColor,1),this.graphics.beginFill(this.fillColor),this.graphics.drawRect(-.5*t-n,.5*n,t+2*n,o),this.graphics.endFill(),this.graphics.drawRect(-.5*t-2/3*n,.5*n,t+4/3*n,o-1/3*n),this.graphics.endFill(),this.graphics.drawRect(-.5*t-1/3*n,.5*n,t+2/3*n,o-2/3*n),this.graphics.endFill(),this.graphics.beginFill(14540253),this.graphics.drawRect(-.5*t,-.5*n,t,o),this.graphics.endFill()}},e.prototype.calculateTransform=function(){this.x=this.realX,this.y=this.realY,this.rotation=this.realRotationZ,this.draw()},e.prototype.touchStart=function(e){e.touches.length>1||(t.prototype.touchStart.call(this,e),f.a.inst.focusTarget==this&&this.dragTouchStartHandler(e))},e.prototype.touchEnd=function(e){1==this.hasMouseDown&&t.prototype.touchEnd.call(this,e)},e.prototype.touchClick=function(e){f.a.inst.focus(this),t.prototype.touchClick.call(this,e)},e.prototype.focusIn=function(){t.prototype.focusIn.call(this),this.borderColor=l.a.OPENING_HOVER_BORDER_COLOR,this.calculateTransform();var e={selectedItem:this,selectedPoint:this._mouseDownPoint.clone()};this.scene.dispatchEvent(new g.a(g.a.MSCENE_ITEM_SELECTED,e),this.scene)},e.prototype.focusOut=function(){t.prototype.focusOut.call(this),this.borderColor=l.a.OPENING_BORDER_COLOR,this.calculateTransform(),this.scene.dispatchEvent(new g.a(g.a.MSCENE_ITEM_UNSELECTED),this.scene)},e.prototype.isLegal=function(){if(!this.wall)return!1;var t=this.wall;if(u.a.less(this.startWallX,t.minOpeningStartX))return!1;if(u.a.less(t.maxOpeningStopX,this.stopWallX))return!1;for(var e,n=t.openings,o=0,i=n;o<i.length;o++)if(e=i[o],(e=this.scene.getOpeningByName(e.name))&&e.name!=this.name){if(u.a.isNumberEqual(this.startWallX,e.startWallX))return!1;if(u.a.isNumberEqual(this.stopWallX,e.stopWallX))return!1;if(u.a.less(e.startWallX,this.startWallX)&&u.a.less(this.startWallX,e.stopWallX))return!1;if(u.a.less(e.startWallX,this.stopWallX)&&u.a.less(this.stopWallX,e.stopWallX))return!1;if(u.a.less(this.startWallX,e.startWallX)&&u.a.less(e.startWallX,this.stopWallX))return!1;if(u.a.less(this.startWallX,e.stopWallX)&&u.a.less(e.stopWallX,this.stopWallX))return!1}return!0},e.prototype.dragTouchStartHandler=function(t){this.backup.backup(this);var e=t.touches[0];this._tmpPoint.setTo(e.clientX,e.clientY),this._tmpPoint=this.scene.globalToLocal(this._tmpPoint),this._initPoint.setTo(this.realX,this.realY),this._lastWidth=this.realWidth,this._mouseDownPoint.setTo(e.clientX,e.clientY),this._mouseDownOffset=this._initPoint.subtract(this._tmpPoint),this.stage.addEventListener(d.a.TOUCH_MOVE,this.dragTouchMoveHandlerLamda),this.stage.addEventListener(d.a.TOUCH_END,this.dragTouchEndHandlerLamda)},e.prototype.forceToAdsorbent=function(t,e){if(this.wall){this._newPoint.setTo(t,e);var n=this.wall.minOpeningStartX+.5*this.realWidth,o=this.wall.maxOpeningStopX-.5*this.realWidth,i=this.wall.localToScene(new h.a(n)),r=this.wall.localToScene(new h.a(o)),s=u.a.calcFoot(this.wall.start,this.wall.stop,this._newPoint),a=this.wall.sceneToLocal(s).x;a<n?(this.realX=i.x,this.realY=i.y):a>o?(this.realX=r.x,this.realY=r.y):(this.realX=s.x,this.realY=s.y)}},e.prototype.dragTouchMoveHandler=function(t){if(0!=this.hasMouseDown&&!(t.touches.length>1)){var e=t.touches[0];this._tmpPoint.setTo(e.clientX,e.clientY),this._tmpPoint=this.scene.globalToLocal(this._tmpPoint),this._newMousePoint.setTo(this._tmpPoint.x,this._tmpPoint.y),this._newPoint=this._newMousePoint.add(this._mouseDownOffset),this.moveOpening(this._newPoint)}},e.prototype.moveOpening=function(t){var n=this.wallName,o=this.scene.calcOpeningAttachWall(t);if(this.wallName=o?o.name:"",o&&o.name==n||(t.setTo(this._newMousePoint.x,this._newMousePoint.y),this._mouseDownOffset.setTo(0,0)),this.alpha=1,this.wall){var i,r=u.a.calcFoot(this.wall.start,this.wall.stop,t),s=this.wall.sceneToLocal(r).x,a=this.wall.getLegalOpeningPosition(s,this),l=a[0],h=a[1];i=e.MIN_WIDTH;var c=h-l,p=(h+l)/2;this.wallName!=n&&(this.realRotationZ=this.wall.realRotationZ),u.a.less(c,this._lastWidth)&&u.a.less(i,c)&&c>=i?(this._realWidth=c,this._tmpPoint.setTo(p,0),this._tmpPoint=this.wall.localToScene(this._tmpPoint),this.realX=this._tmpPoint.x,this.realY=this._tmpPoint.y):(this.forceToAdsorbent(t.x,t.y),this.realWidth=this._lastWidth,this.x=this.realX,this.y=this.realY,this.wall&&!this.isLegal()&&(this.alpha=.5,this._tmpPoint.setTo(this.realX,this.realY),this._tmpPoint=this.scene.localToGlobal(this._tmpPoint)))}else this.realX=this._newMousePoint.x,this.realY=this._newMousePoint.y,this.realWidth=this._lastWidth,this.x=this.realX,this.y=this.realY,this.rotation=this.realRotationZ;this.calculateTransform()},e.prototype.dragTouchEndHandler=function(t){this.stage.removeEventListener(d.a.TOUCH_MOVE,this.dragTouchMoveHandlerLamda),this.stage.removeEventListener(d.a.TOUCH_END,this.dragTouchEndHandlerLamda),this.hasMouseDown=!1;new h.a(this.realX,this.realY);if(this.wall&&this.isLegal()||this.backup.rollback(this),!this.wall||!this.isLegal())return void this.scene.removeOpening(this);this.alpha=1,this.calculateTransform(),this.scene.change()},e.prototype.actionDelete=function(t){void 0===t&&(t=!0),this.scene.removeOpening(this),t&&(this.scene.change(),m.a.inst.update())},e.prototype.actionRotate=function(){this.type!=a.a.HOLE&&this.type!=a.a.DOOR_SLIDING&&this.type!=a.a.WINDOW_COMMON&&this.type!=a.a.WINDOW_FRENCH&&(this.type==a.a.DOOR_COMMON?this.reversed||this.mirror?!this.reversed&&this.mirror?this.mirror=!1:this.reversed&&!this.mirror?(this.mirror=!0,this.realRotationZ+=180):this.reversed&&this.mirror&&(this.mirror=!1):(this.mirror=!0,this.realRotationZ+=180):this.realRotationZ+=180,this.calculateTransform(),this.scene.change())},e.prototype.doChangeWidth=function(t){if(this.wall&&!(t<e.MIN_WIDTH)){var n=this.wall.getLegalOpeningPosition(this.wallX,this),o=n[0],i=n[1];if(!(t>i-o)){this.realWidth=t;var r,s=this.wallX,a=s-.5*t,l=s+.5*t;a<o?r=o+.5*t:l>i&&(r=i-.5*t),r&&(this._tmpPoint.setTo(r,0),this._tmpPoint=this.wall.localToScene(this._tmpPoint),this.realX=this._tmpPoint.x,this.realY=this._tmpPoint.y),this.calculateTransform()}}},e.prototype.doChangeHeight=function(t){this.wall&&(t<e.MIN_HEIGHT||this.realZ+t>this.wall.realHeight||(this.realHeight=t))},e.prototype.doChangeArchHeight=function(t){this.wall&&(t<0&&!u.a.isNumberEqual(0,t)||(this.archHeight=t))},e.prototype.doSizeChanged=function(){this.scene.change()},e.prototype.dumpData=function(){if(!this.wall)return null;var t=new Object;return t.name=this.name,t.type=this.type,t.wallName=this.wallName,t.mirror=1==this.mirror?1:0,t.x=this.realX,t.y=this.realY,t.z=this.realZ,t.rotationZ=this.realRotationZ,t.width=this.realWidth,t.height=this.realHeight,t.length=this.realLength,t.archHeight=this.archHeight,t},e.prototype.clone=function(){var t=new e(this.type);return t.mirror=this.mirror,t.realX=this.realX,t.realY=this.realY,t.realZ=this.realZ,t.realRotationZ=this.realRotationZ,t.realWidth=this.realWidth,t.realHeight=this.realHeight,t.realLength=this.realLength,t.archHeight=this.archHeight,t.realScaleX=this.realScaleX,t.realScaleX=this.realScaleX,t.realScaleZ=this.realScaleZ,t},e.loadData=function(t){var n=t.type,o=new e(n);return o.name=t.name,o.wallName=t.wallName,o.mirror=Boolean(t.mirror),o.realX=t.x,o.realY=t.y,o.realZ=t.z,o.realRotationZ=t.rotationZ,o.realWidth=t.width,o.realHeight=t.height,o.realLength=t.hasOwnProperty("length")?t.length:0,o.archHeight=t.archHeight,o},e.prototype.getBoudaryPolygon=function(){var t=new p.a,e=this.realWidth,n=2*this.realLength;return t.addPointXY(-.5*e,-.5*n),t.addPointXY(.5*e,-.5*n),t.addPointXY(.5*e,.5*n),t.addPointXY(-.5*e,.5*n),t.clone()},e}(o.a);y.DEFAULT_OPENING_WIDTH=10,y.MIN_WIDTH=20,y.MIN_HEIGHT=20,y.MIN_LENGTH=10,y.DEFAULT_HOLE_WIDTH=100,y.DEFAULT_HOLE_HEIGHT=220,y.DEFAULT_DOOR_WIDTH=100,y.DEFAULT_DOOR_HEIGHT=220,y.DEFAULT_WINDOW_WIDTH=80,y.DEFAULT_WINDOW_HEIGHT=100},ZCEW:function(t,e,n){"use strict";var o=n("/oeL"),i=n("ExGp"),r=n("vgYD");n.d(e,"a",function(){return a});var s=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=function(t){function e(n,o){var i=t.call(this,n,o)||this;return i.radius=2,i.colorStyle=e.YELLOW_BLACK_NONE,i.backUpColor=r.a.YELLOW_BUTTON_UP,i.backOverColor=r.a.YELLOW_BUTTON_OVER,i.backDownColor=r.a.YELLOW_BUTTON_OVER,i.backUpAlpha=1,i.backOverAlpha=1,i.backDownAlpha=1,i.border="true",i.strokeUpColor=r.a.YELLOW_BUTTON_UP,i.strokeOverColor=r.a.YELLOW_BUTTON_OVER,i.strokeDownColor=r.a.YELLOW_BUTTON_OVER,i.strokeUpAlpha=0,i.strokeOverAlpha=0,i.strokeDownAlpha=0,i.textUpColor=r.a.FONT4,i.textOverColor=r.a.FONT5,i.textDownColor=r.a.FONT5,i.textSize=12,i.label="",i}return s(e,t),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.updateComponentProperty(),this.labelDom=this.labelRef.nativeElement,"true"==this.border&&(this.renderer.setStyle(this.dom,"border-radius",this.radius+"px"),this.renderer.setStyle(this.dom,"border-width","1px"),this.renderer.setStyle(this.dom,"border-style","solid")),this.renderer.setStyle(this.dom,"vertical-align","middle"),this.renderer.setStyle(this.dom,"font-size",this.textSize+"px"),this.renderer.setStyle(this.labelDom,"line-height",this._height),this.setColorStyle(this.colorStyle),this.upStyle()},Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this.renderer.setStyle(this.dom,"height",t),this.labelDom&&this.renderer.setStyle(this.labelDom,"line-height",t)},enumerable:!0,configurable:!0}),e.prototype.setColorStyle=function(t){switch(t){case e.YELLOW_BLACK_NONE:this.backUpColor=r.a.YELLOW_BUTTON_UP,this.backOverColor=r.a.YELLOW_BUTTON_OVER,this.backDownColor=r.a.YELLOW_BUTTON_OVER,this.textUpColor=r.a.FONT4,this.textOverColor=r.a.FONT5,this.textDownColor=r.a.FONT5;break;case e.WHITE_GRAY_NONE:this.backUpColor=r.a.WHITE,this.backOverColor=14079961,this.backDownColor=14079961,this.backUpAlpha=1,this.backOverAlpha=1,this.backDownAlpha=1,this.strokeUpColor=0,this.strokeOverColor=0,this.strokeDownColor=0,this.strokeUpAlpha=0,this.strokeOverAlpha=0,this.strokeDownAlpha=0,this.textUpColor=3947580,this.textOverColor=3947580,this.textDownColor=3947580;break;case e.TRANSPARENT_BLACK_BLUE:this.backUpColor=0,this.backOverColor=0,this.backDownColor=0,this.backUpAlpha=0,this.backOverAlpha=0,this.backDownAlpha=0,this.strokeUpColor=r.a.BLUE,this.strokeOverColor=r.a.BLUE,this.strokeDownColor=r.a.BLUE,this.strokeUpAlpha=0,this.strokeOverAlpha=1,this.strokeDownAlpha=1,this.textUpColor=r.a.FONT,this.textOverColor=r.a.BLUE,this.textDownColor=r.a.BLUE;break;case e.TRANSPARENT_YELLOW_NONE:this.backUpColor=0,this.backOverColor=0,this.backDownColor=0,this.backUpAlpha=0,this.backOverAlpha=0,this.backDownAlpha=0,this.textUpColor=16770099,this.textOverColor=16770099,this.textDownColor=16755217;break;case e.TRANSPARENT_WHITE_WHITE:this.backUpColor=0,this.backOverColor=0,this.backDownColor=0,this.backUpAlpha=0,this.backOverAlpha=0,this.backDownAlpha=0,this.strokeUpColor=r.a.WHITE,this.strokeOverColor=r.a.WHITE,this.strokeDownColor=r.a.WHITE,this.strokeUpAlpha=1,this.strokeOverAlpha=1,this.strokeDownAlpha=1,this.textUpColor=r.a.FONT5,this.textOverColor=r.a.FONT5,this.textDownColor=r.a.FONT3;break;case e.TRANSPARENT_GRAY_NONE:this.backUpColor=0,this.backOverColor=0,this.backDownColor=0,this.backUpAlpha=0,this.backOverAlpha=0,this.backDownAlpha=0,this.textUpColor=6710886,this.textOverColor=6710886,this.textDownColor=3355443;break;case e.WHITE_BLACK_GRAY:this.backUpColor=r.a.WHITE,this.backOverColor=r.a.GRAY,this.backDownColor=r.a.GRAY,this.backUpAlpha=1,this.backOverAlpha=1,this.backDownAlpha=1,this.strokeUpColor=14935011,this.strokeOverColor=14935011,this.strokeDownColor=14935011,this.strokeUpAlpha=1,this.strokeOverAlpha=1,this.strokeDownAlpha=1,this.textUpColor=r.a.FONT,this.textOverColor=r.a.FONT,this.textDownColor=r.a.FONT}},e.prototype.upStyle=function(){this.renderer.setStyle(this.dom,"background-color",r.a.toRGBAstring(this.backUpColor,this.backUpAlpha)),this.renderer.setStyle(this.labelDom,"color",r.a.toString(this.textUpColor)),"true"==this.border&&this.renderer.setStyle(this.dom,"border-color",r.a.toRGBAstring(this.strokeUpColor,this.strokeUpAlpha))},e.prototype.overStyle=function(){this.renderer.setStyle(this.dom,"background-color",r.a.toRGBAstring(this.backOverColor,this.backOverAlpha)),this.renderer.setStyle(this.labelDom,"color",r.a.toString(this.textOverColor)),"true"==this.border&&this.renderer.setStyle(this.dom,"border-color",r.a.toRGBAstring(this.strokeOverColor,this.strokeOverAlpha))},e.prototype.downStyle=function(){this.renderer.setStyle(this.dom,"background-color",r.a.toRGBAstring(this.backDownColor,this.backDownAlpha)),this.renderer.setStyle(this.labelDom,"color",r.a.toString(this.textDownColor)),"true"==this.border&&this.renderer.setStyle(this.dom,"border-color",r.a.toRGBAstring(this.strokeDownColor,this.strokeDownAlpha))},e.ctorParameters=function(){return[{type:o.Q},{type:o._18}]},e}(i.a);a.YELLOW_BLACK_NONE="1",a.WHITE_GRAY_NONE="2",a.TRANSPARENT_BLACK_BLUE="3",a.TRANSPARENT_YELLOW_NONE="4",a.TRANSPARENT_WHITE_WHITE="5",a.TRANSPARENT_GRAY_NONE="6",a.WHITE_BLACK_GRAY="7"},Zkyf:function(t,e,n){"use strict";n.d(e,"a",function(){return o}),(function(){function t(){}return Object.defineProperty(t,"cursor",{get:function(){return t._cursor},set:function(e){t._cursor=e,document.body.style.cursor=e},enumerable:!0,configurable:!0}),t.setDomCursor=function(t,e){t.style.cursor=e},t}())._cursor="auto";var o=function(){function t(){}return t.rotationArrowCursor=function(e){return e>45&&e<135?t.HARROW:e>-135&&e<-45?t.HARROW:t.VARROW},t}();o.AUTO="auto",o.ARROW="default",o.BUTTON="pointer",o.IBEAM="pointer",o.HAND="url(assets/cursor/hand.cur) , default",o.DRAW="crosshair",o.DOT="move",o.HARROW="e-resize",o.VARROW="n-resize",o.MEASURE="url(assets/cursor/measure.png) , default"},ZlQW:function(t,e,n){"use strict";function o(t){return s._12(0,[s._13(402653184,1,{openingWidthInput:0}),(t()(),s._15(0,null,null,11,"div",[["class","bg"]],null,null,null,null,null)),(t()(),s._14(null,["\n    "])),(t()(),s._15(0,null,null,8,"div",[["class","editArea"]],null,null,null,null,null)),(t()(),s._14(null,["\n        "])),(t()(),s._14(null,["\n        "])),(t()(),s._15(0,null,null,1,"div",[["class","label"]],null,null,null,null,null)),(t()(),s._14(null,["长度"])),(t()(),s._14(null,["\n        "])),(t()(),s._15(16777216,null,null,1,"virtual-input",[["class","virtualInput"],["height","19px"],["width","60px"]],null,[[null,"touchstart"],[null,"touchmove"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==s._16(t,10)._touchMove(n)&&o}if("touchstart"===e){o=!1!==i.showOpeningWidthSetting()&&o}return o},l.a,l.b)),s._17(4308992,[[1,4],["openingWidthInput",4]],0,u.a,[s.Q,s._18],{width:[0,"width"],height:[1,"height"]},null),(t()(),s._14(null,["\n    "])),(t()(),s._14(null,["\n"]))],function(t,e){t(e,10,0,"60px","19px")},null)}function i(t){return s._12(0,[(t()(),s._15(16777216,null,null,1,"opening-setting-bar",[],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==s._16(t,1)._touchMove(n)&&o}return o},o,c)),s._17(4308992,null,0,a.a,[s.Q,s._18],null,null)],function(t,e){t(e,1,0)},null)}var r=n("Tgrg"),s=n("/oeL"),a=n("kUfx"),l=n("15L3"),u=n("oFVN");n.d(e,"b",function(){return c}),e.a=o;var h=[r.a],c=s._11({encapsulation:0,styles:h,data:{}});s._19("opening-setting-bar",a.a,i,{position:"position",width:"width",height:"height",left:"left",top:"top",right:"right",bottom:"bottom",visible:"visible",alpha:"alpha",depth:"depth",rotation:"rotation",scalex:"scalex",scaley:"scaley",tooltip:"tooltip",backgroundcolor:"backgroundcolor",filter:"filter",buttonMode:"buttonMode"},{},[])},ZvbM:function(t,e,n){"use strict";var o=n("yOTB"),i=n("oWBL"),r=n("Pu9O"),s=n("byMr"),a=n("lbiv"),l=n("bv23"),u=n("gILL"),h=n("hSl8"),c=n("aJ2T");n.d(e,"a",function(){return d});var p=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),d=function(t){function e(n,o){var i=t.call(this,n,o)||this;return i.name="",i._realX=0,i._realY=0,i._realZ=0,i._realWidth=0,i._realLength=0,i._realHeight=0,i._realRotationZ=0,i._realScaleX=0,i._realScaleY=0,i._realScaleZ=0,i._tmpPoint=new r.a,i.scene=null,i.polygon=null,i._boundPolygon=null,i._updateControl=null,i.hasMouseDown=!1,i.touchStartPoint=new r.a,i.scene=e.MSCENE,i.name=a.a.createPureUID(),i.polygon=new s.a,i._boundPolygon=new s.a,i.initUpdateControl(),i.realX=0,i.realY=0,i.realZ=0,i.realWidth=0,i.realLength=0,i.realHeight=0,i.realRotationZ=0,i.realScaleX=1,i.realScaleY=1,i.realScaleZ=1,i.setPolygonChangeFlag(!0),i}return p(e,t),Object.defineProperty(e.prototype,"tagName",{get:function(){return"Object2D"},enumerable:!0,configurable:!0}),e.prototype.onAdd=function(){t.prototype.onAdd.call(this),0==h.a.isMobile?this.mouseEnable=!0:this.touchEnable=!0},e.prototype.onRemove=function(){t.prototype.onRemove.call(this)},e.prototype.mouseOver=function(e){t.prototype.mouseOver.call(this,e)},e.prototype.mouseOut=function(e){t.prototype.mouseOut.call(this,e)},e.prototype.leftMouseDown=function(e){t.prototype.leftMouseDown.call(this,e),this.hasMouseDown=!0},e.prototype.leftMouseUp=function(e){1==this.hasMouseDown&&t.prototype.leftMouseUp.call(this,e),this.hasMouseDown=!1},e.prototype.touchStart=function(e){if(t.prototype.touchStart.call(this,e),1==e.touches.length){var n=e.touches[0];this.touchStartPoint.setTo(n.clientX,n.clientY)}this.hasMouseDown=!0},e.prototype.touchEnd=function(e){if(1==this.hasMouseDown&&(t.prototype.touchEnd.call(this,e),1==e.changedTouches.length)){var n=e.changedTouches[0];1==u.a.isPoint2DEqual(this.touchStartPoint,new r.a(n.clientX,n.clientY),3)&&this.touchClick(e)}this.hasMouseDown=!1},e.prototype.touchClick=function(t){},e.prototype.focusIn=function(){},e.prototype.focusOut=function(){},e.prototype.setRealPositionTo=function(t){this.realX=t.x,this.realY=t.y},e.prototype.initUpdateControl=function(){this._updateControl=new o.a,this._updateControl.addTag(o.a.TAG_POSITION),this._updateControl.addTag(o.a.TAG_POLYGON),this._updateControl.addTag(o.a.TAG_BOUNDARY,o.a.TAG_POSITION,o.a.TAG_POLYGON)},e.prototype.setPositionChangeFlag=function(t){void 0===t&&(t=!0),this._updateControl.setValue(o.a.TAG_POSITION,t)},e.prototype.setPolygonChangeFlag=function(t){void 0===t&&(t=!0),this._updateControl.setValue(o.a.TAG_POLYGON,t)},Object.defineProperty(e.prototype,"boundPolygon",{get:function(){if(this._updateControl.getValue(o.a.TAG_BOUNDARY)){this._boundPolygon=new s.a;for(var t=0;t<this.polygon.pointLength;t++)this._boundPolygon.addPoint(this.localToSceneMatrix.transformPoint(this.polygon.getPointAt(t)));this._boundPolygon.pointLength>0&&this._updateControl.setValue(o.a.TAG_BOUNDARY,!1)}return this._boundPolygon},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this.polygon.clear(),this._boundPolygon.clear()},e.prototype.doesBoundPolygonContaineVector2D=function(t,e){return this.boundPolygon.containsInXY(t,e)},Object.defineProperty(e.prototype,"localToSceneMatrix",{get:function(){var t=new l.a;return t.rotate(this.realRotationZ/180*Math.PI),t.translate(this.realX,this.realY),t},enumerable:!0,configurable:!0}),e.prototype.localToScene=function(t){return this.localToSceneMatrix.transformPoint(t)},Object.defineProperty(e.prototype,"sceneToLocalMatrix",{get:function(){var t=new l.a;return t.translate(-this.realX,-this.realY),t.rotate(-this.realRotationZ/180*Math.PI),t},enumerable:!0,configurable:!0}),e.prototype.sceneToLocal=function(t){return this.sceneToLocalMatrix.transformPoint(t)},e.prototype.drawPolygon=function(){if(!(this.polygon.pointLength<3)){this.graphics.moveTo(this.polygon.points[0].x,this.polygon.points[0].y);for(var t=1;t<this.polygon.pointLength;t++)this.graphics.lineTo(this.polygon.points[t].x,this.polygon.points[t].y);this.graphics.lineTo(this.polygon.points[0].x,this.polygon.points[0].y)}},e.prototype.draw=function(){},Object.defineProperty(e.prototype,"realX",{get:function(){return this._realX},set:function(t){this._realX=t,this.setPositionChangeFlag(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"realY",{get:function(){return this._realY},set:function(t){this._realY=t,this.setPositionChangeFlag(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"realZ",{get:function(){return this._realZ},set:function(t){u.a.isNumberEqual(t,0)&&(t=0),this._realZ=t,this.setPositionChangeFlag(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"realRotationZ",{get:function(){return this._realRotationZ},set:function(t){this._realRotationZ=u.a.formatAngle(t),this.setPositionChangeFlag(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"realScaleX",{get:function(){return this._realScaleX},set:function(t){t>e.MAX_SCALE?this._realScaleX=e.MAX_SCALE:t<e.MIN_SCALE?this._realScaleX=e.MIN_SCALE:this._realScaleX=t,this.setPolygonChangeFlag(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"realScaleY",{get:function(){return this._realScaleY},set:function(t){t>e.MAX_SCALE?this._realScaleY=e.MAX_SCALE:t<e.MIN_SCALE?this._realScaleY=e.MIN_SCALE:this._realScaleY=t,this.setPolygonChangeFlag(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"realScaleZ",{get:function(){return this._realScaleZ},set:function(t){t>e.MAX_SCALE?this._realScaleZ=e.MAX_SCALE:t<e.MIN_SCALE?this._realScaleZ=e.MIN_SCALE:this._realScaleZ=t,this.setPolygonChangeFlag(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"realWidth",{get:function(){return this._realWidth},set:function(t){this._realWidth=t,this.setPolygonChangeFlag(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"realLength",{get:function(){return this._realLength},set:function(t){this._realLength=t,this.setPolygonChangeFlag(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"realHeight",{get:function(){return this._realHeight},set:function(t){this._realHeight=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"viewX",{get:function(){this._tmpPoint.setTo(this.x,this.y);var t=this.scene.localToGlobal(this._tmpPoint);return this.scene.viewPort.globalToLocal(t).x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"viewY",{get:function(){this._tmpPoint.setTo(this.x,this.y);var t=this.scene.localToGlobal(this._tmpPoint);return this.scene.viewPort.globalToLocal(t).y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"globalPoint",{get:function(){return this._tmpPoint.setTo(0,0),this.localToGlobal(this._tmpPoint)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"globalX",{get:function(){return this._tmpPoint.setTo(this.x,this.y),this.scene.localToGlobal(this._tmpPoint).x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"globalY",{get:function(){return this._tmpPoint.setTo(this.x,this.y),this.scene.localToGlobal(this._tmpPoint).y},enumerable:!0,configurable:!0}),e.prototype.dumpData=function(){return new Object},Object.defineProperty(e.prototype,"focused",{get:function(){return c.a.inst.focusTarget==this},enumerable:!0,configurable:!0}),e}(i.a);d.MSCENE=null,d.MAX_SCALE=4,d.MIN_SCALE=.25},aJ2T:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){}return Object.defineProperty(t,"inst",{get:function(){return null==t._instance&&(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"focusTarget",{get:function(){return this._focusTarget},enumerable:!0,configurable:!0}),t.prototype.focus=function(t){this.unfocus(),this._focusTarget=t,this._focusTarget.focusIn()},t.prototype.unfocus=function(){null!=this._focusTarget&&this._focusTarget.focusOut(),this._focusTarget=null},t}()},"aR8+":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){}return t}()},aeJW:function(t,e,n){"use strict";function o(t){return s._12(0,[s._13(402653184,1,{titleBg:0}),s._13(402653184,2,{title:0}),s._13(402653184,3,{targetInput:0}),s._13(402653184,4,{bluetoothButton:0}),s._13(402653184,5,{key0:0}),s._13(402653184,6,{key1:0}),s._13(402653184,7,{key2:0}),s._13(402653184,8,{key3:0}),s._13(402653184,9,{key4:0}),s._13(402653184,10,{key5:0}),s._13(402653184,11,{key6:0}),s._13(402653184,12,{key7:0}),s._13(402653184,13,{key8:0}),s._13(402653184,14,{key9:0}),s._13(402653184,15,{removeKey:0}),s._13(402653184,16,{confirmKey:0}),(t()(),s._15(0,[[1,0],["titleBg",1]],null,13,"div",[["class","titleBg"]],null,null,null,null,null)),(t()(),s._14(null,["\n    "])),(t()(),s._14(null,["\n    "])),(t()(),s._15(0,[[2,0],["title",1]],null,1,"div",[["class","title"]],null,null,null,null,null)),(t()(),s._14(null,["",""])),(t()(),s._14(null,["\n    "])),(t()(),s._14(null,["\n    "])),(t()(),s._15(16777216,null,null,1,"virtual-input",[["class","virtualInput"],["textalign","left"]],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==s._16(t,24)._touchMove(n)&&o}return o},a.a,a.b)),s._17(4308992,[[3,4],["input",4]],0,l.a,[s.Q,s._18],{textalign:[0,"textalign"]},null),(t()(),s._14(null,["\n    "])),(t()(),s._14(null,["\n    "])),(t()(),s._15(16777216,null,null,1,"color-button",[["class","bluetoothButton"],["colorStyle","1"],["label","测量"],["textSize","16"]],null,[[null,"touchstart"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchend"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==s._16(t,28)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,28).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,28).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,28).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,28).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,28).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,28).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,28).touchEnd(n)&&o}if("touchstart"===e){o=!1!==i.blueTooth()&&o}return o},h.a,h.b)),s._17(4308992,[[4,4],["bluetoothButton",4]],0,c.a,[s.Q,s._18],{colorStyle:[0,"colorStyle"],textSize:[1,"textSize"],label:[2,"label"]},null),(t()(),s._14(null,["\n"])),(t()(),s._14(null,["\n\n"])),(t()(),s._14(null,["\n"])),(t()(),s._15(16777216,null,null,1,"color-button",[["border","false"],["class","leftNumberButton"],["colorStyle","2"],["label","1"],["radius","0"],["textSize","32"]],null,[[null,"touchstart"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchend"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==s._16(t,33)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,33).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,33).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,33).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,33).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,33).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,33).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,33).touchEnd(n)&&o}if("touchstart"===e){o=!1!==i.add("1")&&o}return o},h.a,h.b)),s._17(4308992,[[6,4],["key1",4]],0,c.a,[s.Q,s._18],{radius:[0,"radius"],colorStyle:[1,"colorStyle"],border:[2,"border"],textSize:[3,"textSize"],label:[4,"label"]},null),(t()(),s._14(null,["\n"])),(t()(),s._15(16777216,null,null,1,"color-button",[["border","false"],["class","centerNumberButton"],["colorStyle","2"],["label","2"],["radius","0"],["textSize","32"]],null,[[null,"touchstart"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchend"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==s._16(t,36)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,36).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,36).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,36).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,36).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,36).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,36).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,36).touchEnd(n)&&o}if("touchstart"===e){o=!1!==i.add("2")&&o}return o},h.a,h.b)),s._17(4308992,[[7,4],["key2",4]],0,c.a,[s.Q,s._18],{radius:[0,"radius"],colorStyle:[1,"colorStyle"],border:[2,"border"],textSize:[3,"textSize"],label:[4,"label"]},null),(t()(),s._14(null,["\n"])),(t()(),s._15(16777216,null,null,1,"color-button",[["border","false"],["class","rightNumberButton"],["colorStyle","2"],["label","3"],["radius","0"],["textSize","32"]],null,[[null,"touchstart"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchend"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==s._16(t,39)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,39).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,39).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,39).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,39).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,39).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,39).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,39).touchEnd(n)&&o}if("touchstart"===e){o=!1!==i.add("3")&&o}return o},h.a,h.b)),s._17(4308992,[[8,4],["key3",4]],0,c.a,[s.Q,s._18],{radius:[0,"radius"],colorStyle:[1,"colorStyle"],border:[2,"border"],textSize:[3,"textSize"],label:[4,"label"]},null),(t()(),s._14(null,["\n"])),(t()(),s._15(16777216,null,null,1,"color-button",[["border","false"],["class","leftNumberButton"],["colorStyle","2"],["label","4"],["radius","0"],["textSize","32"]],null,[[null,"touchstart"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchend"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==s._16(t,42)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,42).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,42).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,42).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,42).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,42).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,42).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,42).touchEnd(n)&&o}if("touchstart"===e){o=!1!==i.add("4")&&o}return o},h.a,h.b)),s._17(4308992,[[9,4],["key4",4]],0,c.a,[s.Q,s._18],{radius:[0,"radius"],colorStyle:[1,"colorStyle"],border:[2,"border"],textSize:[3,"textSize"],label:[4,"label"]},null),(t()(),s._14(null,["\n"])),(t()(),s._15(16777216,null,null,1,"color-button",[["border","false"],["class","centerNumberButton"],["colorStyle","2"],["label","5"],["radius","0"],["textSize","32"]],null,[[null,"touchstart"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchend"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==s._16(t,45)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,45).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,45).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,45).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,45).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,45).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,45).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,45).touchEnd(n)&&o}if("touchstart"===e){o=!1!==i.add("5")&&o}return o},h.a,h.b)),s._17(4308992,[[10,4],["key5",4]],0,c.a,[s.Q,s._18],{radius:[0,"radius"],colorStyle:[1,"colorStyle"],border:[2,"border"],textSize:[3,"textSize"],label:[4,"label"]},null),(t()(),s._14(null,["\n"])),(t()(),s._15(16777216,null,null,1,"color-button",[["border","false"],["class","rightNumberButton"],["colorStyle","2"],["label","6"],["radius","0"],["textSize","32"]],null,[[null,"touchstart"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchend"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==s._16(t,48)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,48).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,48).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,48).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,48).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,48).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,48).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,48).touchEnd(n)&&o}if("touchstart"===e){o=!1!==i.add("6")&&o}return o},h.a,h.b)),s._17(4308992,[[11,4],["key6",4]],0,c.a,[s.Q,s._18],{radius:[0,"radius"],colorStyle:[1,"colorStyle"],border:[2,"border"],textSize:[3,"textSize"],label:[4,"label"]},null),(t()(),s._14(null,["\n"])),(t()(),s._15(16777216,null,null,1,"color-button",[["border","false"],["class","leftNumberButton"],["colorStyle","2"],["label","7"],["radius","0"],["textSize","32"]],null,[[null,"touchstart"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchend"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==s._16(t,51)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,51).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,51).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,51).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,51).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,51).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,51).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,51).touchEnd(n)&&o}if("touchstart"===e){o=!1!==i.add("7")&&o}return o},h.a,h.b)),s._17(4308992,[[12,4],["key7",4]],0,c.a,[s.Q,s._18],{radius:[0,"radius"],colorStyle:[1,"colorStyle"],border:[2,"border"],textSize:[3,"textSize"],label:[4,"label"]},null),(t()(),s._14(null,["\n"])),(t()(),s._15(16777216,null,null,1,"color-button",[["border","false"],["class","centerNumberButton"],["colorStyle","2"],["label","8"],["radius","0"],["textSize","32"]],null,[[null,"touchstart"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchend"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==s._16(t,54)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,54).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,54).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,54).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,54).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,54).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,54).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,54).touchEnd(n)&&o}if("touchstart"===e){o=!1!==i.add("8")&&o}return o},h.a,h.b)),s._17(4308992,[[13,4],["key8",4]],0,c.a,[s.Q,s._18],{radius:[0,"radius"],colorStyle:[1,"colorStyle"],border:[2,"border"],textSize:[3,"textSize"],label:[4,"label"]},null),(t()(),s._14(null,["\n"])),(t()(),s._15(16777216,null,null,1,"color-button",[["border","false"],["class","rightNumberButton"],["colorStyle","2"],["label","9"],["radius","0"],["textSize","32"]],null,[[null,"touchstart"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchend"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==s._16(t,57)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,57).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,57).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,57).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,57).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,57).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,57).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,57).touchEnd(n)&&o}if("touchstart"===e){o=!1!==i.add("9")&&o}return o},h.a,h.b)),s._17(4308992,[[14,4],["key9",4]],0,c.a,[s.Q,s._18],{radius:[0,"radius"],colorStyle:[1,"colorStyle"],border:[2,"border"],textSize:[3,"textSize"],label:[4,"label"]},null),(t()(),s._14(null,["\n"])),(t()(),s._15(16777216,null,null,1,"icon-button",[["bgColor","#FFFFFF"],["bgDownColor","#EEEEEE"],["class","removeButton"]],null,[[null,"touchstart"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchend"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==s._16(t,60)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,60).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,60).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,60).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,60).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,60).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,60).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,60).touchEnd(n)&&o}if("touchstart"===e){o=!1!==i.remove()&&o}return o},p.a,p.b)),s._17(4308992,[[15,4],["removeKey",4]],0,d.a,[s.Q,s._18],{iconUp:[0,"iconUp"],iconDown:[1,"iconDown"],bgColor:[2,"bgColor"],bgDownColor:[3,"bgDownColor"]},null),(t()(),s._14(null,["\n"])),(t()(),s._15(16777216,null,null,1,"color-button",[["border","false"],["class","centerNumberButton"],["colorStyle","2"],["label","0"],["radius","0"],["textSize","32"]],null,[[null,"touchstart"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchend"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==s._16(t,63)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,63).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,63).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,63).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,63).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,63).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,63).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,63).touchEnd(n)&&o}if("touchstart"===e){o=!1!==i.add("0")&&o}return o},h.a,h.b)),s._17(4308992,[[5,4],["key0",4]],0,c.a,[s.Q,s._18],{radius:[0,"radius"],colorStyle:[1,"colorStyle"],border:[2,"border"],textSize:[3,"textSize"],label:[4,"label"]},null),(t()(),s._14(null,["\n"])),(t()(),s._15(16777216,null,null,1,"icon-button",[["bgColor","#FFE433"],["bgDownColor","#FFE433"],["class","confirmButton"]],null,[[null,"touchstart"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchend"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==s._16(t,66)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,66).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,66).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,66).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,66).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,66).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,66).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,66).touchEnd(n)&&o}if("touchstart"===e){o=!1!==i.confirm()&&o}return o},p.a,p.b)),s._17(4308992,[[16,4],["confirmKey",4]],0,d.a,[s.Q,s._18],{iconUp:[0,"iconUp"],iconDown:[1,"iconDown"],bgColor:[2,"bgColor"],bgDownColor:[3,"bgDownColor"]},null)],function(t,e){var n=e.component;t(e,24,0,"left");t(e,28,0,"1","16","测量");t(e,33,0,"0","2","false","32","1");t(e,36,0,"0","2","false","32","2");t(e,39,0,"0","2","false","32","3");t(e,42,0,"0","2","false","32","4");t(e,45,0,"0","2","false","32","5");t(e,48,0,"0","2","false","32","6");t(e,51,0,"0","2","false","32","7");t(e,54,0,"0","2","false","32","8");t(e,57,0,"0","2","false","32","9");t(e,60,0,n.removeIconUp,n.removeIconDown,"#FFFFFF","#EEEEEE");t(e,63,0,"0","2","false","32","0");t(e,66,0,n.confirmIconUp,n.confirmIconDown,"#FFE433","#FFE433")},function(t,e){t(e,20,0,e.component.titleText)})}function i(t){return s._12(0,[(t()(),s._15(16777216,null,null,1,"virtual-number-board",[],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==s._16(t,1)._touchMove(n)&&o}return o},o,g)),s._17(4308992,null,0,u.a,[s.Q,s._18],null,null)],function(t,e){t(e,1,0)},null)}var r=n("Upsx"),s=n("/oeL"),a=n("15L3"),l=n("oFVN"),u=n("+DHO"),h=n("3kKB"),c=n("ZCEW"),p=n("TzOb"),d=n("kVR7");n.d(e,"b",function(){return g}),e.a=o;var f=[r.a],g=s._11({encapsulation:0,styles:f,data:{}});s._19("virtual-number-board",u.a,i,{position:"position",width:"width",height:"height",left:"left",top:"top",right:"right",bottom:"bottom",visible:"visible",alpha:"alpha",depth:"depth",rotation:"rotation",scalex:"scalex",scaley:"scaley",tooltip:"tooltip",backgroundcolor:"backgroundcolor",filter:"filter",buttonMode:"buttonMode"},{},[])},bQVa:function(t,e,n){"use strict";var o=n("/oeL"),i=n("ExGp"),r=n("vgYD");n.d(e,"a",function(){return a});var s=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.label="",o.iconOn="assets/components/slidebox/on_3x.png",o.iconOff="assets/components/slidebox/off_3x.png",o.onColor=r.a.toString(r.a.FONT),o.offColor=r.a.toString(r.a.FONT),o.textSize=12,o}return s(e,t),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.updateComponentProperty(),this.slide=this.slideRef.nativeElement,this.slideLabel=this.slideLabelRef.nativeElement,this.renderer.setStyle(this.slideLabel,"line-height",this._height),this.renderer.setStyle(this.slideLabel,"vertical-align","middle"),this.renderer.setStyle(this.slideLabel,"font-size",this.textSize+"px"),this.upStyle()},Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this.renderer.setStyle(this.dom,"height",t),this.slideLabel&&this.renderer.setStyle(this.slideLabel,"line-height",t)},enumerable:!0,configurable:!0}),e.prototype.touchStart=function(t){void 0===t&&(t=null),this.selected=!this.selected},e.prototype.upStyle=function(){this.renderer.setStyle(this.slide,"background-image","url("+this.iconOff+")"),this.renderer.setStyle(this.slideLabel,"color",this.offColor),t.prototype.upStyle.call(this)},e.prototype.downStyle=function(){this.renderer.setStyle(this.slide,"background-image","url("+this.iconOn+")"),this.renderer.setStyle(this.slideLabel,"color",this.onColor),t.prototype.downStyle.call(this)},e.ctorParameters=function(){return[{type:o.Q},{type:o._18}]},e}(i.a)},biAJ:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null),this.label="",this.callback=null,this.thisObj=null,this.label=t,this.callback=e,this.thisObj=n}return t}()},bv23:function(t,e,n){"use strict";var o=n("Pu9O");n.d(e,"a",function(){return i});var i=function(){function t(t){void 0===t&&(t=[]),this.propertys=[],this.propertys=t}return t.prototype.translate=function(t,e){var n=new r;n.tx+=t,n.ty+=e,this.propertys.push(n)},t.prototype.scale=function(t,e){var n=new r;n.a*=t,n.d*=e,this.propertys.push(n)},t.prototype.rotate=function(t){var e=new r;e.angle+=t,e.a=Math.cos(e.angle),e.b=Math.sin(e.angle),e.c=-Math.sin(e.angle),e.d=Math.cos(e.angle),this.propertys.push(e)},t.prototype.transformPoint=function(t){for(var e=t.clone(),n=0;n<this.propertys.length;n++)e=this.propertys[n].transformPoint(e);return e},t.prototype.deltaTransformPoint=function(t){for(var e=t.clone(),n=0;n<this.propertys.length;n++)e=this.propertys[n].deltaTransformPoint(e);return e},t.prototype.identity=function(){this.propertys=[]},t.prototype.concat=function(e){return new t(this.propertys.concat(e.propertys))},t.prototype.clone=function(){return new t(this.propertys)},t}(),r=function(){function t(t,e,n,o,i,r){void 0===t&&(t=1),void 0===e&&(e=0),void 0===n&&(n=0),void 0===o&&(o=1),void 0===i&&(i=0),void 0===r&&(r=0),this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this.angle=0,this.a=t,this.b=e,this.c=n,this.d=o,this.tx=i,this.ty=r}return t.prototype.transformPoint=function(t){var e=this.a*t.x+this.c*t.y+this.tx,n=this.b*t.x+this.d*t.y+this.ty;return new o.a(e,n)},t.prototype.deltaTransformPoint=function(t){var e=this.a*t.x+this.c*t.y,n=this.b*t.x+this.d*t.y;return new o.a(e,n)},t}()},byMr:function(t,e,n){"use strict";var o=n("Pu9O"),i=n("gILL"),r=n("vP7T"),s=n("gF12"),a=n("oLUs"),l=n("bv23"),u=n("7Pn7");n.d(e,"a",function(){return h});var h=function(){function t(){this.points=null,this._isHole=!1,this._holes=null,this.edgeTypes=[],this.mark="",this.containsPoint=new o.a,this.points=[],this.mark=null,this._holes=[]}return t.prototype.clear=function(){this.points.length=0,this._isHole=!1,this._holes.length=0,this.mark=null,this.edgeTypes.length=0},t.prototype.setEdgeType=function(t,e){t<=this.vertexCount&&(this.edgeTypes[t]=e)},t.prototype.getEdgeType=function(e){return e=a.a.getModIndex(e,this.vertexCount),this.edgeTypes.length>e?this.edgeTypes[e]:t.TYPE_NORMAL},t.prototype.getChangeTypeIndex=function(){for(var t=this.getEdgeType(0),e=1;e<this.vertexCount;e++)if(t!=this.getEdgeType(e))return e;return-1},t.prototype.isInflectionPoint=function(t){if(this.vertexCount<=3)return!0;var e=this.getPointAt_EX(t-1),n=this.getPointAt_EX(t),o=this.getPointAt_EX(t+1);return!i.a.isPointOnSegment_EX(e,n,o)},Object.defineProperty(t.prototype,"pointLength",{get:function(){return this.vertexCount},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"holes",{get:function(){return this._holes},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"holeCount",{get:function(){return this._holes.length},enumerable:!0,configurable:!0}),t.prototype.addHole=function(t){this._holes.push(t)},t.prototype.addPoint=function(e,n){void 0===n&&(n=!1),n?this.points.unshift(new o.a(e.x,e.y)):(this.addVertexXY(e.x,e.y),this.edgeTypes.push(t.TYPE_NORMAL))},t.prototype.addVertexXY=function(t,e){this.points.push(new o.a(t,e))},t.prototype.addVertex=function(t){this.addVertexXY(t.x,t.y)},t.prototype.addPoints=function(t){this.clear();for(var e,n=0,o=t;n<o.length;n++)e=o[n],this.addPoint(e)},Object.defineProperty(t.prototype,"vertices",{get:function(){return this.points},enumerable:!0,configurable:!0}),t.prototype.getVertexAt=function(t){return this.points[t]},t.prototype.getVertexPreAt=function(t){return this.getVertexAt(i.a.preIndex(t,this.vertexCount))},t.prototype.getVertexNextAt=function(t){return this.getVertexAt(i.a.nextIndex(t,this.vertexCount))},t.prototype.getPointAt=function(t){return this.points[t]},t.prototype.getPointAt_EX=function(t){return t%=this.vertexCount,t<0&&(t+=this.vertexCount),this.points[t]},t.prototype.getEdgeAt=function(t){return this.getPointAt_EX(t+1).subtract(this.getPointAt_EX(t))},t.prototype.addPointAt=function(e,n){return!(n>=this.vertexCount)&&(this.points.splice(n,0,e),this.edgeTypes.splice(n,0,t.TYPE_NORMAL),!0)},t.prototype.removePointAt=function(t){return!(t>=this.vertexCount)&&(this.points.splice(t,1),this.edgeTypes.splice(t,1),!0)},Object.defineProperty(t.prototype,"vertexCount",{get:function(){return this.vertices.length},enumerable:!0,configurable:!0}),t.prototype.setClockSize=function(){this.area<0&&this.inversePoints()},t.prototype.inversePoints=function(){if(0!=this.vertexCount)for(var t=0;t<this.vertexCount/2;t++){var e=this.points[t];this.points[t]=this.points[this.vertexCount-1-t],this.points[this.vertexCount-1-t]=e;var n=this.edgeTypes[t];this.edgeTypes[t]=this.edgeTypes[this.vertexCount-1-t],this.edgeTypes[this.vertexCount-1-t]=n}},t.prototype.addPointXY=function(e,n,i){void 0===i&&(i=!1),i?this.points.unshift(new o.a(e,n)):(this.points.push(new o.a(e,n)),this.edgeTypes.push(t.TYPE_NORMAL))},t.prototype.setLastPoint=function(t){0!=this.vertexCount&&(this.points[this.vertexCount-1]=t.clone())},Object.defineProperty(t.prototype,"center",{get:function(){this._center||(this._center=new o.a);var t=this.boundRectangle;return this._center.setTo(t.x+.5*t.width,t.y+.5*t.height),this._center},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"boundRect",{get:function(){if(this._boundRect||(this._boundRect=new r.a),0==this.vertexCount)return this._boundRect.setTo(0,0,0,0),this._boundRect;for(var t=Number.MAX_VALUE,e=Number.MAX_VALUE,n=-Number.MAX_VALUE,o=-Number.MAX_VALUE,i=0;i<this.vertexCount;i++){var s=this.getVertexAt(i);t=Math.min(s.x,t),e=Math.min(s.y,e),n=Math.max(s.x,n),o=Math.max(s.y,o)}return this._boundRect.setTo(t,e,n-t,o-e),this._boundRect},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"boundRectangle",{get:function(){return this.boundRect},enumerable:!0,configurable:!0}),t.prototype.cleanPath=function(){i.a.cleanPath(this.vertices)},t.calculateArea=function(e){if(e.length<3)return 0;for(var n=0,o=e[0],i=e[e.length-1],r=1;r<e.length;r++)n+=t.pointRound(e[r-1].x)*t.pointRound(e[r].y)-t.pointRound(e[r-1].y)*t.pointRound(e[r].x);return n+=t.pointRound(i.x)*t.pointRound(o.y)-t.pointRound(i.y)*t.pointRound(o.x),n=.5*Math.abs(n),Math.round(n/100)/100},t.pointRound=function(t){return Math.round(100*t)/100},t.cm2m=function(t){return Math.round(t)/100},t.prototype.getMidOnTheSegment=function(t){var e=this.getPointAt_EX(t).add(this.getPointAt_EX(t+1));return e.x/=2,e.y/=2,e},Object.defineProperty(t.prototype,"area",{get:function(){if(this.vertexCount<3)return 0;for(var t=[],e=0;e<this.vertexCount;e++)t.push(this.points[e]);return i.a.computeAreaByPointArray(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"perimeter",{get:function(){for(var t=0,e=0;e<this.vertexCount;e++)t+=this.getEdgeAt(e).length;return t},enumerable:!0,configurable:!0}),t.prototype.containsInPolygon=function(t){for(var e=0;e<t.vertexCount;e++)if(!this.containsIn(t.getPointAt(e)))return!1;return!0},t.prototype.containsIn=function(t){return i.a.isPointInPolygon(t,this.points,this.vertexCount)},t.prototype.containsOnPolygon=function(t){for(var e=0;e<t.vertexCount;e++)if(!this.containsOn(t.getPointAt(e)))return!1;return!0},t.prototype.containsInXY=function(t,e){return this.containsPoint.x=t,this.containsPoint.y=e,this.containsIn(this.containsPoint)},t.prototype.containsOn=function(t){return i.a.isPointOnPolygon(t,this.points,this.vertexCount)},t.prototype.containsOnXY=function(t,e){return this.containsPoint.x=t,this.containsPoint.y=e,this.containsOn(this.containsPoint)},t.prototype.intersect=function(t){var e,n,r=new o.a(Number.MAX_VALUE,Number.MAX_VALUE),s=new o.a(-Number.MAX_VALUE,-Number.MAX_VALUE),a=new o.a(Number.MAX_VALUE,Number.MAX_VALUE),l=new o.a(-Number.MAX_VALUE,-Number.MAX_VALUE);for(e=0;e<t.vertexCount;e++)t.points[e].x<r.x&&(r.x=t.points[e].x),t.points[e].y<r.y&&(r.y=t.points[e].y),t.points[e].x>s.x&&(s.x=t.points[e].x),t.points[e].y>s.y&&(s.y=t.points[e].y);for(e=0;e<this.vertexCount;e++)this.points[e].x<a.x&&(a.x=this.points[e].x),this.points[e].y<a.y&&(a.y=this.points[e].y),this.points[e].x>l.x&&(l.x=this.points[e].x),this.points[e].y>l.y&&(l.y=this.points[e].y);if(r.x>l.x||i.a.isNumberEqual(r.x,l.x))return!1;if(r.y>l.y||i.a.isNumberEqual(r.y,l.y))return!1;if(s.x<a.x||i.a.isNumberEqual(s.x,a.x))return!1;if(s.y<a.y||i.a.isNumberEqual(s.y,a.y))return!1;for(e=0;e<t.vertexCount;e++)if(this.containsIn(t.points[e]))return!0;for(e=0;e<this.vertexCount;e++)if(t.containsIn(this.points[e]))return!0;for(e=0;e<this.vertexCount;e++)for(n=0;n<t.vertexCount;n++)if(i.a.intersect(this.points[e],this.points[(e+1)%this.vertexCount],t.points[n],t.points[(n+1)%t.vertexCount]))return!0;for(var u,h=this.trangles,c=new o.a,p=0,d=h;p<d.length;p++)if(u=d[p],3==u.vertexCount)for(e=0;e<u.vertexCount;e++)if(c.x=.5*(u.points[e].x+u.points[(e+1)%u.vertexCount].x),c.y=.5*(u.points[e].y+u.points[(e+1)%u.vertexCount].y),t.containsIn(c))return!0;h=t.trangles;for(var f=0,g=h;f<g.length;f++)if(u=g[f],3==u.vertexCount)for(e=0;e<u.vertexCount;e++)if(c.x=.5*(u.points[e].x+u.points[(e+1)%u.vertexCount].x),c.y=.5*(u.points[e].y+u.points[(e+1)%u.vertexCount].y),this.containsIn(c))return!0;return!1},t.prototype.equal=function(t){if(this.vertexCount!=t.vertexCount)return!1;var e,n,o=-1,r=-1;for(e=0;e<this.vertexCount;e++)for(n=0;n<t.vertexCount;n++)if(i.a.isPointEqual(this.points[e],t.points[n])){o=e,r=n;break}if(o<0||r<0)return!1;for(e=(o+1)%this.vertexCount,n=(r+1)%t.vertexCount;;){if(e==o||n==r)break;if(!i.a.isPointEqual(this.points[e],t.points[n]))return!1;e=(e+1)%this.vertexCount,n=(n+1)%t.vertexCount}return!0},t.prototype.shapeEqual=function(t){var e,n,o;for(e=0;e<this.vertexCount;e++){for(o=!1,n=0;n<t.vertexCount;n++)if(i.a.isPointOnSegment(t.points[n],t.points[(n+1)%t.vertexCount],this.points[e])){o=!0;break}if(!o)return!1}for(e=0;e<t.vertexCount;e++){for(o=!1,n=0;n<this.vertexCount;n++)if(i.a.isPointOnSegment(this.points[n],this.points[(n+1)%this.vertexCount],t.points[e])){o=!0;break}if(!o)return!1}return!0},t.prototype.adjacent=function(t){if(this.shapeEqual(t))return!1;var e,n;for(e=0;e<this.vertexCount;e++)for(n=0;n<t.vertexCount;n++)if(i.a.isPointEqual(this.points[e],t.points[n])&&i.a.isPointEqual(this.points[(e+1)%this.vertexCount],t.points[(n+1)%t.vertexCount]))return!0;if(3==this.vertexCount||3==t.vertexCount){var o,r;for(3==this.vertexCount?(o=this,r=t):(o=t,r=this),e=0;e<o.vertexCount;e++)for(n=0;n<r.vertexCount;n++)if(i.a.isPointEqual(o.points[e],r.points[n])&&i.a.isPointOnLine(r.points[n],r.points[(n+1)%r.vertexCount],o.points[(e+1)%o.vertexCount])&&i.a.isPointOnLine(r.points[n],r.points[(n+r.vertexCount-1)%r.vertexCount],o.points[(e+o.vertexCount-1)%o.vertexCount]))return!0}return!1},t.prototype.inscribe=function(t){if(this.shapeEqual(t))return!1;var e;for(e=0;e<t.vertexCount;e++)if(!this.containsOn(t.points[e]))return!1;var n=0;for(e=0;e<t.vertexCount;e++)this.containsIn(t.points[e])||(n+=1);return n>=2&&n<t.vertexCount},t.prototype.surround=function(t){var e;for(e=0;e<t.vertexCount;e++)if(!this.containsIn(t.getPointAt(e)))return!1;return!0},t.prototype.insertPointOnEdge=function(t,e){var n=this.getPointAt_EX(e),o=this.getPointAt_EX(e+1);if(i.a.isPoint2DEqual(n,t)||i.a.isPoint2DEqual(o,t))return!1;a.a.getModIndex(e,this.vertexCount);return this.addPointAt(t,e+1),!0},t.prototype.subtractPolygons=function(t){if(void 0===t&&(t=null),!t)return this.triangulate();for(var e,n=new Array,o=0,i=t;o<i.length;o++)e=i[o],n.push(e.points);return this.triangulate(n)},t.prototype.triangulate=function(t){return void 0===t&&(t=null),t},t.triangulate=function(t,e){return void 0===e&&(e=null),t.length<3?null:s.a.triangulate(t,e)},t.prototype.fetchRandomInnerPoint=function(){var t=s.a.triangulate(this.points);if(0==t.length)return this.center;for(var e,n=0,o=null,r=0,a=t;r<a.length;r++){e=a[r];var l=i.a.calculatePolyArea(e);Math.abs(l)>n&&(n=Math.abs(l),o=e)}return o?i.a.calculatePolyCentroid(o):this.center},Object.defineProperty(t.prototype,"squeezePoints",{get:function(){for(var t=[],e=0;e<this.vertexCount;e++)i.a.isPointEqual(this.points[e],this.points[i.a.nextIndex(e,this.vertexCount)])||t.push(this.points[e]);return this.area>0&&t.reverse(),t},enumerable:!0,configurable:!0}),t.prototype.calVertexUVs=function(t,e,n){void 0===n&&(n=null),n||(n=this.points[0]);for(var i,r=[],s=0,a=this.points;s<a.length;s++)i=a[s],r.push(new o.a((i.x-n.x)/t,(n.y-i.y)/e));return r},t.prototype.generateVertexUVs=function(t,e,n){void 0===n&&(n=null);for(var o,i=this.calVertexUVs(t,e,n),r=new Array,s=0,a=i;s<a.length;s++)o=a[s],r.push(o.x,o.y);return r},Object.defineProperty(t.prototype,"trangles",{get:function(){for(var e,n,o,r=[],s=this.squeezePoints,a=0;;){if(a>=s.length-2)break;if(s.length<3)break;for(e=0;e<s.length;e++){var l=i.a.preIndex(e,s.length),u=i.a.nextIndex(e,s.length);if(!i.a.isConvex(s[l],s[e],s[u])){o=new t,o.addPointXY(s[l].x,s[l].y),o.addPointXY(s[e].x,s[e].y),o.addPointXY(s[u].x,s[u].y);var h=!1;for(n=0;n<s.length;n++)if(n!=e&&n!=l&&n!=u&&o.containsIn(s[n])){h=!0;break}if(!h){r.push(o),s.splice(e,1);break}}}a++}return r},enumerable:!0,configurable:!0}),t.prototype.scalePolygon=function(t,e){var n=new l.a;return n.translate(-t.x,-t.y),n.scale(e,e),n.translate(t.x,t.y),this.translate(n)},t.prototype.translate=function(e){for(var n,o=new t,i=0;i<this.vertexCount;i++)n=e.transformPoint(this.points[i]),o.addPointXY(n.x,n.y);return o},t.prototype.transform=function(e){for(var n,o=new t,i=0;i<this.vertexCount;i++)n=e.transformPoint(this.points[i]),o.addPointXY(n.x,n.y);return o},t.prototype.clone=function(){for(var e=new t,n=0;n<this.vertexCount;n++)e.addPointXY(this.points[n].x,this.points[n].y),e.setEdgeType(n,this.getEdgeType(n));return e.mark=this.mark,e},t.prototype.copyFrom=function(t){this.clear();for(var e=0;e<t.vertexCount;e++){var n=t.getPointAt(e);this.addPointXY(n.x,n.y)}this.mark=t.mark},t.prototype.toString=function(){for(var t="[polygon]:\t",e=0;e<this.vertexCount;e++){var n=this.points[e];t+="("+n.x.toFixed(2)+","+n.y.toFixed(2)+")\t"}return t},t.prototype.loadData=function(e){if(this.clear(),e.hasOwnProperty("points")){for(var n,o=0,i=e.points;o<i.length;o++)n=i[o],this.addVertexXY(n.x,n.y);if(e.hasOwnProperty("holes"))for(var r,s=0,a=e.holes;s<a.length;s++){r=a[s];var l=new t;l.loadData(r),this.addHole(l)}}else for(var u,h=0,c=e;h<c.length;h++)u=c[h],this.addPointXY(u.x,u.y)},t.prototype.loadString=function(t){this.loadData(t)},t.prototype.dumpData=function(t){if(void 0===t&&(t=!1),t){for(var e,n={points:[],holes:[]},o=0,i=this.vertices;o<i.length;o++)e=i[o],n.points.push({x:e.x,y:e.y});for(var r,s=0,a=this.holes;s<a.length;s++)r=a[s],n.holes.push(r.dumpData(t));return n}for(var l=[],u=0;u<this.vertexCount;u++){var h=this.getPointAt_EX(u);l.push({x:h.x,y:h.y})}return l},t.prototype.dumpString=function(t){return void 0===t&&(t=!1),JSON.stringify(this.dumpData(t))},t.prototype.calculateIntersectionsWithRay=function(t,e,n){void 0===n&&(n=null);var o,r,s=[];if(n)for(var a=0,l=n;a<l.length;a++)(o=l[a])<=this.vertexCount&&(r=i.a.raySegmentIntersection(t,e,this.points[o%this.vertexCount],this.points[(o+1)%this.vertexCount]))&&s.push(r);else for(o=0;o<this.vertexCount;o++)(r=i.a.raySegmentIntersection(t,e,this.points[o%this.vertexCount],this.points[(o+1)%this.vertexCount]))&&s.push(r);return s.length?s:null},t.prototype.toNumPositon=function(){for(var t,e=[],n=0,o=this.points;n<o.length;n++)t=o[n],e.push(t.x,t.y);return e},t.prototype.calcuIntersectionWithRaySegment=function(t,e,n){var r,s,a=[],l=new o.a(-n.x,-n.y);for(r=0;r<=this.vertexCount;r++)s=i.a.raySegmentIntersection(t,n,this.points[r%this.vertexCount],this.points[(r+1)%this.vertexCount]),s&&a.push(s),s=i.a.raySegmentIntersection(e,n,this.points[r%this.vertexCount],this.points[(r+1)%this.vertexCount]),s&&a.push(s),(s=i.a.raySegmentIntersection(this.points[r%this.vertexCount],l,t,e))&&a.push(s);return a.length?a:null},Object.defineProperty(t.prototype,"isHole",{get:function(){return this._isHole},set:function(t){this._isHole=t},enumerable:!0,configurable:!0}),t.prototype.getCenterPoint=function(t){void 0===t&&(t=null);for(var e,n=Number.MAX_VALUE,i=Number.MAX_VALUE,r=-Number.MAX_VALUE,s=-Number.MAX_VALUE,a=0;a<this.vertexCount;a++)e=this.getPointAt(a),n=Math.min(e.x,n),r=Math.max(e.x,r),i=Math.min(e.y,i),s=Math.max(e.y,s);return t?(t.x=.5*(n+r),t.y=.5*(i+s),t):new o.a(.5*(n+r),.5*(i+s))},t.prototype.getMaxDist=function(t){for(var e=0,n=0,o=this.points;n<o.length;n++){var i=o[n],r=i.subtract(t).length;r>e&&(e=r)}return e},Object.defineProperty(t.prototype,"isLegal",{get:function(){return this.vertexCount>=3},enumerable:!0,configurable:!0}),t.prototype.isRect=function(){if(4!=this.vertexCount)return!1;var t=[this.points[0].subtract(this.points[1]),this.points[1].subtract(this.points[2]),this.points[2].subtract(this.points[3]),this.points[3].subtract(this.points[0])];return i.a.isNumberEqual(t[0].length,t[2].length)&&i.a.isNumberEqual(t[1].length,t[3].length)&&i.a.isNumberEqual(t[0].dotProd(t[1]),0)},Object.defineProperty(t.prototype,"realWidth",{get:function(){for(var t,e=Number.MAX_VALUE,n=Number.MIN_VALUE,o=0,i=this.points;o<i.length;o++)t=i[o],e=Math.min(e,t.x),n=Math.max(n,t.x);return Math.abs(n-e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"realLength",{get:function(){for(var t,e=Number.MAX_VALUE,n=Number.MIN_VALUE,o=0,i=this.points;o<i.length;o++)t=i[o],e=Math.min(e,t.y),n=Math.max(n,t.y);return Math.abs(n-e)},enumerable:!0,configurable:!0}),t.createPolygonFromArray=function(e){for(var n=new t,o=0;o<e.length/2;o++)n.addPointXY(e[2*o],e[2*o+1]);return n},t.createByPath=function(e){var n=new t;return n.points=e,n},t.prototype.autoSmooth=function(e){var n,o,i,r,s,a=new t,l=[];for(o=0;o<this.vertexCount;o++)n=this.getPointAt((o+1)%this.vertexCount).subtract(this.getPointAt(o)),n.normalize(),l.push(n);for(o=0;o<this.vertexCount;o++)i=l[(o-1+this.vertexCount)%this.vertexCount],r=l[o],s=this.getPointAt(o),a.addPoint(s),i.dotProd(r)<Math.cos(e)&&a.addPoint(s);return a},t.prototype.getCornerIndex=function(){var t,e=[],n=Number.MAX_VALUE,i=Number.MAX_VALUE,r=-Number.MAX_VALUE,s=-Number.MAX_VALUE,a=0;for(a=0;a<this.vertexCount;a++)t=this.getPointAt(a),n=Math.min(t.x,n),r=Math.max(t.x,r),i=Math.min(t.y,i),s=Math.max(t.y,s);var l=new o.a(n,i),u=new o.a(r,i),h=new o.a(n,s),c=new o.a(r,s),p=Number.MAX_VALUE,d=Number.MAX_VALUE,f=Number.MAX_VALUE,g=Number.MAX_VALUE,m=0,_=0,y=0,b=0;for(a=0;a<this.vertexCount;a++)t=this.getPointAt(a),t.subtract(l).length<p&&(p=t.subtract(l).length,m=a),t.subtract(u).length<d&&(d=t.subtract(u).length,_=a),t.subtract(h).length<f&&(f=t.subtract(h).length,y=a),t.subtract(c).length<g&&(g=t.subtract(c).length,b=a);return e.push(m),-1==e.indexOf(_)&&e.push(_),-1==e.indexOf(y)&&e.push(y),-1==e.indexOf(b)&&e.push(b),e},t.prototype.arbitraryPoint=function(t,e){var n=this.points[t],r=this.points[i.a.preIndex(t,this.vertexCount)],s=this.points[i.a.nextIndex(t,this.vertexCount)],a=s.subtract(n),l=r.subtract(n),u=Math.atan2(a.y,a.x)+i.a.vectorIncludedAngle(a,l,!0)/2;return i.a.less(this.area,0)&&(u+=Math.PI),new o.a(e*Math.cos(u)+n.x,e*Math.sin(u)+n.y)},t.prototype.arbitraryBottomRightPoint=function(t){for(var e,n=-1,o=-Number.MAX_VALUE,r=-Number.MAX_VALUE,s=0;s<this.vertexCount;s++)e=this.getPointAt(s),(e.x>o||i.a.isNumberEqual(e.x,o)&&e.y>r)&&(n=s,o=e.x,r=e.y);return this.arbitraryPoint(n,30)},t.prototype.toPolygon3D=function(t){void 0===t&&(t=0);for(var e=new u.a,n=0,o=this.points;n<o.length;n++){var i=o[n];e.addVertexXYZ(i.x,i.y,t)}return e},t.prototype.encode=function(t){void 0===t&&(t=!0);for(var e=[],n=0;n<this.vertexCount;n++){var o={},i=this.getPointAt(n);o.x=i.x,o.y=i.y,t&&(o.t=this.getEdgeType(n)),e.push(o)}return e},t.decode=function(e){for(var n=new t,o=0,i=e;o<i.length;o++){var r=i[o];n.addPointXY(r.x,r.y),r.hasOwnProperty("t")&&n.setEdgeType(n.vertexCount-1,r.t)}return n},t}();h.TYPE_DELETE=-1,h.TYPE_NORMAL=0,h.TYPE_ADD=1},cDNt:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("/oeL"),i=n("p5Ee"),r=n("+h1B"),s=n("fc+i");i.a.production&&n.i(o.a)(),n.i(s.a)().bootstrapModuleFactory(r.a)},cMBn:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=[".label[_ngcontent-%COMP%]{float:left;margin-left:15px;width:100px;text-align:left}.label[_ngcontent-%COMP%], .number[_ngcontent-%COMP%]{height:100%;vertical-align:middle;font-size:14px;line-height:42px}.number[_ngcontent-%COMP%]{float:right;margin-right:15px;width:50px;text-align:right;color:#999}"]},cNiI:function(t,e,n){"use strict";function o(t){return s._12(0,[s._13(402653184,1,{bodyRef:0}),s._13(402653184,2,{footRef:0}),s._13(671088640,3,{navigationQueryList:1}),s._13(402653184,4,{defaultButton:0}),s._13(402653184,5,{finishButton:0}),s._13(402653184,6,{leftDivRef:0}),s._13(402653184,7,{rightDivRef:0}),s._13(402653184,8,{rightContent0Ref:0}),s._13(402653184,9,{rightContent1Ref:0}),s._13(671088640,10,{radioButtonQueryList:1}),s._13(671088640,11,{optionInputQueryList:1}),(t()(),s._14(null,["\n"])),(t()(),s._15(0,[["head",1]],null,7,"div",[["class","head"]],null,null,null,null,null)),(t()(),s._14(null,["\n    "])),(t()(),s._15(16777216,null,null,1,"color-button",[["class","cancelButton"],["colorStyle","6"],["height","30px"],["label","取消"],["textSize","14"],["width","40px"]],null,[[null,"touchstart"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchend"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==s._16(t,15)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,15).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,15).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,15).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,15).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,15).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,15).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,15).touchEnd(n)&&o}if("touchstart"===e){o=!1!==i.close()&&o}return o},l.a,l.b)),s._17(4308992,[["cancelButton",4]],0,u.a,[s.Q,s._18],{width:[0,"width"],height:[1,"height"],colorStyle:[2,"colorStyle"],textSize:[3,"textSize"],label:[4,"label"]},null),(t()(),s._14(null,["\n    "])),(t()(),s._15(0,[["title",1]],null,1,"div",[["class","title"]],null,null,null,null,null)),(t()(),s._14(null,["设置"])),(t()(),s._14(null,["\n"])),(t()(),s._14(null,["\n\n"])),(t()(),s._15(0,[[1,0],["body",1]],null,44,"div",[["class","body"]],null,null,null,null,null)),(t()(),s._14(null,["\n    "])),(t()(),s._14(null,["\n    "])),(t()(),s._15(0,[[6,0],["left",1]],null,7,"div",[["class","left"]],null,null,null,null,null)),(t()(),s._14(null,["\n        "])),(t()(),s._15(16777216,null,null,1,"option-navigation-item",[["height","42px"],["label","默认墙厚/mm"],["width","100%"]],null,[[null,"touchstart"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchend"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==s._16(t,27)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,27).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,27).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,27).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,27).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,27).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,27).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,27).touchEnd(n)&&o}if("touchstart"===e){o=!1!==i.changeView(0)&&o}return o},h.a,h.b)),s._17(4308992,[[3,4]],0,c.a,[s.Q,s._18],{width:[0,"width"],height:[1,"height"],label:[2,"label"]},null),(t()(),s._14(null,["\n        "])),(t()(),s._15(16777216,null,null,1,"option-navigation-item",[["height","42px"],["label","默认层高/mm"],["width","100%"]],null,[[null,"touchstart"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchend"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==s._16(t,30)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,30).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,30).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,30).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,30).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,30).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,30).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,30).touchEnd(n)&&o}if("touchstart"===e){o=!1!==i.changeView(1)&&o}return o},h.a,h.b)),s._17(4308992,[[3,4]],0,c.a,[s.Q,s._18],{width:[0,"width"],height:[1,"height"],label:[2,"label"]},null),(t()(),s._14(null,["\n    "])),(t()(),s._14(null,["\n    "])),(t()(),s._14(null,["\n    "])),(t()(),s._15(0,[[7,0],["right",1]],null,30,"div",[["class","right"]],null,null,null,null,null)),(t()(),s._14(null,["\n        "])),(t()(),s._14(null,["\n        "])),(t()(),s._15(0,[[8,0],["rightContent0",1]],null,19,"div",[["class","rightContent"]],null,null,null,null,null)),(t()(),s._14(null,["\n            "])),(t()(),s._15(16777216,null,null,1,"option-input",[],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==s._16(t,40)._touchMove(n)&&o}return o},p.a,p.b)),s._17(4308992,[[11,4]],0,d.a,[s.Q,s._18],null,null),(t()(),s._14(null,["\n            "])),(t()(),s._15(16777216,null,null,1,"radio-button",[["height","42px"],["label","100"],["textSize","14"],["width","100%"]],null,[[null,"touchstart"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchend"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==s._16(t,43)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,43).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,43).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,43).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,43).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,43).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,43).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,43).touchEnd(n)&&o}if("touchstart"===e){o=!1!==i.selectWallThickness(0)&&o}return o},f.a,f.b)),s._17(4308992,[[10,4]],0,g.a,[s.Q,s._18],{width:[0,"width"],height:[1,"height"],label:[2,"label"],textSize:[3,"textSize"]},null),(t()(),s._14(null,["\n            "])),(t()(),s._15(16777216,null,null,1,"radio-button",[["height","42px"],["label","120"],["textSize","14"],["width","100%"]],null,[[null,"touchstart"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchend"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==s._16(t,46)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,46).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,46).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,46).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,46).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,46).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,46).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,46).touchEnd(n)&&o}if("touchstart"===e){o=!1!==i.selectWallThickness(1)&&o}return o},f.a,f.b)),s._17(4308992,[[10,4]],0,g.a,[s.Q,s._18],{width:[0,"width"],height:[1,"height"],label:[2,"label"],textSize:[3,"textSize"]},null),(t()(),s._14(null,["\n            "])),(t()(),s._15(16777216,null,null,1,"radio-button",[["height","42px"],["label","180"],["textSize","14"],["width","100%"]],null,[[null,"touchstart"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchend"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==s._16(t,49)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,49).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,49).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,49).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,49).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,49).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,49).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,49).touchEnd(n)&&o}if("touchstart"===e){o=!1!==i.selectWallThickness(2)&&o}return o},f.a,f.b)),s._17(4308992,[[10,4]],0,g.a,[s.Q,s._18],{width:[0,"width"],height:[1,"height"],label:[2,"label"],textSize:[3,"textSize"]},null),(t()(),s._14(null,["\n            "])),(t()(),s._15(16777216,null,null,1,"radio-button",[["height","42px"],["label","200"],["textSize","14"],["width","100%"]],null,[[null,"touchstart"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchend"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==s._16(t,52)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,52).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,52).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,52).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,52).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,52).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,52).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,52).touchEnd(n)&&o}if("touchstart"===e){o=!1!==i.selectWallThickness(3)&&o}return o},f.a,f.b)),s._17(4308992,[[10,4]],0,g.a,[s.Q,s._18],{width:[0,"width"],height:[1,"height"],label:[2,"label"],textSize:[3,"textSize"]},null),(t()(),s._14(null,["\n            "])),(t()(),s._15(16777216,null,null,1,"radio-button",[["height","42px"],["label","240"],["textSize","14"],["width","100%"]],null,[[null,"touchstart"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchend"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==s._16(t,55)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,55).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,55).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,55).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,55).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,55).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,55).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,55).touchEnd(n)&&o}if("touchstart"===e){o=!1!==i.selectWallThickness(4)&&o}return o},f.a,f.b)),s._17(4308992,[[10,4]],0,g.a,[s.Q,s._18],{width:[0,"width"],height:[1,"height"],label:[2,"label"],textSize:[3,"textSize"]},null),(t()(),s._14(null,["\n        "])),(t()(),s._14(null,["\n        "])),(t()(),s._14(null,["\n        "])),(t()(),s._15(0,[[9,0],["rightContent1",1]],null,4,"div",[["class","rightContent"]],null,null,null,null,null)),(t()(),s._14(null,["\n            "])),(t()(),s._15(16777216,null,null,1,"option-input",[],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==s._16(t,62)._touchMove(n)&&o}return o},p.a,p.b)),s._17(4308992,[[11,4]],0,d.a,[s.Q,s._18],null,null),(t()(),s._14(null,["\n        "])),(t()(),s._14(null,["\n    "])),(t()(),s._14(null,["\n"])),(t()(),s._14(null,["\n\n"])),(t()(),s._14(null,["\n"])),(t()(),s._15(0,[[2,0],["foot",1]],null,7,"div",[["class","foot"]],null,null,null,null,null)),(t()(),s._14(null,["\n    "])),(t()(),s._15(16777216,null,null,1,"color-button",[["class","defaultButton"],["colorStyle","7"],["height","36px"],["label","恢复默认设置"],["textSize","14"],["width","200px"]],null,[[null,"touchstart"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchend"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==s._16(t,71)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,71).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,71).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,71).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,71).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,71).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,71).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,71).touchEnd(n)&&o}if("touchstart"===e){o=!1!==i.default()&&o}return o},l.a,l.b)),s._17(4308992,[[4,4],["defaultButton",4]],0,u.a,[s.Q,s._18],{width:[0,"width"],height:[1,"height"],colorStyle:[2,"colorStyle"],textSize:[3,"textSize"],label:[4,"label"]},null),(t()(),s._14(null,["\n    "])),(t()(),s._15(16777216,null,null,1,"color-button",[["class","finishButton"],["colorStyle","1"],["height","36px"],["label","完成"],["textSize","14"],["width","200px"]],null,[[null,"touchstart"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchend"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==s._16(t,74)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,74).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,74).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,74).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,74).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,74).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,74).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,74).touchEnd(n)&&o}if("touchstart"===e){o=!1!==i.finish()&&o}return o},l.a,l.b)),s._17(4308992,[[5,4],["finishButton",4]],0,u.a,[s.Q,s._18],{width:[0,"width"],height:[1,"height"],colorStyle:[2,"colorStyle"],textSize:[3,"textSize"],label:[4,"label"]},null),(t()(),s._14(null,["\n"]))],function(t,e){t(e,15,0,"40px","30px","6","14","取消");t(e,27,0,"100%","42px","默认墙厚/mm");t(e,30,0,"100%","42px","默认层高/mm"),t(e,40,0);t(e,43,0,"100%","42px","100","14");t(e,46,0,"100%","42px","120","14");t(e,49,0,"100%","42px","180","14");t(e,52,0,"100%","42px","200","14");t(e,55,0,"100%","42px","240","14"),t(e,62,0);t(e,71,0,"200px","36px","7","14","恢复默认设置");t(e,74,0,"200px","36px","1","14","完成")},null)}function i(t){return s._12(0,[(t()(),s._15(16777216,null,null,1,"option-setting",[],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==s._16(t,1)._touchMove(n)&&o}return o},o,_)),s._17(4308992,null,0,a.a,[s.Q,s._18],null,null)],function(t,e){t(e,1,0)},null)}var r=n("+Hrd"),s=n("/oeL"),a=n("6p4A"),l=n("3kKB"),u=n("ZCEW"),h=n("39qE"),c=n("Dsuh"),p=n("zJDb"),d=n("Luvd"),f=n("XckH"),g=n("ymZg");n.d(e,"b",function(){return _}),e.a=o;var m=[r.a],_=s._11({encapsulation:0,styles:m,data:{}});s._19("option-setting",a.a,i,{position:"position",width:"width",height:"height",left:"left",top:"top",right:"right",bottom:"bottom",visible:"visible",alpha:"alpha",depth:"depth",rotation:"rotation",scalex:"scalex",scaley:"scaley",tooltip:"tooltip",backgroundcolor:"backgroundcolor",filter:"filter",buttonMode:"buttonMode"},{},[])},cXPp:function(t,e,n){"use strict";var o=n("/oeL"),i=n("8Tef"),r=n("+N0H"),s=n("UPT1"),a=n("wqUL"),l=n("6p4A");n.d(e,"a",function(){return h});var u=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),h=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.rulerUp="",o.rulerDown="",o.optionUp="",o.optionDown="",o.moreUp="",o.moreDown="",o.buttons=[],o.moreButton=null,o.scene=null,o}return u(e,t),e.prototype.ngOnInit=function(){this.rulerUp="assets/view/toolbar/ruler_up_3x.png",this.rulerDown="assets/view/toolbar/ruler_up_3x.png",this.optionUp="assets/view/toolbar/option_up_3x.png",this.optionDown="assets/view/toolbar/option_up_3x.png",this.moreUp="assets/view/toolbar/more_up_3x.png",this.moreDown="assets/view/toolbar/more_up_3x.png"},e.prototype.ngAfterViewInit=function(){this.buttons=this.buttonQueryList.toArray(),this.moreButton.rendererClass=a.a,this.scene=r.a.inst;var t=Math.max(window.innerWidth-460,10);this.width=t+"px",this.height="35px",this.updateContent(t),this.updateComponentProperty()},e.prototype.updateContent=function(t){for(var e=0,n=this.buttons;e<n.length;e++){var o=n[e];o.visible="false"}if(this.moreButton.visible="false",t<100)this.moreButton.visible="true",a.a.contentCount=2;else{for(var i=0,r=this.buttons;i<r.length;i++){var o=r[i];o.visible="true"}a.a.contentCount=0}},e.prototype.rulerHandler=function(){1==s.a.inst.visible?s.a.inst.hideEdgeRuler():s.a.inst.showEdgeRuler()},e.prototype.optionHandler=function(){l.a.inst.open()},e.ctorParameters=function(){return[{type:o.Q},{type:o._18}]},e}(i.a)},d3c3:function(t,e,n){"use strict";var o=n("iHFl");n.d(e,"a",function(){return r});var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=function(t){function e(e,n){return void 0===n&&(n=null),t.call(this,e,n)||this}return i(e,t),e}(o.a);r.OPERATOR_ACTION="OPERATOR_ACTION"},"e/cs":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){}return t.completion=function(t,e){var n=t.length;if(n<e){for(var o=e-n,i=0;i<o;i++)t="0"+t;return t}return t},t}()},"e/zD":function(t,e,n){"use strict";function o(t){return s._12(0,[s._13(402653184,1,{virtualNumberBoard:0}),(t()(),s._14(null,["\n"])),(t()(),s._15(16777216,null,null,1,"virtual-number-board",[],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==s._16(t,3)._touchMove(n)&&o}return o},a.a,a.b)),s._17(4308992,[[1,4],["virtualNumberBoard",4]],0,l.a,[s.Q,s._18],null,null)],function(t,e){t(e,3,0)},null)}function i(t){return s._12(0,[(t()(),s._15(16777216,null,null,1,"common-setting",[],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==s._16(t,1)._touchMove(n)&&o}return o},o,c)),s._17(4308992,null,0,u.a,[s.Q,s._18],null,null)],function(t,e){t(e,1,0)},null)}var r=n("Y/NI"),s=n("/oeL"),a=n("aeJW"),l=n("+DHO"),u=n("MgL2");n.d(e,"b",function(){return c}),e.a=o;var h=[r.a],c=s._11({encapsulation:0,styles:h,data:{}});s._19("common-setting",u.a,i,{position:"position",width:"width",height:"height",left:"left",top:"top",right:"right",bottom:"bottom",visible:"visible",alpha:"alpha",depth:"depth",rotation:"rotation",scalex:"scalex",scaley:"scaley",tooltip:"tooltip",backgroundcolor:"backgroundcolor",filter:"filter",buttonMode:"buttonMode"},{},[])},ezNz:function(t,e,n){"use strict";var o=n("ZvbM"),i=n("Eezr"),r=n("Xx/s"),s=n("/T2q");n.d(e,"a",function(){return l});var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),l=function(t){function e(){var e=t.call(this,!1,!1)||this;return e.width=100,e.height=100,e.depth=i.a.NOTE,e.mouseEventEnable=!1,e}return a(e,t),Object.defineProperty(e,"inst",{get:function(){return e._instance||(e._instance=new e),e._instance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tagName",{get:function(){return"NoteGroup"},enumerable:!0,configurable:!0}),e.prototype.onAdd=function(){this.touchEnable=!1},Object.defineProperty(e.prototype,"notes",{get:function(){for(var t=[],e=this.numChildren,n=0;n<e;n++){var o=this.getChildAt(n);o&&t.push(o)}return t},enumerable:!0,configurable:!0}),e.prototype.update=function(){for(var t=this.numChildren,e=0;e<t;e++){var n=this.getChildAt(e);n&&n.update()}},e.prototype.addNote=function(t){this.addChild(t),t.scene=this.scene,t.update()},e.prototype.removeNote=function(t){1==this.contains(t)&&(t.clear(),this.removeChild(t))},e.prototype.topNote=function(t){1==this.contains(t)&&this.setChildIndex(t,this.numChildren-1)},e.prototype.bottomNote=function(t){1==this.contains(t)&&this.setChildIndex(t,0)},e.prototype.noteClick=function(t){this.scene.dispatchEvent(new s.a(s.a.MSCENE_NOTE_CHANGED,t),this.scene)},e.prototype.clear=function(){for(var t=this.childs.concat(),e=0,n=t;e<n.length;e++){var o=n[e];o instanceof r.a&&(o.clear(),this.removeChild(o))}},e}(o.a)},fGN8:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=[".checkbox[_ngcontent-%COMP%]{float:left;background-size:contain;width:16px;height:16px;vertical-align:middle;margin-top:2px}.label[_ngcontent-%COMP%]{float:left;margin-left:5px}"]},fPy1:function(t,e,n){"use strict";var o=n("iHFl");n.d(e,"a",function(){return r});var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=function(t){function e(e,n,o,i){void 0===n&&(n=null),void 0===o&&(o=0),void 0===i&&(i=null);var r=t.call(this,e,n)||this;return r.value=o,r.inputData=i,r}return i(e,t),e}(o.a);r.CHANGE="RulerChange",r.CLICK="RulerClick"},fqCj:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){}return t}();o.OPENING="Opening",o.STRUCT="Struct"},fr6C:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){}return Object.defineProperty(t,"inst",{get:function(){return null==t._instance&&(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),t.prototype.register=function(t,e,n){this.app=t,this.view=e,this.componentResolver=n},t.prototype.createComponent=function(t,e){var n=this.componentResolver.resolveComponentFactory(t);return e.createComponent(n)},t}()},g2Ph:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=[".label[_ngcontent-%COMP%]{float:left;margin-left:15px;font-size:14px}.radio[_ngcontent-%COMP%]{float:right;margin-top:10px;margin-right:15px;width:22px;height:22px;vertical-align:middle;background-size:100% 100%}"]},gEyJ:function(t,e,n){"use strict";function o(t){return s._12(0,[s._13(402653184,1,{bgContainer:0}),s._13(671088640,2,{buttonQueryList:1}),(t()(),s._15(0,[[1,0],["bgContainer",1]],null,0,"div",[["class","bgContainer"]],null,null,null,null,null)),(t()(),s._14(null,["\n\n"])),(t()(),s._15(0,null,null,11,"div",[["class","btnContainer"]],null,null,null,null,null)),(t()(),s._14(null,["\n    "])),(t()(),s._14(null,["\n    "])),(t()(),s._15(16777216,null,null,2,"v-tool-button",[["class","VToolButton"],["label","标尺"]],null,[[null,"touchstart"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchend"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==s._16(t,8)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,8).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,8).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,8).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,8).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,8).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,8).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,8).touchEnd(n)&&o}if("touchstart"===e){o=!1!==i.rulerHandler()&&o}return o},l.b,l.c)),s._17(4308992,[[2,4]],0,u.a,[s.Q,s._18],{iconUp:[0,"iconUp"],iconDown:[1,"iconDown"],label:[2,"label"]},null),(t()(),s._14(null,["\n    "])),(t()(),s._14(null,["\n\n    "])),(t()(),s._14(null,["\n    "])),(t()(),s._15(16777216,null,null,2,"v-tool-button",[["class","VToolButton"],["label","设置"]],null,[[null,"touchstart"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchend"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==s._16(t,13)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,13).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,13).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,13).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,13).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,13).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,13).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,13).touchEnd(n)&&o}if("touchstart"===e){o=!1!==i.optionHandler()&&o}return o},l.b,l.c)),s._17(4308992,[[2,4]],0,u.a,[s.Q,s._18],{iconUp:[0,"iconUp"],iconDown:[1,"iconDown"],label:[2,"label"]},null),(t()(),s._14(null,["\n    "])),(t()(),s._14(null,["\n"]))],function(t,e){var n=e.component;t(e,8,0,n.rulerUp,n.rulerDown,"标尺");t(e,13,0,n.optionUp,n.optionDown,"设置")},null)}function i(t){return s._12(0,[(t()(),s._15(16777216,null,null,1,"huxing-toolbar-more-detail",[],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==s._16(t,1)._touchMove(n)&&o}return o},o,c)),s._17(4308992,null,0,a.a,[s.Q,s._18],null,null)],function(t,e){t(e,1,0)},null)}var r=n("mpL0"),s=n("/oeL"),a=n("wqUL"),l=n("DLok"),u=n("R4k5");n.d(e,"a",function(){return p});var h=[r.a],c=s._11({encapsulation:0,styles:h,data:{}}),p=s._19("huxing-toolbar-more-detail",a.a,i,{position:"position",width:"width",height:"height",left:"left",top:"top",right:"right",bottom:"bottom",visible:"visible",alpha:"alpha",depth:"depth",rotation:"rotation",scalex:"scalex",scaley:"scaley",tooltip:"tooltip",backgroundcolor:"backgroundcolor",filter:"filter",buttonMode:"buttonMode"},{},[])},gF12:function(t,e,n){"use strict";var o=n("Pu9O"),i=n("zA0o"),r=(n.n(i),n("IVMV"));n.d(e,"a",function(){return s});var s=function(){function t(){}return t.prototype.addHole=function(t){},t.triangulate=function(t,e){void 0===e&&(e=null);var n=0,r=0,s=[];for(n=0;n<t.length;n++){var a=new i.Point(t[n].x,t[n].y);s.push(a)}var l=new i.SweepContext(s);if(e){var u=[];for(n=0;n<e.length;n++)for(u[n]=[],r=0;r<e.length;r++){var a=new i.Point(e[n][r].x,e[n][r].y);u[n].push(a)}l.addHoles(u)}l.triangulate();var h=l.getTriangles(),c=[];for(n=0;n<h.length;n++){var p=h[n],d=p.getPoints();for(c[n]=[],r=0;r<d.length;r++)c[n].push(new o.a(d[r].x,d[r].y))}return c},t.triangulateSafe=function(e,n,o){void 0===n&&(n=null),void 0===o&&(o=t.CLIPPER_SCALE);var i=new r.a(o);i.addPath(e,r.a.PT_SUBJECT),n&&n.length>0&&i.addPaths(n,r.a.PT_CLIP);for(var s=i.execute(r.a.CT_DIFFERENCE),a=new Array,l=new Array,u=0;u<s.length;u++)i.orientation(s[u])?a.push(s[u]):l.push(s[u]);for(var h=new Array,c=0,p=a;c<p.length;c++){var d=p[c];h=h.concat(this.triangulate(d,l))}return h},t}();s.CLIPPER_SCALE=1e5},gILL:function(t,e,n){"use strict";var o=n("Pu9O"),i=n("36ei"),r=n("pTaI"),s=n("yNz0");n.d(e,"a",function(){return a});var a=function(){function t(){}return t.prototype.GMath=function(){},t.preIndex=function(t,e){return(t+e-1)%e},t.nextIndex=function(t,e){return(t+1)%e},t.indexAdjacent=function(t,e,n){return t==this.preIndex(e,n)||t==this.nextIndex(e,n)},t.pointIndex=function(e,n){for(var o=0;o<e.length;o++)if(this.isPointEqual(e[o],n))return o;return t.NONE_INDEX},t.isNumberEqual=function(e,n,o){return void 0===o&&(o=t.TOLERANCE),Math.abs(e-n)<o},t.greaterEqual=function(e,n,o){return void 0===o&&(o=t.TOLERANCE),e>n||this.isNumberEqual(e,n,o)},t.lessEqual=function(e,n,o){return void 0===o&&(o=t.TOLERANCE),e<n||this.isNumberEqual(e,n,o)},t.greater=function(e,n,o){return void 0===o&&(o=t.TOLERANCE),e>n&&!this.isNumberEqual(e,n,o)},t.less=function(e,n,o){return void 0===o&&(o=t.TOLERANCE),e<n&&!this.isNumberEqual(e,n,o)},t.isPointEqual=function(e,n,o){return void 0===o&&(o=t.TOLERANCE),this.isNumberEqual(e.x,n.x,o)&&this.isNumberEqual(e.y,n.y,o)},t.isDegreeAngleEqual=function(e,n,o){return void 0===o&&(o=t.TOLERANCE),t.isNumberEqual((e-n)%360,0,o)},t.reversePoint=function(t,e){return void 0===e&&(e=!0),e?(t.x*=-1,t.y*=-1,t):new o.a(-t.x,-t.y)},t.isLineEndsEqual=function(t,e,n,o){return!(!this.isPointEqual(t,n)||!this.isPointEqual(e,o))||!(!this.isPointEqual(t,o)||!this.isPointEqual(e,n))},t.isPolygonEqual=function(t,e){if(t.length!=e.length)return!1;var n,o=t.length,i=-1,r=-1;for(n=0;n<o;n++)for(var s=0;s<o;s++)if(this.isPointEqual(t[n],e[s])){i=n,r=s;break}if(-1==r)return!1;for(n=0;n<o;n++)if(!this.isPointEqual(t[(i+n)%o],e[(r+n)%o]))return!1;return!0},t.vectorOrthogonal=function(t,e){return this.isNumberEqual(t.dotProd(e),0)},t.vectorParallel=function(t,e){return this.isNumberEqual(Math.abs(t.dotProd(e)),t.length*e.length)},t.degreeToRadian=function(t){return t/180*Math.PI},t.radianToDegree=function(t){return t/Math.PI*180},t.acos=function(t){return t>1&&(t=1),t<-1&&(t=-1),Math.acos(t)},t.asin=function(t){return t>1&&(t=1),t<-1&&(t=-1),Math.asin(t)},t.rotateVector=function(t,e,n){void 0===n&&(n=!0);var i=Math.sin(e),r=Math.cos(e),s=new o.a(t.x*r-t.y*i,t.y*r+t.x*i);return n&&s.normalize(1),s},t.rotateByZ=function(t,e){var n=new o.a(t.x,t.y);n.normalize();var i=Math.sin(e),r=Math.cos(e),s=new o.a;return s.x=n.x*r-n.y*i,s.y=n.y*r+n.x*i,s},t.segmentIntersectInLine=function(t,e,n,o){var i=Math.min(t,e),r=Math.max(t,e),s=Math.min(n,o),a=Math.max(n,o);return!this.isNumberEqual(r,s)&&!this.isNumberEqual(i,a)&&!(r<s||i>a)},t.intersect=function(t,e,n,o){if(this.p0p1.setTo(e.x-t.x,e.y-t.y),this.p0p2.setTo(n.x-t.x,n.y-t.y),this.p0p3.setTo(o.x-t.x,o.y-t.y),this.p2p3.setTo(o.x-n.x,o.y-n.y),this.p2p0.setTo(t.x-n.x,t.y-n.y),this.p2p1.setTo(e.x-n.x,e.y-n.y),this.isNumberEqual(this.p0p1.crossProd(this.p0p2),0))return!1;if(this.isNumberEqual(this.p0p1.crossProd(this.p0p3),0))return!1;if(this.isNumberEqual(this.p2p3.crossProd(this.p2p0),0))return!1;if(this.isNumberEqual(this.p2p3.crossProd(this.p2p1),0))return!1;var i=this.p0p1.crossProd(this.p0p2)*this.p0p1.crossProd(this.p0p3),r=this.p2p3.crossProd(this.p2p0)*this.p2p3.crossProd(this.p2p1);return i<0&&!this.isNumberEqual(i,0)&&r<0&&!this.isNumberEqual(r,0)},t.intersectPlus=function(t,e,n,o){return!!this.intersect(t,e,n,o)||(!!(this.isPointEqual(t,n)&&this.isPointEqual(e,o)||this.isPointEqual(t,o)&&this.isPointEqual(e,n))||(!(!this.isPointOnSegment(n,o,t)||this.isPointEqual(t,n)||this.isPointEqual(t,o))||(!(!this.isPointOnSegment(n,o,e)||this.isPointEqual(e,n)||this.isPointEqual(e,o))||(!(!this.isPointOnSegment(t,e,n)||this.isPointEqual(n,t)||this.isPointEqual(n,e))||!(!this.isPointOnSegment(t,e,o)||this.isPointEqual(o,t)||this.isPointEqual(o,e))))))},t.intersectPlus2=function(e,n,o,i,r){return void 0===r&&(r=t.TOLERANCE),this._tmpP0.setTo(n.x-e.x,n.y-e.y),this._tmpP1.setTo(o.x-e.x,o.y-e.y),this._tmpP2.setTo(i.x-e.x,i.y-e.y),this._tmpN0=this._tmpP0.crossProd(this._tmpP1)*this._tmpP0.crossProd(this._tmpP2),this._tmpP0.setTo(i.x-o.x,i.y-o.y),this._tmpP1.setTo(e.x-o.x,e.y-o.y),this._tmpP2.setTo(n.x-o.x,n.y-o.y),this._tmpN1=this._tmpP0.crossProd(this._tmpP1)*this._tmpP0.crossProd(this._tmpP2),this.less(this._tmpN0,0,r)&&this.less(this._tmpN1,0,r)},t.segmentIntersect=function(t,e,n,o){return!!this.intersect(t,e,n,o)||!(!this.isPointOnLine(t,e,n)||!this.isPointOnLine(t,n,o))&&(!(!this.isPointEqual(t,n)||!this.isPointEqual(e,o))||(!(!this.isPointEqual(t,o)||!this.isPointEqual(e,n))||(!!this.isPointInSegment(t,e,n)||(!!this.isPointInSegment(t,e,o)||(!!this.isPointInSegment(n,o,t)||!!this.isPointInSegment(n,o,e))))))},t.isPointOnSegment_EX=function(t,e,n){if(this.isPoint2DEqual(t,n)||this.isPoint2DEqual(e,n))return!0;var o=t.subtract(n);o.normalize();var i=e.subtract(n);i.normalize();var r=o.crossProd(i);return!!this.isNumberEqual(r,0)},t.isPointOnSegment=function(t,e,n){return!!this.isPointOnLine(t,e,n)&&(!(!this.isNumberEqual(n.x,Math.max(t.x,e.x))&&n.x>Math.max(t.x,e.x))&&(!(!this.isNumberEqual(n.x,Math.min(t.x,e.x))&&n.x<Math.min(t.x,e.x))&&(!(!this.isNumberEqual(n.y,Math.max(t.y,e.y))&&n.y>Math.max(t.y,e.y))&&!(!this.isNumberEqual(n.y,Math.min(t.y,e.y))&&n.y<Math.min(t.y,e.y)))))},t.isPointInSegment=function(t,e,n){return!this.isPointEqual(t,n)&&!this.isPointEqual(e,n)&&this.isPointOnSegment(t,e,n)},t.isPointOnPolygon=function(t,e,n){void 0===n&&(n=-1);var o,i,r=!1;for(n<0&&(n=e.length),o=0;o<n;o++)if(this.isPointOnSegment(e[o],e[(o+1)%n],t))return!0;for(o=0,i=n-1;o<n;i=o++)(e[o].y<=t.y&&t.y<e[i].y||e[i].y<=t.y&&t.y<e[o].y)&&t.x<(e[i].x-e[o].x)*(t.y-e[o].y)/(e[i].y-e[o].y)+e[o].x&&(r=!r);return r},t.isPointInPolygon=function(t,e,n){void 0===n&&(n=-1);var o,i,r=!1;for(n<0&&(n=e.length),o=0;o<n;o++)if(this.isPointOnSegment(e[o],e[(o+1)%n],t))return!1;for(o=0,i=n-1;o<n;i=o++)(e[o].y<=t.y&&t.y<e[i].y||e[i].y<=t.y&&t.y<e[o].y)&&t.x<(e[i].x-e[o].x)*(t.y-e[o].y)/(e[i].y-e[o].y)+e[o].x&&(r=!r);return r},t.isPoint3DEqual=function(e,n,o){return void 0===o&&(o=NaN),t.isNumberEqual(e.x,n.x,o)&&t.isNumberEqual(e.y,n.y,o)&&t.isNumberEqual(e.z,n.z,o)},t.isPoint3DInPolygon3D=function(t,e){var n,o,i=!1;for(n=0,o=e.length-1;n<e.length;o=n++)(e[n].y<=t.y&&t.y<e[o].y||e[o].y<=t.y&&t.y<e[n].y)&&t.x<(e[o].x-e[n].x)*(t.y-e[n].y)/(e[o].y-e[n].y)+e[n].x&&(i=!i);return i},t.insidePolygon=function(t,e){var n,o,i,r,s=0,a=e.length;for(i=e[0],n=1;n<=a;n++)r=e[n%a],t.y>Math.min(i.y,r.y)&&t.y<=Math.max(i.y,r.y)&&t.x<=Math.max(i.x,r.x)&&i.y!=r.y&&(o=(t.y-i.y)*(r.x-i.x)/(r.y-i.y)+i.x,(i.x==r.x||t.x<=o)&&s++),i=r.clone();return s%2!=0},t.isConvex=function(t,e,n){var o=new i.a(e.x-t.x,e.y-t.y,0),r=new i.a(n.x-t.x,n.y-t.y,0);return o.crossProd(r).z>0},t.isConvex2=function(t,e,n){var o=new i.a(e.x-t.x,e.y-t.y,0),r=new i.a(n.x-t.x,n.y-t.y,0);return o.crossProd(r).z},t.dragVectorCaculate=function(t,e){var n,i=t.crossProd(e);if(this.isNumberEqual(i,0))return new o.a(0,0);i>0?n=this.rotateByZ(t,Math.PI/2):i<0&&(n=this.rotateByZ(t,-Math.PI/2)),n.normalize();var r=Math.abs(e.crossProd(n)/e.length/n.length),s=e.length*r;return new o.a(n.x*s,n.y*s)},t.calcSegmentIntersection=function(t,e,n,o){return o<t||this.isNumberEqual(o,t)?null:n>e||this.isNumberEqual(n,e)?null:[Math.max(t,n),Math.min(e,o)]},t.calculateIntersectPoint=function(t,e,n,i){var r=t.y-e.y,s=e.x-t.x,a=t.x*e.y-e.x*t.y,l=n.y-i.y,u=i.x-n.x,h=n.x*i.y-i.x*n.y,c=r*u-l*s;return this.isNumberEqual(c,0)?null:new o.a((s*h-u*a)/c,(l*a-r*h)/c)},t.calculateIntersectPoint2=function(t,e,n,o){return this.calculateIntersectPoint(t,t.add(e),n,n.add(o))},t.calculateIntersectPointOnSegment=function(t,e,n,i,r){void 0===r&&(r=!0);var s=t.y-e.y,a=e.x-t.x,l=t.x*e.y-e.x*t.y,u=n.y-i.y,h=i.x-n.x,c=n.x*i.y-i.x*n.y,p=s*h-u*a;if(this.isNumberEqual(p,0))return null;var d=(a*c-h*l)/p,f=(u*l-s*c)/p;if(this.lessEqual(Math.min(t.x,e.x),d)&&this.lessEqual(d,Math.max(t.x,e.x))&&this.lessEqual(Math.min(n.x,i.x),d)&&this.lessEqual(d,Math.max(n.x,i.x))&&this.lessEqual(Math.min(t.y,e.y),f)&&this.lessEqual(f,Math.max(t.y,e.y))&&this.lessEqual(Math.min(n.y,i.y),f)&&this.lessEqual(f,Math.max(n.y,i.y))){var g=new o.a(d,f);if(r)return g;if(!(this.isPointEqual(g,t)||this.isPointEqual(g,e)||this.isPointEqual(g,n)||this.isPointEqual(g,i)))return g}return null},t.calcFoot=function(t,e,n){var i=e.x-t.x,r=e.y-t.y,s=((n.y-t.y)*i*r+i*i*n.x+r*r*t.x)/(i*i+r*r),a=((n.x-t.x)*i*r+r*r*n.y+i*i*t.y)/(i*i+r*r);return new o.a(s,a)},t.calculateFootPointOnSegment=function(t,e,n){var o=e.subtract(t);if(this.isNumberEqual(o.length,0))return null;var i=n.subtract(t),r=i.dotProd(o);if((r/=o.length)<0||r>o.length)return null;var s=o.clone();return s=s.normalize().multiply(r),s.add(t)},t.calculateFootPointOnLine=function(t,e,n){if(!t||!e)return null;var o=e.subtract(t),i=n.subtract(t),r=i.dotProd(o);r/=o.length;var s=o.clone();return s=s.normalize().multiply(r),s.add(t)},t.intersect3=function(e,n,o,i){var r=180*Math.atan2(n.y-e.y,n.x-e.x)/Math.PI,s=180*Math.atan2(i.y-o.y,i.x-o.x)/Math.PI;if(!this.isNumberEqual(Math.abs((r-s)%360),180))return!1;var a;return a=t.calcFoot(e,n,o),!!this.isPointOnSegment(e,n,a)||(a=t.calcFoot(e,n,i),!!this.isPointOnSegment(e,n,a)||(a=t.calcFoot(o,i,e),!!this.isPointOnSegment(o,i,a)||(a=t.calcFoot(o,i,n),!!this.isPointOnSegment(o,i,a))))},t.isPointOnLine=function(t,e,n){return this.isNumberEqual((t.x-n.x)*(e.y-n.y)-(e.x-n.x)*(t.y-n.y),0)},t.cornerOffset=function(e,n){if(this.isPointEqual(e,n))return e;var i=e.x*n.y-n.x*e.y;if(t.isNumberEqual(i,0))return null;var r=e.x*e.x+e.y*e.y,s=n.x*n.x+n.y*n.y,a=(r*n.y-s*e.y)/i,l=(s*e.x-r*n.x)/i;return new o.a(a,l)},t.isFootPointInLine=function(t,e,n,o){return void 0===o&&(o=null),o&&this.isNumberEqual(t.x,e.x)?!(o.y<Math.min(t.y,e.y)||o.y>Math.max(t.y,e.y)):o&&this.isNumberEqual(t.y,e.y)?!(o.x<Math.min(t.x,e.x)||o.x>Math.max(t.x,e.x)):!!this.isNumberEqual((t.x-n.x)*(e.y-n.y)-(e.x-n.x)*(t.y-n.y),0)&&(!(n.x>t.x&&n.x>e.x||n.x<t.x&&n.x<e.x)&&!(n.y>t.y&&n.y>e.y||n.y<t.y&&n.y<e.y))},t.vectorMovement=function(t,e,n){var o=t.clone();return this.isNumberEqual(e.length,0)?o:(o.x+=e.x*n/e.length,o.y+=e.y*n/e.length,o)},t.moveInclinedWall=function(t,e,n,i){var r=i.length,s=t.subtract(e);if(this.isPointEqual(t,e))return e.add(i);s.normalize();var a=n.subtract(e);a.normalize();var l=s.crossProd(a),u=r/Math.abs(l);return l>0?a.crossProd(i)>0?new o.a(e.x-u*s.x,e.y-u*s.y):new o.a(e.x+u*s.x,e.y+u*s.y):l<0?a.crossProd(i)>0?new o.a(e.x+u*s.x,e.y+u*s.y):new o.a(e.x-u*s.x,e.y-u*s.y):new o.a},t.formatAngle=function(t){return!this.isNumberEqual(t,180)&&t>180?(t%=360,!this.isNumberEqual(t,180)&&t>180&&(t-=360)):!this.isNumberEqual(t,-180)&&t<-180&&(t%=360,!this.isNumberEqual(t,-180)&&t<-180&&(t=360+t)),t},t.vectorsAngle=function(t,e){if(this.isNumberEqual(t.length,0)||this.isNumberEqual(e.length,0))return 180;t.normalize(),e.normalize();var n=t.dotProd(e),o=t.crossProd(e),i=this.acos(n);return this.asin(o)<0&&(i*=-1),this.radianToDegree(i)},t.vectorAngle=function(e,n){return 180*t.vectorRadian(e,n)/Math.PI},t.vectorRadian=function(t,e){var n=Math.atan2(e.y-t.y,e.x-t.x);return this.isNumberEqual(n,-Math.PI)&&(n=Math.PI),n},t.segmentSplit=function(t,e,n){for(var o,i=new Array,r=0,s=n;r<s.length;r++)if(o=s[r],this.isPointInSegment(t,e,o)){for(var a=!1,l=0,u=i;l<u.length;l++){var h=u[l];if(this.isPointEqual(o,h)){a=!0;break}}a||i.push(o.clone())}if(n=i,n.length<=1)return n;var c,p;for(c=0;c<n.length;c++)for(p=c+1;p<n.length;p++)n[p].subtract(t).length<n[c].subtract(t).length&&(o=n[c],n[c]=n[p],n[p]=o);return n},t.calculatePolyArea=function(t){if(t.length<2)return 0;if(2==t.length)return t[0].crossProd(t[1])/2;for(var e,n,o=0,i=0;i<t.length;i++)e=t[i],n=t[this.nextIndex(i,t.length)],o+=e.crossProd(n);return.5*o},t.calculatePolyCenter=function(t){for(var e=Number.MAX_VALUE,n=Number.MAX_VALUE,i=-Number.MAX_VALUE,r=-Number.MAX_VALUE,s=0,a=t;s<a.length;s++){var l=a[s];e=Math.min(l.x,e),i=Math.max(l.x,i),n=Math.min(l.y,n),r=Math.max(l.y,r)}return new o.a(.5*(e+i),.5*(n+r))},t.calculatePolyCentroid=function(t){if(0==t.length)return new o.a;for(var e=0,n=0,i=0,r=t;i<r.length;i++){var s=r[i];e+=s.x,n+=s.y}return new o.a(e/t.length,n/t.length)},t.computeAreaByPointArray=function(t){if(t.length<2)return 0;if(2==t.length)return t[0].crossProd(t[1])/2;var e,n,o,i=0,r=t.length;for(o=0;o<t.length;o++)e=t[o%r],n=t[(o+1)%r],i+=e.crossProd(n);return i/=2},t.randomColor=function(){return 16777215*Math.random()},t.transformPath=function(t,e){for(var n=new Array,o=0,i=t;o<i.length;o++){var r=i[o];n.push(e.transformPoint(r))}return n},t.clipLineWithPoints=function(e,n,o){for(var i=new Array,r=0,s=o;r<s.length;r++){var a=s[r];this.isPointInSegment(e,n,a)&&(this.pointIndex(i,a)==t.NONE_INDEX&&i.push(a))}return i.sort(function(t,n){return t.subtract(e).length-n.subtract(e).length}),i},t.clipLineWithSegments=function(t,e,n){for(var o=new Array,i=0,r=n;i<r.length;i++){var s=r[i];o.push(s.start),o.push(s.stop);var a=this.calculateIntersectPointOnSegment(t,e,s.start,s.stop);a&&o.push(a)}return this.clipLineWithPoints(t,e,o)},t.cleanPath=function(t){for(var e=new Array,n=0;n<t.length;n++){var o=t[this.preIndex(n,t.length)],i=t[this.nextIndex(n,t.length)];this.isPointInSegment(o,i,t[n])||(this.isPointEqual(t[n],o)||e.push(t[n]))}return e},t.vectorIncludedAngle=function(t,e,n){var o=Math.atan2(e.y,e.x)-Math.atan2(t.y,t.x);return n?o<0&&(o+=2*Math.PI):o<-Math.PI&&(o+=2*Math.PI),o},t.vectorIncludedRadian=function(t,e,n){void 0===n&&(n=!0);var o=Math.atan2(e.y,e.x)-Math.atan2(t.y,t.x);return n?o<0&&(o+=2*Math.PI):o<-Math.PI&&(o+=2*Math.PI),o},t.analysisFileExtentionFromURL=function(t){var e,n,o,i,r;if(e=t,-1!=e.indexOf("?")&&(i=e.split("?"),e=i[0],r=i[1]),-1!=e.indexOf("#")&&(e=e.split("#")[0]),-1!=e.indexOf("@!")&&(e=e.split("@!")[0]),-1!=e.indexOf("/")?(i=e.split("/"),n=i[i.length-1]):n=e,-1==n.indexOf("."))return null;if(o=this.analysisFileExtentionFromFileName(n),""==o&&(o=null),r){var s=r;if(s.name&&""!=s.name)return this.analysisFileExtentionFromFileName(s.name)}return o},t.analysisFileExtentionFromFileName=function(t){var e=t.split(".");return e.length>=2?e[e.length-1]:null},t.analysisParameters=function(t){var e,n,o={},i=t.split("&");for(n=0;n<i.length;n++)e=i[n].split("="),o[e[0]]=e[1];return o},t.isPoint2DEqual=function(e,n,o){return void 0===o&&(o=NaN),e==n||t.isNumberEqual(e.x,n.x,o)&&t.isNumberEqual(e.y,n.y,o)},t.raySegmentIntersection=function(e,n,o,i){if(this.isPoint2DEqual(o,i))return null;if(this.ab.setTo(i.x-o.x,i.y-o.y),t.isNumberEqual(this.ab.crossProd(n)/this.ab.length,0))return null;if(this.ca.setTo(o.x-e.x,o.y-e.y),t.isNumberEqual(this.ca.crossProd(this.ab)/this.ab.length,0))this.k=-this.ca.dotProd(this.ab)/this.ab.length/this.ab.length;else{this.p0p1.setTo(i.x-e.x,i.y-e.y);var r=this.ca.crossProd(n);this.k=r/(r+n.crossProd(this.p0p1))}return this.k<0&&!this.isNumberEqual(this.k,0)||this.k>1&&!this.isNumberEqual(this.k,1)?null:(this.p.setTo(o.x+this.k*this.ab.x,o.y+this.k*this.ab.y),this.cd.setTo(this.p.x-e.x,this.p.y-e.y),this.isNumberEqual(this.cd.dotProd(n),this.cd.length)?{point:this.p.clone(),dist:this.cd.length}:null)},t.isPointInTriangle=function(t,e,n,o){var i=t.subtract(e),r=n.subtract(e),s=o.subtract(e),a=i.crossProd(r)*i.crossProd(s);if(a>0&&!this.isNumberEqual(a,0))return!1;var l=t.subtract(n),u=e.subtract(n),h=o.subtract(n),c=l.crossProd(u)*l.crossProd(h);if(c>0&&!this.isNumberEqual(c,0))return!1;var p=t.subtract(o),d=e.subtract(o),f=n.subtract(o),g=p.crossProd(d)*p.crossProd(f);return!(g>0&&!this.isNumberEqual(g,0))},t.getGrayOfPixel=function(t){return 16777215*(.3*(t>>16&255)+.59*(t>>8&255)+.11*(255&t))/255},t.normalToRGB=function(t){return.5*(t.x+1)*255<<16|.5*(t.y+1)*255<<8|.5*(t.z+1)*255},t.isStringEmptyOrNull=function(t){return null==t||""==t},t.calcCircle=function(t,e,n){var o=new r.a,i=t.x*t.x+t.y*t.y,s=e.x*e.x+e.y*e.y,a=n.x*n.x+n.y*n.y,l=(n.y-e.y)*t.x+(t.y-n.y)*e.x+(e.y-t.y)*n.x;return o.center.x=((s-a)*t.y+(a-i)*e.y+(i-s)*n.y)/(2*l),o.center.y=((a-s)*t.x+(i-a)*e.x+(s-i)*n.x)/(2*l),o.radius=t.subtract(o.center).length,o},t.calcArcPath=function(e,n,i,r){void 0===r&&(r=4);var s,a=i.subtract(e).crossProd(n.subtract(i)),l=t.calcCircle(e,n,i),u=e.subtract(l.center),h=n.subtract(l.center),c=t.vectorRadian(l.center,e);s=a>0?2*Math.PI-t.vectorIncludedRadian(h,u,!0):t.vectorIncludedRadian(h,u,!0);var p=r/l.radius,d=Math.floor(s/p);a<0&&(p*=-1);for(var f=new Array,g=0;g<d;g++){var m=l.radius*Math.cos(c+g*p)+l.center.x,_=l.radius*Math.sin(c+g*p)+l.center.y;f.push(new o.a(m,_))}return f.push(n),f},t.lineCircleIntersection=function(e,n){var o=this.pointToLine2DDistance(e,n.center);if(o>n.radius+.001)return[];var i=t.calculateFootPointOnLine(e.p0,e.p0.add(e.dir),n.center);if(t.isNumberEqual(o,n.radius))return[i];var r=e.dir.clone(),s=Math.sqrt(n.radius*n.radius-o*o);return r=r.normalize().multiply(s),[i.add(r),i.subtract(r)]},t.circleCircleIntersection=function(e,n){var o=e.center.subtract(n.center).length;if(o>e.radius+n.radius+.001)return[];if(o<Math.abs(e.radius-n.radius)+.001)return[];var i;if(t.isNumberEqual(o,e.radius+n.radius,.001)){i=n.center.subtract(e.center);var r=e.radius;return i=i.normalize().multiply(r),[e.center.add(i)]}if(t.isNumberEqual(o,Math.abs(e.radius-n.radius),.001)){i=e.radius>n.radius?n.center.subtract(e.center):e.center.subtract(n.center);var s=e.radius;return i=i.normalize().multiply(s),[e.center.add(i)]}var a=[],l=(o*o+e.radius*e.radius-n.radius*n.radius)/(2*o*e.radius),u=t.acos(l);i=n.center.subtract(e.center),i.normalize();var h=t.rotateByZ(i,u),c=e.radius;h=h.normalize().multiply(c),a.push(e.center.add(h));var p=t.rotateByZ(i,-u);return c=e.radius,p=p.normalize().multiply(c),a.push(e.center.add(p)),a},t.pointToLine2DDistance=function(t,e){return Math.abs(e.subtract(t.p0).crossProd(t.dir))},t.rayRectFaceIntersect=function(e,n,o,r){void 0===o&&(o=!1),void 0===r&&(r=!1);var a=new Array(16);a[0]=e.p0.x-e.p1.x,a[1]=e.p0.y-e.p1.y,a[2]=e.p0.z-e.p1.z,a[4]=n.p1.x-n.p0.x,a[5]=n.p1.y-n.p0.y,a[6]=n.p1.z-n.p0.z,a[8]=n.p2.x-n.p0.x,a[9]=n.p2.y-n.p0.y,a[10]=n.p2.z-n.p0.z,a[15]=1;var l,u,h,c,p=new s.a(a),d=new i.a(e.p0.x-n.p0.x,e.p0.y-n.p0.y,e.p0.z-n.p0.z);if(p.invert())if(c=p.transformPoint(d),l=c.x,u=c.y,h=c.z,o){if((u>0||t.isNumberEqual(u,0))&&(h>0||t.isNumberEqual(h,0))&&(u+h<1||t.isNumberEqual(u+h,1))&&(l>0||l<0&&r))return new i.a(e.p0.x+e.dir.x*l,e.p0.y+e.dir.y*l,e.p0.z+e.dir.z*l)}else if((u>0||t.isNumberEqual(u,0))&&(u<1||t.isNumberEqual(u,1))&&(h>0||t.isNumberEqual(h,0))&&(h<1||t.isNumberEqual(h,1))&&(l>0||l<0&&r))return new i.a(e.p0.x+e.dir.x*l,e.p0.y+e.dir.y*l,e.p0.z+e.dir.z*l);return null},t.composeMatrix3D=function(t,e,n,o){var i=[t.x,t.y,t.z,0,e.x,e.y,e.z,0,n.x,n.y,n.z,0,o.x,o.y,o.z,1];return new s.a(i)},t.computeTwoVectorAngle=function(e,n){var o=e.clone(),i=n.clone();o.normalize(),i.normalize();var r=o.dotProd(i);return r>=1?r=1:r<=-1&&(r=-1),isNaN(t.acos(r)),t.acos(r)},t.calculateExcenter=function(t,e,n){if(this.isThreePointsOnOneLine(t,e,n))return null;var i=t.x,r=e.x,s=n.x,a=t.y,l=e.y,u=n.y,h=i*i+a*a,c=r*r+l*l,p=s*s+u*u,d=i*l+r*u+s*a-i*u-r*a-s*l,f=(c*u+h*l+p*a-c*a-p*l-h*u)/d/2,g=(p*r+c*i+h*s-h*r-c*s-p*i)/d/2,m=new o.a;return m.x=f,m.y=g,m},t.calculateCircumcircleRadius=function(t,e,n){if(this.isThreePointsOnOneLine(t,e,n))return-1;var o=t.x,i=e.x,r=n.x,s=t.y,a=e.y,l=n.y,u=Math.pow((o-i)*(o-i)+(s-a)*(s-a),.5),h=Math.pow((o-r)*(o-r)+(s-l)*(s-l),.5),c=Math.pow((i-r)*(i-r)+(a-l)*(a-l),.5),p=(u+h+c)/2;return u*h*c/(4*Math.pow(p*(p-u)*(p-h)*(p-c),.5))},t.isThreePointsOnOneLine=function(t,e,n){var o=Math.pow(1/t.dist(e),.5);return Math.abs(o*(e.x-t.x)*n.y-o*(e.y-t.y)*n.x-o*t.y*e.x+o*t.x*e.y)<1e-8},t.prototype.splitVertex=function(e,n,o,i,r,s){var a,l,u,h,c=new Array(e.length/3*2),p=new Array(e.length/3),d=new Array(e.length/3),f=new Array(e.length/3);for(a=0;a<f.length;a++)f[a]=new Array(0);for(a=0;a<o.length;a++)if(u=o[a],h=i[a],d[u]){if(!t.isNumberEqual(c[2*u+0],n[2*h+0])||!t.isNumberEqual(c[2*u+1],n[2*h+1])||p[u]!=s[a/3]){var g=!1;for(l=0;l<f[u].length;l++)if(t.isNumberEqual(c[2*f[u][l]+0],n[2*h+0])&&t.isNumberEqual(c[2*f[u][l]+1],n[2*h+1])&&p[2*f[u][l]+1]==s[a/3]){o[a]=f[u][l],g=!0;break}if(!g){var m=e.length/3;f[u].push(m),f.push(new Array(0)),c.push(n[2*h+0],n[2*h+1]),p.push(s[a/3]),o[a]=m,e.push(e[3*u+0],e[3*u+1],e[3*u+2]),r.push(r[3*u+0],r[3*u+1],r[3*u+2])}}}else d[u]=!0,c[2*u+0]=n[2*h+0],c[2*u+1]=n[2*h+1],p[u]=s[a/3];return c},t.convert2OBJ=function(t,e,n){var o="";o+="\n\n\n";var i;for(i=0;i<t.length/3;i++)o=o+"v "+t[3*i]+" "+t[3*i+1]+" "+t[3*i+2]+"\n";for(i=0;i<e.length/2;i++)o=o+"vt "+e[2*i]+e[2*i+1]+" 0\n";o+="g Box001\n";var r,s,a;for(i=0;i<n.length/3;i++)r=n[3*i]+1,s=n[3*i+1]+1,a=n[3*i+2]+1,o=o+"f "+r+"/"+r+" "+s+"/"+s+" "+a+"/"+a+"\n";return o+="\n\n\n\n"},t.mergeTwoArray=function(t,e,n){var o;if(!n){var i=t.slice();for(o=0;o<e.length;o++)i.push(e[o]);return i}for(o=0;o<e.length;o++)t.push(e[o]);return null},t.decimalToFix=function(t,e,n){if(n){var o=t.toString(),i=o.split(/\./);if(2==i.length){var r=i[1];r.length>e&&(r=r.substr(0,e),o=i[0]+"."+r,t=Number(o))}return t}var s=Math.pow(10,e);return t*s/s},t.sortSegmentPoints=function(t){if(t.length<2)return t.concat([]);for(var e=[],n=t[1].subtract(t[0]),o=1;o<t.length;o++){var i={point:t[o]};i.d=n.dotProd(t[o].subtract(t[0])),e.push(i)}e.sort(function(t,e){var n=t.d,o=e.d;return n>o?1:n<o?-1:0});var r=[];r.push(t[0]);for(var s=0,a=e;s<a.length;s++){var l=a[s];r.push(l.point)}return r},t.lineLineIntersection=function(e,n){var o=t.calculateIntersectPoint(e.p0,e.p1,n.p0,n.p1);return o?[o]:[]},t.calcProjectionDistP2E=function(t,e,n){var o=n.subtract(e),i=t.subtract(e),r=o.length;return o.dotProd(i)/r/r},t.base64toBytes=function(t){for(var e=t.split(","),n=(e[0].match(/:(.*?);/)[1],atob(e[1])),o=n.length,i=new Uint8Array(o);o--;)i[o]=n.charCodeAt(o);return i},t}();a.TOLERANCE=1e-5,a.NONE_INDEX=-1,a._tmpP0=new o.a,a._tmpP1=new o.a,a._tmpP2=new o.a,a._tmpP3=new o.a,a._tmpN0=0,a._tmpN1=0,a._tmpN2=0,a._tmpN3=0,a.p0p1=new o.a,a.p0p2=new o.a,a.p0p3=new o.a,a.p2p3=new o.a,a.p2p0=new o.a,a.p2p1=new o.a,a.ab=new o.a,a.ca=new o.a,a.p=new o.a,a.cd=new o.a,a.k=0},gMRQ:function(t,e,n){"use strict";var o=n("gMpX"),i=n("B0l3");n.d(e,"a",function(){return r});var r=function(){function t(){this._items=new i.a}return t.getInstance=function(){return t._instance||(t._instance=new t),t._instance},t.prototype.hasItem=function(t){return null!=this._items[t]},t.prototype.getItemByNo=function(t){var e=this._items[t];return null==e&&(e=new o.a(t,!0),this._items[t]=e),e},t.prototype.addItem=function(t){var e=t.no;this.hasItem(e)||(t.autoLoad||(t=new o.a(e,!0,t)),this._items[e]=t)},t}()},gMpX:function(t,e,n){"use strict";var o=n("Y+7l"),i=n("tdkC"),r=n("pyn6"),s=n("yGZz");n.d(e,"a",function(){return l});var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),l=function(t){function e(e,n,o){void 0===n&&(n=!0),void 0===o&&(o=null);var i=t.call(this)||this;if(i._no="",i._id=0,i._width=0,i._length=0,i._name="",i._category=0,i._previewUrl="",i._planUrl="",i._planBMD=null,i.assetReadyCallbacks=[],""==e||!e)throw new Error("物品编号不正确");return i.no=e,i._autoLoad=n,i._detailReady=!1,i._assetsReady=!1,o?(i.copyFrom(o),i._detailReady=!0,i.autoLoad&&i.requestAssets()):i.requestDetail(),i}return a(e,t),e.prototype.requestDetail=function(){var t=s.a.record[this.no];t?this.requestDataResultHandler(t):this.requestDataErrorHandler("load failed")},e.prototype.requestDataResultHandler=function(t){var e=t;if(this.copyFrom(e),this.assetReadyCallbacks.length>0)for(var n=0;n<this.assetReadyCallbacks.length;n++)this.assetReadyCallbacks[n](this.no);this._detailReady=!0,this.apiService=null,this.autoLoad&&this.requestAssets()},e.prototype.requestDataErrorHandler=function(t){console.error(this.no+": "+t.toString())},e.prototype.requestAssets=function(){var t=this;this._planBMD=new r.a,this._planBMD.load(this.planUrl,function(){t.requestAssetsCompleteHandler()})},e.prototype.requestAssetsCompleteHandler=function(){this._assetsReady=!0,this.dispatchEvent(new o.a(o.a.HUXING_ITEM_ASSET_READY),this)},Object.defineProperty(e.prototype,"autoLoad",{get:function(){return this._autoLoad},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"detailReady",{get:function(){return this._detailReady},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"assetsReady",{get:function(){return this._assetsReady},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"no",{get:function(){return this._no},set:function(t){this._no=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._id},set:function(t){this._id=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},set:function(t){this._name=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"category",{get:function(){return this._category},set:function(t){this._category=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._length},set:function(t){this._length=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"previewUrl",{get:function(){return this._previewUrl},set:function(t){this._previewUrl=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"planUrl",{get:function(){return this._planUrl},set:function(t){this._planUrl=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"planBMD",{get:function(){return this._planBMD},set:function(t){this._planBMD=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageUrlField",{get:function(){return"previewUrl"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"preloadUrlField",{get:function(){return"planUrl"},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(t){this.id=t.id,this.no=t.no,this.name=t.name,this.category=t.category,this.width=t.width,this.length=t.length,this.previewUrl=t.preview_url,this.planUrl=t.plan_url},e}(i.a)},gvna:function(t,e,n){"use strict";var o=n("PbJf"),i=n("Wilg"),r=n("WFe8");n.d(e,"a",function(){return s});var s=function(){function t(){this.storeyHeight=0,this._rulerUnit=0,this.orientation=0,this.wallThickness=12,this.wallRulerMode=0;var t=window.localStorage.getItem("storeyHeight");this.storeyHeight=t?parseInt(t):r.a.DEFAULT_HEIGHT;var e=window.localStorage.getItem("wallThickness");this.wallThickness=e?parseInt(e):r.a.DEFAULT_LENGTH,this.rulerUnit=o.a.MM,this.orientation=0,this.wallRulerMode=i.a.INLINE}return Object.defineProperty(t.prototype,"rulerUnit",{get:function(){return this._rulerUnit},set:function(t){this._rulerUnit!=t&&(this._rulerUnit=t)},enumerable:!0,configurable:!0}),t.prototype.getWallThickness=function(t){return void 0===t&&(t=o.a.CM),this.transferByUnit(this.wallThickness,t)},t.prototype.setWallThickness=function(t){t=Math.min(t,r.a.MAX_LENGTH),t=Math.max(t,r.a.MIN_LENGTH),this.wallThickness=t},t.prototype.getStoreyHeight=function(t){return this.transferByUnit(this.storeyHeight,t)},t.prototype.setStoreyHeight=function(t){t=Math.min(t,r.a.MAX_HEIGHT),t=Math.max(t,r.a.MIN_HEIGHT),this.storeyHeight=t},t.prototype.dumpData=function(){return{storeyHeight:this.storeyHeight,rulerUnit:this.rulerUnit,orientation:this.orientation}},t.prototype.loadData=function(t){t.hasOwnProperty("rulerUnit")&&(this.rulerUnit=t.rulerUnit),t.hasOwnProperty("storeyHeight")&&(this.storeyHeight=t.storeyHeight),t.hasOwnProperty("orientation")&&(this.orientation=t.orientation)},t.prototype.transferByUnit=function(t,e){return e==o.a.MM?10*t:e==o.a.CM?t:t/100},t}()},hSl8:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){}return Object.defineProperty(t,"isIOS",{get:function(){var t=navigator.userAgent.toLowerCase(),e=t.indexOf("ipad"),n=t.indexOf("iphone");return e>=0||n>=0},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isAndroid",{get:function(){return navigator.userAgent.toLowerCase().indexOf("android")>=0},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isMobile",{get:function(){return/Android|webOS|iPhone|iPod|ipad|BlackBerry/i.test(navigator.userAgent.toLowerCase())},enumerable:!0,configurable:!0}),t}()},iHFl:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(t,e){void 0===e&&(e=null),this.type=t,this.data=e}return t}()},ihW0:function(t,e,n){"use strict";var o=n("S23b"),i=n("fPy1"),r=n("vgYD");n.d(e,"a",function(){return a});var s=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=function(t){function e(){var n=t.call(this,!1)||this;return n._decimalPlaces=0,n._value=0,n._inputable=!1,n._inputData=null,n.inputNumberScale=1,n._selected=!1,n.initValue=0,n.angle=0,n.dom.style.borderRadius="2px",n.dom.style.padding="1px 4px 1px 4px",n.color=r.a.toString(r.a.FONT),n.size=12,n.textGlow=e.WHITE_SHADOW,n.borderColor=r.a.toString(r.a.BLUE2),n.inputable=!1,n.inputData=null,n.decimalPlaces=0,n.value=0,n}return s(e,t),Object.defineProperty(e.prototype,"tagName",{get:function(){return"RulerInput"},enumerable:!0,configurable:!0}),e.prototype.changeValue=function(){this.value=this.textValue;var t=new i.a(i.a.CHANGE,null,this.value,this.inputData);if(this.inputData){var e=this.inputData.direct;if(e){var n,o=this._value/this.inputNumberScale,r=this.initValue/this.inputNumberScale;n=this.inputData.value?Math.min(o,this.inputData.value)-r:o-r,n<0&&(e.x*=-1,e.y*=-1);var s=Math.abs(n);e.normalize(s),t.changeVector=e}}this.dispatchEvent(t,this)},e.prototype.rotate=function(t){this.angle=t,this.rotation=t},e.prototype.touchStart=function(t){this.dispatchEvent(new i.a(i.a.CLICK,this),this),this.selected=!0},Object.defineProperty(e.prototype,"decimalPlaces",{get:function(){return this._decimalPlaces},set:function(t){this._decimalPlaces=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){this.textValue=t,this._value=this.textValue},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputable",{get:function(){return this._inputable},set:function(t){this._inputable=t,1==this._inputable?(this.selected=!1,this.touchEnable=!0):(this.borderThickness=0,this.color=r.a.toString(r.a.FONT),this.textGlow=e.WHITE_SHADOW,this.backgroundColor=r.a.toRGBAstring(0,0),this.touchEnable=!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selected",{get:function(){return this._selected},set:function(t){this._selected=t,1==t?(this.borderThickness=1,this.color=r.a.toString(r.a.WHITE),this.textGlow="",this.backgroundColor=r.a.toRGBAstring(r.a.BLUE2,1)):(this.borderThickness=1,this.color=r.a.toString(r.a.BLUE2),this.textGlow="",this.backgroundColor=r.a.toRGBAstring(r.a.WHITE,1))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputData",{get:function(){return this._inputData},set:function(t){this._inputData=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textValue",{get:function(){return Number(Number(this.text).toFixed(this.decimalPlaces))},set:function(t){var e=t.toFixed(this.decimalPlaces);this.text=e,this.x=8*-e.length/2,this.y=-20},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this.selected=!1,this.inputable=!1,this.inputData=null,this.value=0,this.initValue=0,this.decimalPlaces=0,this.inputNumberScale=1,this.angle=0,this.rotation=0},e}(o.a);a.WHITE_SHADOW="0px 0px 2px #ffffff , -0px -0px 2px #ffffff"},ijgM:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){}return t}()},jCBq:function(t,e,n){"use strict";function o(t){return s._12(0,[s._13(671088640,1,{buttonQueryList:1}),(t()(),s._15(0,null,null,1,"div",[["class","title"]],null,null,null,null,null)),(t()(),s._14(null,["厅"])),(t()(),s._14(null,["\n"])),(t()(),s._15(0,null,null,13,"div",[["class","content"]],null,null,null,null,null)),(t()(),s._14(null,["\n    "])),(t()(),s._15(16777216,null,null,1,"color-button",[["class","roomTypeButton"],["colorStyle","3"],["height","24px"],["label","门厅"],["textSize","14"],["width","64px"]],null,[[null,"touchend"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchstart"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==s._16(t,7)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,7).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,7).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,7).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,7).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,7).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,7).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,7).touchEnd(n)&&o}if("touchend"===e){o=!1!==i.roomTypeClick("门厅")&&o}return o},l.a,l.b)),s._17(4308992,[[1,4]],0,u.a,[s.Q,s._18],{width:[0,"width"],height:[1,"height"],colorStyle:[2,"colorStyle"],textSize:[3,"textSize"],label:[4,"label"]},null),(t()(),s._14(null,["\n    "])),(t()(),s._15(16777216,null,null,1,"color-button",[["class","roomTypeButton"],["colorStyle","3"],["height","24px"],["label","客厅"],["textSize","14"],["width","64px"]],null,[[null,"touchend"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchstart"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==s._16(t,10)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,10).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,10).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,10).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,10).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,10).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,10).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,10).touchEnd(n)&&o}if("touchend"===e){o=!1!==i.roomTypeClick("客厅")&&o}return o},l.a,l.b)),s._17(4308992,[[1,4]],0,u.a,[s.Q,s._18],{width:[0,"width"],height:[1,"height"],colorStyle:[2,"colorStyle"],textSize:[3,"textSize"],label:[4,"label"]},null),(t()(),s._14(null,["\n    "])),(t()(),s._15(16777216,null,null,1,"color-button",[["class","roomTypeButton"],["colorStyle","3"],["height","24px"],["label","餐厅"],["textSize","14"],["width","64px"]],null,[[null,"touchend"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchstart"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==s._16(t,13)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,13).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,13).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,13).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,13).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,13).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,13).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,13).touchEnd(n)&&o}if("touchend"===e){o=!1!==i.roomTypeClick("餐厅")&&o}return o},l.a,l.b)),s._17(4308992,[[1,4]],0,u.a,[s.Q,s._18],{width:[0,"width"],height:[1,"height"],colorStyle:[2,"colorStyle"],textSize:[3,"textSize"],label:[4,"label"]},null),(t()(),s._14(null,["\n    "])),(t()(),s._15(16777216,null,null,1,"color-button",[["class","roomTypeButton"],["colorStyle","3"],["height","24px"],["label","客餐厅"],["textSize","14"],["width","64px"]],null,[[null,"touchend"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchstart"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==s._16(t,16)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,16).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,16).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,16).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,16).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,16).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,16).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,16).touchEnd(n)&&o}if("touchend"===e){o=!1!==i.roomTypeClick("客餐厅")&&o}return o},l.a,l.b)),s._17(4308992,[[1,4]],0,u.a,[s.Q,s._18],{width:[0,"width"],height:[1,"height"],colorStyle:[2,"colorStyle"],textSize:[3,"textSize"],label:[4,"label"]},null),(t()(),s._14(null,["\n"])),(t()(),s._14(null,["\n"])),(t()(),s._15(0,null,null,1,"div",[["class","title"]],null,null,null,null,null)),(t()(),s._14(null,["室"])),(t()(),s._14(null,["\n"])),(t()(),s._15(0,null,null,22,"div",[["class","content"]],null,null,null,null,null)),(t()(),s._14(null,["\n    "])),(t()(),s._15(16777216,null,null,1,"color-button",[["class","roomTypeButton"],["colorStyle","3"],["height","24px"],["label","主卧"],["textSize","14"],["width","64px"]],null,[[null,"touchend"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchstart"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==s._16(t,25)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,25).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,25).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,25).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,25).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,25).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,25).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,25).touchEnd(n)&&o}if("touchend"===e){o=!1!==i.roomTypeClick("主卧")&&o}return o},l.a,l.b)),s._17(4308992,[[1,4]],0,u.a,[s.Q,s._18],{width:[0,"width"],height:[1,"height"],colorStyle:[2,"colorStyle"],textSize:[3,"textSize"],label:[4,"label"]},null),(t()(),s._14(null,["\n    "])),(t()(),s._15(16777216,null,null,1,"color-button",[["class","roomTypeButton"],["colorStyle","3"],["height","24px"],["label","次卧"],["textSize","14"],["width","64px"]],null,[[null,"touchend"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchstart"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==s._16(t,28)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,28).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,28).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,28).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,28).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,28).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,28).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,28).touchEnd(n)&&o}if("touchend"===e){o=!1!==i.roomTypeClick("次卧")&&o}return o},l.a,l.b)),s._17(4308992,[[1,4]],0,u.a,[s.Q,s._18],{width:[0,"width"],height:[1,"height"],colorStyle:[2,"colorStyle"],textSize:[3,"textSize"],label:[4,"label"]},null),(t()(),s._14(null,["\n    "])),(t()(),s._15(16777216,null,null,1,"color-button",[["class","roomTypeButton"],["colorStyle","3"],["height","24px"],["label","书房"],["textSize","14"],["width","64px"]],null,[[null,"touchend"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchstart"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==s._16(t,31)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,31).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,31).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,31).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,31).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,31).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,31).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,31).touchEnd(n)&&o}if("touchend"===e){o=!1!==i.roomTypeClick("书房")&&o}return o},l.a,l.b)),s._17(4308992,[[1,4]],0,u.a,[s.Q,s._18],{width:[0,"width"],height:[1,"height"],colorStyle:[2,"colorStyle"],textSize:[3,"textSize"],label:[4,"label"]},null),(t()(),s._14(null,["\n    "])),(t()(),s._15(16777216,null,null,1,"color-button",[["class","roomTypeButton"],["colorStyle","3"],["height","24px"],["label","儿童房"],["textSize","14"],["width","64px"]],null,[[null,"touchend"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchstart"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==s._16(t,34)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,34).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,34).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,34).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,34).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,34).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,34).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,34).touchEnd(n)&&o}if("touchend"===e){o=!1!==i.roomTypeClick("儿童房")&&o}return o},l.a,l.b)),s._17(4308992,[[1,4]],0,u.a,[s.Q,s._18],{width:[0,"width"],height:[1,"height"],colorStyle:[2,"colorStyle"],textSize:[3,"textSize"],label:[4,"label"]},null),(t()(),s._14(null,["\n    "])),(t()(),s._15(16777216,null,null,1,"color-button",[["class","roomTypeButton"],["colorStyle","3"],["height","24px"],["label","储物室"],["textSize","14"],["width","64px"]],null,[[null,"touchend"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchstart"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==s._16(t,37)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,37).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,37).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,37).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,37).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,37).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,37).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,37).touchEnd(n)&&o}if("touchend"===e){o=!1!==i.roomTypeClick("储物室")&&o}return o},l.a,l.b)),s._17(4308992,[[1,4]],0,u.a,[s.Q,s._18],{width:[0,"width"],height:[1,"height"],colorStyle:[2,"colorStyle"],textSize:[3,"textSize"],label:[4,"label"]},null),(t()(),s._14(null,["\n    "])),(t()(),s._15(16777216,null,null,1,"color-button",[["class","roomTypeButton"],["colorStyle","3"],["height","24px"],["label","多功能室"],["textSize","14"],["width","64px"]],null,[[null,"touchend"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchstart"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==s._16(t,40)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,40).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,40).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,40).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,40).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,40).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,40).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,40).touchEnd(n)&&o}if("touchend"===e){o=!1!==i.roomTypeClick("多功能室")&&o}return o},l.a,l.b)),s._17(4308992,[[1,4]],0,u.a,[s.Q,s._18],{width:[0,"width"],height:[1,"height"],colorStyle:[2,"colorStyle"],textSize:[3,"textSize"],label:[4,"label"]},null),(t()(),s._14(null,["\n    "])),(t()(),s._15(16777216,null,null,1,"color-button",[["class","roomTypeButton"],["colorStyle","3"],["height","24px"],["label","衣帽间"],["textSize","14"],["width","64px"]],null,[[null,"touchend"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchstart"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==s._16(t,43)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,43).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,43).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,43).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,43).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,43).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,43).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,43).touchEnd(n)&&o}if("touchend"===e){o=!1!==i.roomTypeClick("衣帽间")&&o}return o},l.a,l.b)),s._17(4308992,[[1,4]],0,u.a,[s.Q,s._18],{width:[0,"width"],height:[1,"height"],colorStyle:[2,"colorStyle"],textSize:[3,"textSize"],label:[4,"label"]},null),(t()(),s._14(null,["\n"])),(t()(),s._14(null,["\n"])),(t()(),s._15(0,null,null,1,"div",[["class","title"]],null,null,null,null,null)),(t()(),s._14(null,["厨卫"])),(t()(),s._14(null,["\n"])),(t()(),s._15(0,null,null,10,"div",[["class","content"]],null,null,null,null,null)),(t()(),s._14(null,["\n    "])),(t()(),s._15(16777216,null,null,1,"color-button",[["class","roomTypeButton"],["colorStyle","3"],["height","24px"],["label","厨房"],["textSize","14"],["width","64px"]],null,[[null,"touchend"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchstart"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==s._16(t,52)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,52).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,52).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,52).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,52).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,52).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,52).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,52).touchEnd(n)&&o}if("touchend"===e){o=!1!==i.roomTypeClick("厨房")&&o}return o},l.a,l.b)),s._17(4308992,[[1,4]],0,u.a,[s.Q,s._18],{width:[0,"width"],height:[1,"height"],colorStyle:[2,"colorStyle"],textSize:[3,"textSize"],label:[4,"label"]},null),(t()(),s._14(null,["\n    "])),(t()(),s._15(16777216,null,null,1,"color-button",[["class","roomTypeButton"],["colorStyle","3"],["height","24px"],["label","卫生间"],["textSize","14"],["width","64px"]],null,[[null,"touchend"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchstart"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==s._16(t,55)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,55).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,55).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,55).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,55).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,55).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,55).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,55).touchEnd(n)&&o}if("touchend"===e){o=!1!==i.roomTypeClick("卫生间")&&o}return o},l.a,l.b)),s._17(4308992,[[1,4]],0,u.a,[s.Q,s._18],{width:[0,"width"],height:[1,"height"],colorStyle:[2,"colorStyle"],textSize:[3,"textSize"],label:[4,"label"]},null),(t()(),s._14(null,["\n    "])),(t()(),s._15(16777216,null,null,1,"color-button",[["class","roomTypeButton"],["colorStyle","3"],["height","24px"],["label","盥洗室"],["textSize","14"],["width","64px"]],null,[[null,"touchend"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchstart"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==s._16(t,58)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,58).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,58).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,58).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,58).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,58).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,58).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,58).touchEnd(n)&&o}if("touchend"===e){o=!1!==i.roomTypeClick("盥洗室")&&o}return o},l.a,l.b)),s._17(4308992,[[1,4]],0,u.a,[s.Q,s._18],{width:[0,"width"],height:[1,"height"],colorStyle:[2,"colorStyle"],textSize:[3,"textSize"],label:[4,"label"]},null),(t()(),s._14(null,["\n"])),(t()(),s._14(null,["\n"])),(t()(),s._15(0,null,null,1,"div",[["class","title"]],null,null,null,null,null)),(t()(),s._14(null,["其他"])),(t()(),s._14(null,["\n"])),(t()(),s._15(0,null,null,13,"div",[["class","content"]],null,null,null,null,null)),(t()(),s._14(null,["\n    "])),(t()(),s._15(16777216,null,null,1,"color-button",[["class","roomTypeButton"],["colorStyle","3"],["height","24px"],["label","玄关"],["textSize","14"],["width","64px"]],null,[[null,"touchend"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchstart"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==s._16(t,67)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,67).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,67).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,67).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,67).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,67).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,67).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,67).touchEnd(n)&&o}if("touchend"===e){o=!1!==i.roomTypeClick("玄关")&&o}return o},l.a,l.b)),s._17(4308992,[[1,4]],0,u.a,[s.Q,s._18],{width:[0,"width"],height:[1,"height"],colorStyle:[2,"colorStyle"],textSize:[3,"textSize"],label:[4,"label"]},null),(t()(),s._14(null,["\n    "])),(t()(),s._15(16777216,null,null,1,"color-button",[["class","roomTypeButton"],["colorStyle","3"],["height","24px"],["label","阳台"],["textSize","14"],["width","64px"]],null,[[null,"touchend"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchstart"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==s._16(t,70)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,70).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,70).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,70).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,70).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,70).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,70).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,70).touchEnd(n)&&o}if("touchend"===e){o=!1!==i.roomTypeClick("阳台")&&o}return o},l.a,l.b)),s._17(4308992,[[1,4]],0,u.a,[s.Q,s._18],{width:[0,"width"],height:[1,"height"],colorStyle:[2,"colorStyle"],textSize:[3,"textSize"],label:[4,"label"]},null),(t()(),s._14(null,["\n    "])),(t()(),s._15(16777216,null,null,1,"color-button",[["class","roomTypeButton"],["colorStyle","3"],["height","24px"],["label","露台"],["textSize","14"],["width","64px"]],null,[[null,"touchend"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchstart"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==s._16(t,73)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,73).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,73).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,73).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,73).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,73).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,73).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,73).touchEnd(n)&&o}if("touchend"===e){o=!1!==i.roomTypeClick("露台")&&o}return o},l.a,l.b)),s._17(4308992,[[1,4]],0,u.a,[s.Q,s._18],{width:[0,"width"],height:[1,"height"],colorStyle:[2,"colorStyle"],textSize:[3,"textSize"],label:[4,"label"]},null),(t()(),s._14(null,["\n    "])),(t()(),s._15(16777216,null,null,1,"color-button",[["class","roomTypeButton"],["colorStyle","3"],["height","24px"],["label","入户花园"],["textSize","14"],["width","64px"]],null,[[null,"touchend"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchstart"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==s._16(t,76)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,76).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,76).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,76).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,76).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,76).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,76).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,76).touchEnd(n)&&o}if("touchend"===e){o=!1!==i.roomTypeClick("入户花园")&&o}return o},l.a,l.b)),s._17(4308992,[[1,4]],0,u.a,[s.Q,s._18],{width:[0,"width"],height:[1,"height"],colorStyle:[2,"colorStyle"],textSize:[3,"textSize"],label:[4,"label"]},null),(t()(),s._14(null,["\n"]))],function(t,e){t(e,7,0,"64px","24px","3","14","门厅");t(e,10,0,"64px","24px","3","14","客厅");t(e,13,0,"64px","24px","3","14","餐厅");t(e,16,0,"64px","24px","3","14","客餐厅");t(e,25,0,"64px","24px","3","14","主卧");t(e,28,0,"64px","24px","3","14","次卧");t(e,31,0,"64px","24px","3","14","书房");t(e,34,0,"64px","24px","3","14","儿童房");t(e,37,0,"64px","24px","3","14","储物室");t(e,40,0,"64px","24px","3","14","多功能室");t(e,43,0,"64px","24px","3","14","衣帽间");t(e,52,0,"64px","24px","3","14","厨房");t(e,55,0,"64px","24px","3","14","卫生间");t(e,58,0,"64px","24px","3","14","盥洗室");t(e,67,0,"64px","24px","3","14","玄关");t(e,70,0,"64px","24px","3","14","阳台");t(e,73,0,"64px","24px","3","14","露台");t(e,76,0,"64px","24px","3","14","入户花园")},null)}function i(t){return s._12(0,[(t()(),s._15(16777216,null,null,1,"room-setting",[],null,[[null,"touchmove"],[null,"touchstart"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==s._16(t,1).touchMove(n)&&o}if("touchstart"===e){o=!1!==s._16(t,1).touchStart(n)&&o}return o},o,c)),s._17(4308992,null,0,a.a,[s.Q,s._18],null,null)],function(t,e){t(e,1,0)},null)}var r=n("XOoE"),s=n("/oeL"),a=n("JCpi"),l=n("3kKB"),u=n("ZCEW");n.d(e,"b",function(){return c}),e.a=o;var h=[r.a],c=s._11({encapsulation:0,styles:h,data:{}});s._19("room-setting",a.a,i,{position:"position",width:"width",height:"height",left:"left",top:"top",right:"right",bottom:"bottom",visible:"visible",alpha:"alpha",depth:"depth",rotation:"rotation",scalex:"scalex",scaley:"scaley",tooltip:"tooltip",backgroundcolor:"backgroundcolor",filter:"filter",buttonMode:"buttonMode"},{},[])},jDyV:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){}return t}();o.WALL=101,o.PILLAR=201,o.FLUE=202},k4IB:function(t,e,n){"use strict";var o=n("RWwX");n.d(e,"a",function(){return i});var i=function(){function t(){this.eventMap=new o.a}return Object.defineProperty(t,"inst",{get:function(){return null==t._instance&&(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),t.prototype.addEvent=function(t,e,n,o){var i=this.eventMap.getValue(t);if(null==i){var s=new r;s.func=e,s.thisObj=n,s.listener=o,i=[],i.push(s),this.eventMap.add(t,i)}else{if(this.contains(e,n,o,i)<0){var a=new r;a.func=e,a.thisObj=n,a.listener=o,i.push(a)}}},t.prototype.removeEvent=function(t,e,n,o){var i=this.eventMap.getValue(t);if(null!=i){var r=this.contains(e,n,o,i);r>=0&&i.splice(r,1)}},t.prototype.trigger=function(t,e){t.target=e;var n=[],o=this.eventMap.getValue(t.type);if(null!=o&&o.length>0)for(var i=o.length,r=0;r<i;r++){var s=o[r];s.listener==e&&n.push(s)}for(var a=0;a<n.length;a++){var s=n[a];s.func.call(s.thisObj,t)}},t.prototype.contains=function(t,e,n,o){for(var i=o.length,r=0;r<i;r++)if(o[r].func===t&&o[r].thisObj===e&&o[r].listener==n)return r;return-1},t}(),r=function(){function t(){}return t}()},kUfx:function(t,e,n){"use strict";var o=n("/oeL"),i=n("8Tef"),r=n("YihH"),s=n("FtES"),a=n("+ByO");n.d(e,"a",function(){return u});var l=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),u=function(t){function e(e,n){return t.call(this,e,n)||this}return l(e,t),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.updateComponentProperty(),this.width="130px",r.a.inst.addEvent(s.a.SETTINGS_CONFIRM,this.onConfirm,this)},e.prototype.setTargetOpening=function(t){this.targetOpening=t,this.openingWidthInput.finalLabel=Math.round(10*t.realWidth).toString(),this.openingWidthInput.selected=!1},e.prototype.showOpeningWidthSetting=function(){1==this.openingWidthInput.editable&&(this.openingWidthInput.selected=!0,this.currentInput=this.openingWidthInput,r.a.inst.open(this.targetOpening,"长度 /mm",Math.round(10*this.targetOpening.realWidth)),a.a.inst.moveLeft())},e.prototype.onConfirm=function(t){var e=t.data,n=e.target,o=e.value;this.targetOpening==n&&this.currentInput&&(this.currentInput==this.openingWidthInput&&this.targetOpening.doChangeWidth(Math.round(o/10)),this.setTargetOpening(this.targetOpening))},e.ctorParameters=function(){return[{type:o.Q},{type:o._18}]},e}(i.a)},kVR7:function(t,e,n){"use strict";var o=n("/oeL"),i=n("vgYD"),r=n("ExGp");n.d(e,"a",function(){return a});var s=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.isShowBg="true",o.bgColor=i.a.toRGBstring(i.a.BLACK),o.bgOverColor=i.a.toRGBstring(i.a.MASTER),o.bgDownColor=i.a.toRGBstring(i.a.MASTER),o.borderWidth=0,o.borderColor=i.a.toRGBstring(i.a.BLACK),o}return s(e,t),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.updateComponentProperty(),this.borderWidth>0&&this.renderer.setStyle(this.dom,"border",this.borderWidth+"px solid "+this.borderColor),this.bgDom=this.bgRef.nativeElement,this.renderer.setStyle(this.bgDom,"width",this._width),this.renderer.setStyle(this.bgDom,"height",this._height),"false"==this.isShowBg&&this.renderer.setStyle(this.bgDom,"display","none"),this.iconDom=this.iconRef.nativeElement,this.iconWidth=this._width,this.iconHeight=this._height,this.upStyle()},Object.defineProperty(e.prototype,"width",{set:function(t){this._width=t,this.renderer.setStyle(this.dom,"width",t),this.bgDom&&this.renderer.setStyle(this.bgDom,"width",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{set:function(t){this._height=t,this.renderer.setStyle(this.dom,"height",t),this.bgDom&&this.renderer.setStyle(this.bgDom,"height",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iconWidth",{set:function(t){this.renderer.setStyle(this.iconDom,"width",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iconHeight",{set:function(t){this.renderer.setStyle(this.iconDom,"height",t)},enumerable:!0,configurable:!0}),e.prototype.upStyle=function(){this.renderer.setStyle(this.bgDom,"background-color",this.bgColor),this.iconUp&&this.renderer.setStyle(this.iconDom,"background-image","url("+this.iconUp+")")},e.prototype.overStyle=function(){this.renderer.setStyle(this.bgDom,"background-color",this.bgOverColor),this.iconOver&&this.renderer.setStyle(this.iconDom,"background-image","url("+this.iconOver+")")},e.prototype.downStyle=function(){this.renderer.setStyle(this.bgDom,"background-color",this.bgDownColor),this.iconDown&&this.renderer.setStyle(this.iconDom,"background-image","url("+this.iconDown+")")},e.ctorParameters=function(){return[{type:o.Q},{type:o._18}]},e}(r.a)},kh9n:function(t,e,n){"use strict";function o(t){return a._12(0,[(t()(),a._20(0,null,null,0))],null,null)}function i(t){return a._12(0,[a._13(402653184,1,{container:0}),(t()(),a._15(0,null,null,3,"div",[["class","bg"]],null,null,null,null,null)),(t()(),a._14(null,["\n    "])),(t()(),a._20(16777216,[[1,3],["container",2]],null,0,null,o)),(t()(),a._14(null,["\n"])),(t()(),a._14(null,["\n"]))],null,null)}function r(t){return a._12(0,[(t()(),a._15(16777216,null,null,1,"operator",[],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==a._16(t,1)._touchMove(n)&&o}return o},i,h)),a._17(4308992,null,0,l.a,[a.Q,a._18],null,null)],function(t,e){t(e,1,0)},null)}var s=n("MP1y"),a=n("/oeL"),l=n("p6er");n.d(e,"b",function(){return h}),e.a=i;var u=[s.a],h=a._11({encapsulation:0,styles:u,data:{}});a._19("operator",l.a,r,{position:"position",width:"width",height:"height",left:"left",top:"top",right:"right",bottom:"bottom",visible:"visible",alpha:"alpha",depth:"depth",rotation:"rotation",scalex:"scalex",scaley:"scaley",tooltip:"tooltip",backgroundcolor:"backgroundcolor",filter:"filter",buttonMode:"buttonMode"},{},[])},lOIQ:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=[".bg[_ngcontent-%COMP%]{position:absolute;top:66px;height:36px;border-radius:2px;background-color:rgba(0,0,0,.7)}.icon[_ngcontent-%COMP%]{margin-left:15px;width:15px;background-size:100% 100%}.icon[_ngcontent-%COMP%], .label[_ngcontent-%COMP%]{float:left;margin-top:10px;height:15px}.label[_ngcontent-%COMP%]{margin-left:10px;margin-right:20px;line-height:15px;color:#fff;font-size:12px}color-button[_ngcontent-%COMP%], line[_ngcontent-%COMP%]{float:left;margin-left:10px;margin-top:9px}"]},lPNf:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){}return t}();o.RESIZE="resize",o.CONTEXT_MENU="contextmenu",o.IMAGE_LOADED="load"},lbiv:function(t,e,n){"use strict";var o=n("SFC0");n.d(e,"a",function(){return i});var i=function(){function t(){}return t.createPureUID=function(){return o.a.replace(t.createUID(),"-","").toLowerCase()},t.createUID=function(){var e,n,o=[],i=0;for(e=0;e<8;e++)o[i++]=t.ALPHA_CHAR_CODES[Math.floor(16*Math.random())];for(e=0;e<3;e++)for(o[i++]=45,n=0;n<4;n++)o[i++]=t.ALPHA_CHAR_CODES[Math.floor(16*Math.random())];o[i++]=45;var r=(new Date).getTime(),s=("0000000"+r.toString(16).toUpperCase()).substr(-8);for(e=0;e<8;e++)o[i++]=s.charCodeAt(e);for(e=0;e<4;e++)o[i++]=t.ALPHA_CHAR_CODES[Math.floor(16*Math.random())];return String.fromCharCode.apply(null,o)},t}();i.ALPHA_CHAR_CODES=[48,49,50,51,52,53,54,55,56,57,65,66,67,68,69,70]},ljPL:function(t,e,n){"use strict";var o=n("Pu9O");n.d(e,"a",function(){return i});var i=function(){function t(t){this._mode="",this.target=null,this.value=0,this.maxValue=999999999,this.direct=new o.a,this.mode=t}return Object.defineProperty(t.prototype,"mode",{get:function(){return this._mode},set:function(t){this._mode=t},enumerable:!0,configurable:!0}),t.prototype.clone=function(){var e=new t(this.mode);return e.target=this.target,e.value=this.value,e.maxValue=this.maxValue,e.direct=this.direct,e},t}()},mGOc:function(t,e,n){"use strict";var o=n("+N0H"),i=n("w9Am"),r=n("WFe8"),s=n("PSoK"),a=n("Yyq6"),l=n("12Og"),u=n("Yhhh"),h=n("oWBL"),c=n("lPNf"),p=n("Pu9O"),d=n("vP7T"),f=n("1HXw"),g=n("hSl8"),m=n("gILL"),_=n("UPT1"),y=n("IKKv"),b=n("aJ2T"),v=n("ihW0"),w=n("Xx/s"),x=n("CW6F");n.d(e,"a",function(){return P});var O=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),P=function(t){function e(){var e=t.call(this,!1,!1)||this;return e.scene=null,e.resizeLamda=function(t){return e.resize(t)},e._tmpPoint=new p.a,e.lastMousePoint=new p.a,e.lastMousePoints=[],e.lastScenePoint=new p.a,e.lastScale=1,e.hasMouseDown=!1,e.systemMouseMoveHandlerLamda=function(t){return e.systemMouseMoveHandler(t)},e.systemMouseUpHandlerLamda=function(t){return e.systemMouseUpHandler(t)},e.name="ViewPort",e.scene=o.a.inst,e.scene.viewPort=e,e.addChild(e.scene),0==g.a.isMobile?e.mouseEnable=!0:e.touchEnable=!0,e.addEventListener(c.a.RESIZE,e.resizeLamda),e.resize(),e.lookAtXY(0,0),e}return O(e,t),Object.defineProperty(e.prototype,"tagName",{get:function(){return"ViewPort"},enumerable:!0,configurable:!0}),e.prototype.onAdd=function(){t.prototype.onAdd.call(this)},e.prototype.resize=function(t){void 0===t&&(t=null),this.width=window.innerWidth,this.height=window.innerHeight},e.prototype.rightClick=function(e){t.prototype.rightClick.call(this,e),e.stopImmediatePropagation()},Object.defineProperty(e.prototype,"lookAtX",{get:function(){return null!=this.scene?(.5*this.width-this.scene.x)/this.scale:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lookAtY",{get:function(){return null!=this.scene?(.5*this.height-this.scene.y)/this.scale:0},enumerable:!0,configurable:!0}),e.prototype.lookAtXY=function(t,e){null!=this.scene&&(this.scene.x=(window.innerWidth>>1)-t*this.scene.scale,this.scene.y=(window.innerHeight>>1)-e*this.scene.scale)},e.prototype.lookAt=function(t){this.lookAtXY(t.x,t.y)},Object.defineProperty(e.prototype,"scale",{get:function(){return this.scene.scaleX},set:function(t){this.scene.scaleX=t,this.scene.scaleY=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"viewRectangle",{get:function(){if(this._viewRectangle||(this._viewRectangle=new d.a),!this.scene)return this._viewRectangle.setEmpty(),this._viewRectangle;var t=this.scene.globalToLocal(this.localToGlobal(new p.a(0,0))),e=this.scene.globalToLocal(this.localToGlobal(new p.a(this.width,this.height)));return this._viewRectangle.setTo(t.x,t.y,e.x-t.x,e.y-t.y),this._viewRectangle},enumerable:!0,configurable:!0}),e.prototype.moveScene=function(t,e){var n=new p.a(t,e);this.scene.x+=n.x-this.lastMousePoint.x,this.scene.y+=n.y-this.lastMousePoint.y,this.lastMousePoint.setTo(n.x,n.y)},e.prototype.leftMouseDown=function(e){t.prototype.leftMouseDown.call(this,e);var n=this.scene.getEventTargetRef(e.target);n instanceof r.a||n instanceof s.a||n instanceof a.a||n instanceof l.a||n instanceof u.a||0==y.a.inst.opened&&(this.hasMouseDown=!0,this.lastMousePoint.copyFrom(new p.a(e.clientX,e.clientY)),this.stage.addEventListener(f.a.MOUSE_MOVE,this.systemMouseMoveHandlerLamda),this.stage.addEventListener(f.a.MOUSE_UP,this.systemMouseUpHandlerLamda))},e.prototype.systemMouseMoveHandler=function(t){0!=this.hasMouseDown&&this.moveScene(t.clientX,t.clientY)},e.prototype.systemMouseUpHandler=function(t){this.hasMouseDown=!1,this.stage.removeEventListener(f.a.MOUSE_MOVE,this.systemMouseMoveHandlerLamda),this.stage.removeEventListener(f.a.MOUSE_UP,this.systemMouseUpHandlerLamda)},e.prototype.touchStart=function(t){if(1!=y.a.inst.opened)if(1==t.touches.length){var e=t.touches[0],n=this.scene.getEventTargetRef(e.target);if(n instanceof r.a||n instanceof s.a||n instanceof a.a||n instanceof l.a||n instanceof u.a||n instanceof x.a||n instanceof v.a||n instanceof w.a)return;b.a.inst.unfocus(),this.hasMouseDown=!0,this.touchMoveFrameRate=24,this.lastMousePoint.copyFrom(new p.a(e.clientX,e.clientY)),this.lastScenePoint.setTo(this.scene.x,this.scene.y)}else if(2==t.touches.length){b.a.inst.unfocus(),this.hasMouseDown=!0,this.touchMoveFrameRate=12,this.lastMousePoints=[];for(var o=0;o<t.touches.length;o++){var i=t.touches[o];this.lastMousePoints.push(new p.a(i.clientX,i.clientY))}this.lastScale=this.scale}},e.prototype.touchMove=function(t){if(1!=y.a.inst.opened&&1==this.hasMouseDown)if(this.scene.removeExtraLayers(),b.a.inst.unfocus(),1==t.touches.length){var e=t.touches[0];this.moveScene(e.clientX,e.clientY)}else if(2==t.touches.length&&this.lastMousePoints.length==t.touches.length){var n,o=t.touches[0],i=this.lastMousePoints[0],r=new p.a(o.clientX,o.clientY),s=t.touches[1],a=this.lastMousePoints[1],l=new p.a(s.clientX,s.clientY),u=i.subtract(a).length,h=r.subtract(l).length,c=this.lastScale*Math.sqrt(h/u);n=i.add(a),n=n.multiply(.5),n=this.scene.globalToLocal(n),this.scene.scaleScene(c,n)}},e.prototype.touchEnd=function(t){this.scene.addExtraLayers(),1==this.hasMouseDown&&(0!=m.a.isNumberEqual(this.lastScenePoint.x,this.scene.x,1)&&0!=m.a.isNumberEqual(this.lastScenePoint.y,this.scene.y,1)||b.a.inst.unfocus(),this.lastScale!=this.scale&&(_.a.inst.update(),i.a.inst.update(),b.a.inst.unfocus()),this.hasMouseDown=!1,this.touchMoveFrameRate=24,this.lastMousePoint.setTo(0,0),this.lastMousePoints=[],this.lastScenePoint.setTo(this.scene.x,this.scene.y),this.lastScale=this.scale)},e}(h.a)},mpL0:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=[".bgContainer[_ngcontent-%COMP%], .btnContainer[_ngcontent-%COMP%]{position:absolute}.btnContainer[_ngcontent-%COMP%]{width:100%;top:10px;text-align:center}.VToolButton[_ngcontent-%COMP%]{float:left;width:35px;height:40px;margin-left:6px;margin-top:12px}"]},n80j:function(t,e,n){"use strict";var o=n("tdkC");n.d(e,"a",function(){return r});var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=function(t){function e(){var e=t.call(this)||this;return e.name="",e._x=0,e._y=0,e._width=0,e._height=0,e._scaleX=1,e._scaleY=1,e._rotation=0,e._depth=1,e._alpha=1,e._visible=!0,e._gpu=!1,e.createDom(),e}return i(e,t),Object.defineProperty(e.prototype,"tagName",{get:function(){return""},enumerable:!0,configurable:!0}),e.prototype.createDom=function(){""!=this.tagName&&(this._dom=document.createElement(this.tagName),this._dom.style.position="absolute"),this.x=0,this.y=0},e.prototype.onAdd=function(){},e.prototype.processOnAdd=function(){this.onAdd()},e.prototype.onRemove=function(){this.parent=null,this._stage=null},e.prototype.processOnRemove=function(){this.onRemove()},Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this.updateTransform()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this.updateTransform()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this._dom&&(this._dom.style.width=t.toString()+"px")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this._dom&&(this._dom.style.height=t.toString()+"px")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleX",{get:function(){return this._scaleX},set:function(t){this._scaleX=t,this.updateTransform()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleY",{get:function(){return this._scaleY},set:function(t){this._scaleY=t,this.updateTransform()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation=t,this.updateTransform()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gpu",{set:function(t){this._gpu=t,this.updateTransform()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"depth",{get:function(){return this._depth},set:function(t){this._depth=t,this._dom&&(this._dom.style.zIndex=t.toString())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(t){this._alpha=t,this._dom&&(this._dom.style.opacity=t.toString())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(t){this._visible=t,this._dom&&(this._dom.style.display=0==t?"none":"")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltip",{set:function(t){this._dom&&this._dom.setAttribute("title",t)},enumerable:!0,configurable:!0}),e.prototype.updateTransform=function(){if(this._dom){var t=void 0;t=1==this._gpu?"translateZ(0) ":"";var e="translate("+this._x+"px,"+this._y+"px) ",n="scale("+this._scaleX+","+this._scaleY+") ",o="rotate("+this._rotation+"deg) ",i=e+n+o+t;this._dom.style.webkitTransform=i,this._dom.style.transform=i}},e.prototype.setParent=function(t){this.parent=t},e.prototype.setStage=function(t){this._stage=t},Object.defineProperty(e.prototype,"stage",{get:function(){return this._stage},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dom",{get:function(){return this._dom},enumerable:!0,configurable:!0}),e.prototype.addEventListener=function(t,e,n){void 0===n&&(n=!1),this._dom&&this._dom.addEventListener(t,e,n)},e.prototype.removeEventListener=function(t,e){void 0===e&&(e=null),this._dom&&this._dom.removeEventListener(t,e)},e.prototype.getEventTargetRef=function(t){return t==this._dom?this.dom instanceof HTMLCanvasElement?this.parent:this:null},Object.defineProperty(e.prototype,"mouseEventEnable",{set:function(t){this.dom.style.pointerEvents=1==t?"auto":"none"},enumerable:!0,configurable:!0}),e}(o.a)},nz8J:function(t,e,n){"use strict";function o(t){return s._12(0,[(t()(),s._14(null,["\n"])),(t()(),s._14(null,["\n\n"]))],null,null)}function i(t){return s._12(0,[(t()(),s._15(16777216,null,null,1,"editor2d",[],null,[[null,"touchmove"],[null,"touchstart"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==s._16(t,1)._touchMove(n)&&o}if("touchstart"===e){o=!1!==s._16(t,1).globalClick(n)&&o}return o},o,u)),s._17(4308992,null,0,a.a,[s.Q,s._18],null,null)],function(t,e){t(e,1,0)},null)}var r=n("1iia"),s=n("/oeL"),a=n("EGQA");n.d(e,"b",function(){return u}),e.a=o;var l=[r.a],u=s._11({encapsulation:0,styles:l,data:{}});s._19("editor2d",a.a,i,{position:"position",width:"width",height:"height",left:"left",top:"top",right:"right",bottom:"bottom",visible:"visible",alpha:"alpha",depth:"depth",rotation:"rotation",scalex:"scalex",scaley:"scaley",tooltip:"tooltip",backgroundcolor:"backgroundcolor",filter:"filter",buttonMode:"buttonMode"},{},[])},o2f4:function(t,e,n){"use strict";var o=n("COws");n.d(e,"a",function(){return i});var i=function(){function t(e){switch(void 0===e&&(e="OperatorActionSetting"),this.type=e,this.type){case o.a.ROTATE:this._icon=t.rotateIcon,this.autoClose=!1,this.toolTip="旋转";break;case o.a.DELETE:this._icon=t.deleteIcon,this.autoClose=!0,this.toolTip="删除";break;case o.a.SPLIT:this._icon=t.splitIcon,this.autoClose=!0,this.toolTip="拆分";break;case o.a.CLEAR:this._icon=t.clearIcon,this.autoClose=!0,this.toolTip="清理";break;case o.a.NAME:this._icon=t.nameIcon,this.autoClose=!0,this.toolTip="命名";break;case o.a.MIRROR:this._icon=t.turnIcon,this.autoClose=!1,this.toolTip="镜像";break;case o.a.HOLE:this._icon=t.holeIcon,this.autoClose=!0,this.toolTip="墙洞";break;default:this._icon="",this.autoClose=!0,this.toolTip=""}}return Object.defineProperty(t.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoClose",{get:function(){return this._autoClose},set:function(t){this._autoClose=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"icon",{get:function(){return this._icon},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"toolTip",{get:function(){return this._toolTip},set:function(t){this._toolTip=t},enumerable:!0,configurable:!0}),t}();i.BASE_URL="assets/components/operator/",i.rotateIcon=i.BASE_URL+"rotate_3x.png",i.deleteIcon=i.BASE_URL+"delete_3x.png",i.splitIcon=i.BASE_URL+"split_3x.png",i.clearIcon=i.BASE_URL+"new_clear_up.png",i.nameIcon=i.BASE_URL+"name_3x.png",i.turnIcon=i.BASE_URL+"new_turn_up.png",i.holeIcon=i.BASE_URL+"hole_3x.png"},oFVN:function(t,e,n){"use strict";var o=n("/oeL"),i=n("8Tef"),r=n("vgYD");n.d(e,"a",function(){return a});var s=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.textalign="center",o._label="0",o._lastLabel="0",o._selected=!1,o._editable=!0,o}return s(e,t),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.updateComponentProperty(),this.labelDom=this.labelRef.nativeElement,this.finalLabel="0",this.renderer.setStyle(this.dom,"vertical-align","middle"),this.renderer.setStyle(this.labelDom,"line-height",this.height),this.renderer.setStyle(this.labelDom,"text-align",this.textalign)},Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this.renderer.setStyle(this.dom,"height",t),this.labelDom&&this.renderer.setStyle(this.labelDom,"line-height",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"label",{get:function(){return this._label},set:function(t){this._label=t,this.labelDom.innerHTML=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"finalLabel",{set:function(t){this._label=t,this._lastLabel=t,this.labelDom.innerHTML=this.label},enumerable:!0,configurable:!0}),e.prototype.resetLabel=function(){this.label=this._lastLabel,this.labelDom.innerHTML=this.label},e.prototype.upStyle=function(){this.renderer.setStyle(this.dom,"border-color",r.a.toString(r.a.WHITE)),this.renderer.setStyle(this.labelDom,"color",r.a.toString(r.a.FONT))},e.prototype.downStyle=function(){this.renderer.setStyle(this.dom,"border-color",r.a.toString(r.a.BLUE)),this.renderer.setStyle(this.labelDom,"color",r.a.toString(r.a.BLUE))},e.prototype.notEditStyle=function(){this.renderer.setStyle(this.dom,"border-color",r.a.toString(r.a.WHITE)),this.renderer.setStyle(this.labelDom,"color",r.a.toString(r.a.FONT2))},Object.defineProperty(e.prototype,"selected",{get:function(){return this._selected},set:function(t){this._selected=t,1==this.editable&&(1==t?this.downStyle():this.upStyle())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editable",{get:function(){return this._editable},set:function(t){this._editable=t,0==t?this.notEditStyle():this.upStyle()},enumerable:!0,configurable:!0}),e.ctorParameters=function(){return[{type:o.Q},{type:o._18}]},e}(i.a);a.MAX_NUM=99999,a.MIM_NUM=1},oLUs:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){}return t.unionArrayArrays=function(t,e,n,o){void 0===n&&(n=null),void 0===o&&(o=!1);for(var i,r=new e,s=0,a=t;s<a.length;s++)i=a[s],r=r.concat(i);if(o)for(var l,u=0,h=0,c=0;c<t.length;c++){for(i=t[c],l=u+i.length,h=u;h<l;h++)r[h]+=n[c];u=l}return r},t.getReversedIndices=function(t){for(var e=new Array(t.length),n=0;n<t.length/3;n++)e[3*n]=t[3*n],e[3*n+1]=t[3*n+2],e[3*n+2]=t[3*n+1];return e},t.getElementEX=function(t,e){return e%=t.length,e<0&&(e+=t.length),t[e]},t.getModIndex=function(t,e){return t%=e,t<0&&(t+=e),t},t}()},"oV/x":function(t,e,n){"use strict";var o=n("/oeL"),i=n("8Tef"),r=n("pyn6"),s=n("MhWs"),a=n("wzWt");n.d(e,"a",function(){return u});var l=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),u=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.buttonMode=!0,o.dom.style.position="",o}return l(e,t),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.width="40px",this.height="60px",this.updateComponentProperty(),this.renderer.setStyle(this.dom,"float","left"),this.renderer.setStyle(this.dom,"margin-right","27px"),this.renderer.setStyle(this.dom,"margin-top","15px"),this.imageDom=this.image.nativeElement,this.imageDom&&this.structVO&&(this.renderer.setStyle(this.imageDom,"background-image","url("+this.structVO.imageUrl+")"),this.renderer.setStyle(this.imageDom,"background-size","100% 100%"))},e.prototype.touchStart=function(t){var e=t.touches[0],n=new r.a;n.load(this.structVO.imageUrl),n.width=100,n.height=100,s.a.inst.startDrag(this.structVO,n,e.clientX,e.clientY),a.a.inst.close(),t.stopImmediatePropagation(),t.preventDefault()},e.ctorParameters=function(){return[{type:o.Q},{type:o._18}]},e}(i.a)},oWBL:function(t,e,n){"use strict";var o=n("Pu9O"),i=n("OtGR"),r=n("6eZy"),s=n("1HXw"),a=n("tTVb");n.d(e,"a",function(){return u});var l=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),u=function(t){function e(e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var o=t.call(this)||this;return o.graphicEnable=!1,o.isPivotCenter=!1,o._mouseEnable=!1,o._dragEnable=!1,o._touchEnable=!1,o.touchMoveFrameRate=24,o.clickLamda=function(t){0==t.button?o.leftClick(t):1==t.button?o.middleClick(t):o.rightClick(t)},o.mouseDownLamda=function(t){0==t.button?o.leftMouseDown(t):1==t.button?o.middleMouseDown(t):o.rightMouseDown(t)},o.mouseUpLamda=function(t){0==t.button?o.leftMouseUp(t):1==t.button?o.middleMouseUp(t):o.rightMouseUp(t)},o.doubleClickLamda=function(t){o.doubleClick(t)},o.mouseOverLamda=function(t){o.mouseOver(t)},o.mouseOutLamda=function(t){o.mouseOut(t)},o.mouseWheelLamda=function(t){o.mouseWheel(t)},o.mouseMoveLamda=function(t){o.mouseMove(t)},o.touchStartLamda=function(t){o.touchStart(t),t.preventDefault()},o.scheduledAnimationFrame=0,o.touchMoveLamda=function(t){t.preventDefault(),++o.scheduledAnimationFrame%Math.ceil(60/o.touchMoveFrameRate)==0&&window.requestAnimationFrame(function(){o.scheduledAnimationFrame=0,o.touchMove(t)})},o.touchEndLamda=function(t){o.touchEnd(t),t.preventDefault()},o.createSpriteDom(e,n),o.mouseEnable=!1,o.touchEnable=!1,o.gpu=!0,o}return l(e,t),Object.defineProperty(e.prototype,"tagName",{get:function(){return"Sprite"},enumerable:!0,configurable:!0}),e.prototype.createDom=function(){},e.prototype.createSpriteDom=function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1),this._dom=document.createElement(this.tagName),this._dom.style.position="absolute",this.x=0,this.y=0,1==t&&(this.graphics=new i.a,this.graphics.isPivotCenter=e,this.addChild(this.graphics))},e.prototype.onAdd=function(){t.prototype.onAdd.call(this)},e.prototype.onRemove=function(){t.prototype.onRemove.call(this),this.mouseEnable=!1,this.touchEnable=!1},e.prototype.leftClick=function(t){},e.prototype.middleClick=function(t){},e.prototype.rightClick=function(t){},e.prototype.leftMouseDown=function(t){},e.prototype.middleMouseDown=function(t){},e.prototype.rightMouseDown=function(t){},e.prototype.leftMouseUp=function(t){},e.prototype.middleMouseUp=function(t){},e.prototype.rightMouseUp=function(t){},e.prototype.doubleClick=function(t){},e.prototype.mouseOver=function(t){},e.prototype.mouseOut=function(t){},e.prototype.mouseWheel=function(t){},e.prototype.mouseMove=function(t){},e.prototype.touchStart=function(t){},e.prototype.touchMove=function(t){},e.prototype.touchEnd=function(t){},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this._dom&&(this._dom.style.width=t.toString()+"px"),this.graphics&&(this.graphics.width=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this._dom&&(this._dom.style.height=t.toString()+"px"),this.graphics&&(this.graphics.height=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mouseEnable",{set:function(t){1==t&&0==this._mouseEnable?(this.addEventListener(s.a.CLICK,this.clickLamda),this.addEventListener(s.a.DOUBLE_CLICK,this.doubleClickLamda),this.addEventListener(s.a.MOUSE_DOWN,this.mouseDownLamda),this.addEventListener(s.a.MOUSE_UP,this.mouseUpLamda),this.addEventListener(s.a.MOUSE_OVER,this.mouseOverLamda),this.addEventListener(s.a.MOUSE_OUT,this.mouseOutLamda),this.addEventListener(s.a.MOUSE_MOVE,this.mouseMoveLamda),this.addEventListener(s.a.MOUSE_WHEEL,this.mouseWheelLamda),this.addEventListener(s.a.DOM_MOUSE_WHEEL,this.mouseWheelLamda),this.mouseEventEnable=!0):0==t&&(this.removeEventListener(s.a.CLICK,this.clickLamda),this.removeEventListener(s.a.DOUBLE_CLICK,this.doubleClickLamda),this.removeEventListener(s.a.MOUSE_DOWN,this.mouseDownLamda),this.removeEventListener(s.a.MOUSE_UP,this.mouseUpLamda),this.removeEventListener(s.a.MOUSE_OVER,this.mouseOverLamda),this.removeEventListener(s.a.MOUSE_OUT,this.mouseOutLamda),this.removeEventListener(s.a.MOUSE_MOVE,this.mouseMoveLamda),this.removeEventListener(s.a.MOUSE_WHEEL,this.mouseWheelLamda),this.removeEventListener(s.a.DOM_MOUSE_WHEEL,this.mouseWheelLamda),this.mouseEventEnable=!1),this._mouseEnable=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"touchEnable",{set:function(t){1==t&&0==this._touchEnable?(this.addEventListener(a.a.TOUCH_START,this.touchStartLamda),this.addEventListener(a.a.TOUCH_MOVE,this.touchMoveLamda),this.addEventListener(a.a.TOUCH_END,this.touchEndLamda),this.mouseEventEnable=!0):0==t&&(this.removeEventListener(a.a.TOUCH_START,this.touchStartLamda),this.removeEventListener(a.a.TOUCH_MOVE,this.touchMoveLamda),this.removeEventListener(a.a.TOUCH_END,this.touchEndLamda),this.mouseEventEnable=!1),this._touchEnable=t},enumerable:!0,configurable:!0}),e.prototype.localToGlobal=function(t){for(var e=this,n=e.x+t.x*e.scaleX,i=e.y+t.y*e.scaleY;null!=e.parent;)e=e.parent,n*=e.scaleX,i*=e.scaleY,n+=e.x,i+=e.y;return new o.a(n,i)},e.prototype.globalToLocal=function(t){var e=this.localToGlobal(new o.a(0,0)),n=t.subtract(e);return n.x/=this.scaleX,n.y/=this.scaleY,n},e}(r.a)},p5Ee:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o={production:!0}},p6er:function(t,e,n){"use strict";var o=n("/oeL"),i=n("8Tef"),r=n("d3c3"),s=n("1HXw"),a=n("fr6C"),l=n("R4k5"),u=n("vgYD");n.d(e,"a",function(){return c});var h=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),c=function(t){function e(n,o){var i=t.call(this,n,o)||this;return i.icons=[],i.iconClickLamda=function(t){return i.iconClick(t)},e._instance=i,i}return h(e,t),Object.defineProperty(e,"inst",{get:function(){return e._instance},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.updateComponentProperty()},e.prototype.open=function(t,e,n,o,i){void 0===o&&(o=15),void 0===i&&(i=-30),this.close(),this.visible="true",this.updateComponentProperty();var r=0;this.target=e,this.actions=n;for(var h=0;h<n.length;h++){var c=n[h],p=a.a.inst.createComponent(l.a,this.container),d=p.instance;d.position="absolute",d.width="35px",d.height="40px",d.iconUp=c.icon,d.iconDown=c.icon,d.tooltip=c.toolTip,d.label=c.toolTip,d.textUp=u.a.toString(u.a.FONT5),d.textOver=u.a.toString(u.a.MASTER),d.textDown=u.a.toString(u.a.MASTER),d.left=5,d.top=12+66*h,d.addEventListener(s.a.CLICK,this.iconClickLamda),this.icons.push(p),r+=66}this.height=24+r-26+"px",this.top=.5*(window.innerHeight-this.heightNumber+56)},e.prototype.close=function(){for(var t=0;t<this.icons.length;t++){this.icons[t].instance.removeEventListener(s.a.CLICK,this.iconClickLamda),this.icons[t].destroy()}this.icons=[],this.visible="false",this.container.clear()},e.prototype.iconClick=function(t){for(var e,n=0;n<this.icons.length;n++){if(1==this.icons[n].instance.dom.contains(t.target)){e=this.actions[n];break}}if(e){var o={};o.actionType=e.type,o.actionTarget=this.target,this.dispatchEvent(new r.a(r.a.OPERATOR_ACTION,o),this),this.close()}},e.prototype.targetFocusOutHandler=function(t){this.close()},e.ctorParameters=function(){return[{type:o.Q},{type:o._18}]},e}(i.a)},pG3V:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=[".label[_ngcontent-%COMP%]{width:100%;height:100%;margin:0 auto}"]},pPSP:function(t,e,n){"use strict";var o=n("/oeL"),i=n("8Tef");n.d(e,"a",function(){return s});var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.warningIcon="assets/components/alert/warning_3x.png",o.buttons=[],o.alertData1=null,o.alertData2=null,o.message="",o.warningTimerId=null,o}return r(e,t),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.updateComponentProperty(),this.bg=this.bgRef.nativeElement,this.buttons=this.buttonQueryList.toArray(),this.icon=this.iconRef.nativeElement,this.renderer.setStyle(this.icon,"background-image","url("+this.warningIcon+")"),this.label=this.labelRef.nativeElement},e.prototype.dialog=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null),this.show(t,!0,e,n)},e.prototype.waiting=function(t){this.show(t,!0)},e.prototype.warning=function(t){var e=this;this.warningTimerId&&(clearTimeout(this.warningTimerId),this.close()),this.show(t),this.warningTimerId=setTimeout(function(){e.close()},3e3)},e.prototype.show=function(t,e,n,o){void 0===e&&(e=!1),void 0===n&&(n=null),void 0===o&&(o=null),this.visible="true",this.line.visible="false",1==e?this.renderer.setStyle(this.dom,"pointer-events","auto"):this.renderer.setStyle(this.dom,"pointer-events","none"),this.message=t,this.label.innerHTML=this.message,this.renderer.setStyle(this.bg,"visible",""!=t?"true":"false");var i=60+12*t.length;n&&(this.buttons[0].label=n.label,this.alertData1=n,i+=20+12*n.label.length),o&&(this.line.visible="true",this.buttons[1].label=o.label,this.alertData2=o,i+=35+12*n.label.length),this.renderer.setStyle(this.label,"width",12*t.length+"px"),this.renderer.setStyle(this.bg,"left",.5*(window.innerWidth-i)+"px"),this.renderer.setStyle(this.bg,"width",i+"px")},e.prototype.click1=function(){this.alertData1&&this.alertData1.callback&&this.alertData1.callback.call(this.alertData1.thisObj),this.close()},e.prototype.click2=function(){this.alertData2&&this.alertData2.callback&&this.alertData2.callback.call(this.alertData2.thisObj),this.close()},e.prototype.close=function(){this.warningTimerId=null,this.alertData1=null,this.alertData2=null,this.line.visible="false",this.visible="false"},e.ctorParameters=function(){return[{type:o.Q},{type:o._18}]},e}(i.a)},pR39:function(t,e,n){"use strict";var o=n("GURQ"),i=n("S23b");n.d(e,"a",function(){return r});var r=function(){function t(){}return t.drawArc=function(t,e,n,o,i){var r=e.x+n*Math.cos(-o*Math.PI/180),s=e.y+n*Math.sin(-o*Math.PI/180);t.moveTo(r,s);for(var a=o+1;a<=i;a++)r=e.x+n*Math.cos(-a*Math.PI/180),s=e.y+n*Math.sin(-a*Math.PI/180),t.lineTo(r,s)},t.drawGridPolygon=function(t,e,n){this.getGridBitmapdata(n);t.moveTo(e.getPointAt(0).x,e.getPointAt(0).y);for(var o,i=0,r=e.points;i<r.length;i++)o=r[i],t.lineTo(o.x,o.y);t.lineTo(e.getPointAt(0).x,e.getPointAt(0).y),t.endFill()},t.getGridBitmapdata=function(e){var n=e+"$$";if(0==t.bitmapDic.hasOwnProperty(n)){for(var i=new o.a(3,3,!0,0),r=0;r<3;r++)i.setPixel32(r,r,4278190080|e);t.bitmapDic[n]=i}return t.bitmapDic[n]},t.drawPolygonLine=function(t,e,n,o,i){void 0===n&&(n=255),void 0===o&&(o=1),void 0===i&&(i=1),t.lineStyle(i,n,o),t.moveTo(e.getPointAt(0).x,e.getPointAt(0).y);for(var r,s=0,a=e.points;s<a.length;s++)r=a[s],t.lineTo(r.x,r.y);t.lineTo(e.getPointAt(0).x,e.getPointAt(0).y)},t.fillPolygon=function(t,e){t.moveTo(e.getPointAt(0).x,e.getPointAt(0).y);for(var n,o=0,i=e.points;o<i.length;o++)n=i[o],t.lineTo(n.x,n.y)},t.drawPolygon=function(t,e,n,o,i,r){void 0===n&&(n=255),void 0===o&&(o=!1),void 0===i&&(i=16711680),void 0===r&&(r=.5),t.beginFill(n,r),t.moveTo(e.getPointAt(0).x,e.getPointAt(0).y);for(var s,a=0,l=e.points;a<l.length;a++)s=l[a],t.lineTo(s.x,s.y);if(t.endFill(),o)for(var u=0,h=e.points;u<h.length;u++)s=h[u],t.beginFill(i,.5),t.drawCircle(s.x,s.y,2),t.endFill()},t.drawLine=function(t,e,n,o,i){void 0===i&&(i=1),t.moveTo(e.x,e.y),t.lineStyle(i,o,.5),t.lineTo(n.x,n.y)},t.drawRectLine=function(t,e,n,o,i,r){t.lineStyle(1,r,.5),t.drawRect(e,n,o,i)},t.drawPoint=function(t,e,n,o){void 0===o&&(o=2),t.beginFill(n,.5),t.drawCircle(e.x,e.y,o),t.endFill()},t.drawPoints=function(t,e,n,r){void 0===n&&(n=!0),void 0===r&&(r=!1);var s,a=0;if(n)for(t.lineStyle(1,65280),t.moveTo(e[0].x,e[0].y),a=0;a<e.length;a++)t.lineTo(e[a].x,e[a].y);for(a=0;a<e.length;a++)if(s=e[a],this.drawPoint(t,s,16711935,5),r){var l=new i.a;l.text=a.toString();var u=new o.a(l.width,l.height,!0,0);u.draw(l.dom),t.drawRect(s.x-u.width/2,s.y-u.height/2,u.width,u.height),t.endFill()}},t.drawCircle=function(t,e,n,o,i,r,s){void 0===i&&(i=16777215),void 0===r&&(r=3355443),void 0===s&&(s=1),t.lineStyle(0,0,0),t.beginFill(r,s),t.drawCircle(e,n,o+1),t.endFill(),t.beginFill(i,s),t.drawCircle(e,n,o),t.endFill()},t.drawSector=function(t,e,n,o,i,r,s,a,l){void 0===i&&(i=90),void 0===r&&(r=270),void 0===s&&(s=16711680),void 0===a&&(a=16777215),void 0===l&&(l=1),t.beginFill(a,l),t.lineStyle(1,s),t.moveTo(e,n),i=Math.abs(i)>360?360:i;var u=Math.ceil(Math.abs(i)/45),h=i/u;h=h*Math.PI/180,r=r*Math.PI/180,t.lineTo(e+o*Math.cos(r),n+o*Math.sin(r));for(var c=1;c<=u;c++){r+=h;var p=r-h/2,d=e+o/Math.cos(h/2)*Math.cos(p),f=n+o/Math.cos(h/2)*Math.sin(p),g=e+o*Math.cos(r),m=n+o*Math.sin(r);t.curveTo(d,f,g,m)}360!=i&&t.lineTo(e,n),t.endFill()},t.drawSectorOnArcWall=function(t,e,n,o,i,r,s,a,l,u){void 0===s&&(s=16711680),void 0===a&&(a=16777215),void 0===l&&(l=1),void 0===u&&(u=90),t.beginFill(a,l),t.lineStyle(1,s,1);var h,c,p,d=e.x,f=e.y,g=n.subtract(e).length,m=u,_=Math.ceil(Math.abs(m)/45),y=m/_;for(y=y*Math.PI/180,r=r*Math.PI/180,h=d+g*Math.cos(r),c=f+g*Math.sin(r),t.moveTo(h,c),p=1;p<=_;p++){r+=y;var b=r-y/2,v=d+g/Math.cos(y/2)*Math.cos(b),w=f+g/Math.cos(y/2)*Math.sin(b),x=d+g*Math.cos(r),O=f+g*Math.sin(r);t.curveTo(v,w,x,O)}for(t.lineStyle(1,s,0),i||o.reverse(),p=0;p<o.length;p++)t.lineTo(o[p].x,o[p].y);360!=m&&t.lineTo(h,c),t.endFill()},t.drawArcBy3PointsOnCircle=function(t,e,n,o){},t}();r.bitmapDic={}},pTaI:function(t,e,n){"use strict";var o=n("Pu9O");n.d(e,"a",function(){return i});var i=function(){function t(t,e){void 0===t&&(t=null),void 0===e&&(e=1),this.radius=0,this.center=null,t||(t=new o.a),this.radius=e,this.center=t}return t.prototype.isInCircle=function(t){return this.center.subtract(t).length<this.radius},t.prototype.transform=function(e){return new t(e.transformPoint(this.center),this.radius)},t}()},pyn6:function(t,e,n){"use strict";var o=n("n80j"),i=n("lPNf");n.d(e,"a",function(){return s});var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=function(t){function e(){var e=t.call(this)||this;return e.onImageLoadedLamda=function(t){return e.onImageLoaded(t)},e}return r(e,t),Object.defineProperty(e.prototype,"tagName",{get:function(){return"Img"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"img",{get:function(){return this.dom},enumerable:!0,configurable:!0}),e.prototype.load=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null),this.loadedCallback=e,this.thisObj=n,this.img.src=t,this.img.addEventListener(i.a.IMAGE_LOADED,this.onImageLoadedLamda)},e.prototype.onImageLoaded=function(t){this.img.removeEventListener(i.a.IMAGE_LOADED,this.onImageLoadedLamda),this.loadedCallback&&this.loadedCallback.call(this.thisObj),this.loadedCallback=null,this.thisObj=null},e.prototype.dispose=function(){this.img.src="",this.loadedCallback=null,this.thisObj=null},e}(o.a)},q4dy:function(t,e,n){"use strict";function o(t){return s._12(0,[s._13(402653184,1,{toolbar:0}),s._13(402653184,2,{threedNavigation:0}),s._13(402653184,3,{huxingResource:0}),s._13(402653184,4,{editor2d:0}),s._13(402653184,5,{alert:0}),(t()(),s._14(null,["\n"])),(t()(),s._15(16777216,null,null,1,"editor2d",[["class","editor"]],null,[[null,"touchmove"],[null,"touchstart"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==s._16(t,7)._touchMove(n)&&o}if("touchstart"===e){o=!1!==s._16(t,7).globalClick(n)&&o}return o},a.a,a.b)),s._17(4308992,[[4,4],["editor2d",4]],0,l.a,[s.Q,s._18],null,null),(t()(),s._14(null,["\n\n"])),(t()(),s._14(null,["\n"])),(t()(),s._14(null,["\n\n"])),(t()(),s._14(null,["\n"])),(t()(),s._15(16777216,null,null,1,"huxing-toolbar",[],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==s._16(t,13)._touchMove(n)&&o}return o},u.a,u.b)),s._17(4308992,[[1,4],["toolbar",4]],0,h.a,[s.Q,s._18],null,null),(t()(),s._14(null,["\n\n"])),(t()(),s._14(null,["\n"])),(t()(),s._14(null,["\n\n"])),(t()(),s._14(null,["\n"])),(t()(),s._15(16777216,null,null,1,"huxing-resource",[],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==s._16(t,19)._touchMove(n)&&o}return o},c.a,c.b)),s._17(4308992,[[3,4],["huxingResource",4]],0,p.a,[s.Q,s._18],null,null),(t()(),s._14(null,["\n\n"])),(t()(),s._14(null,["\n"])),(t()(),s._15(16777216,null,null,1,"operator",[],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==s._16(t,23)._touchMove(n)&&o}return o},d.a,d.b)),s._17(4308992,[["operator",4]],0,f.a,[s.Q,s._18],null,null),(t()(),s._14(null,["\n\n"])),(t()(),s._14(null,["\n"])),(t()(),s._15(16777216,null,null,1,"setting-bars",[["visible","false"]],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==s._16(t,27)._touchMove(n)&&o}return o},g.a,g.b)),s._17(4308992,[["settingbars",4]],0,m.a,[s.Q,s._18],{visible:[0,"visible"]},null),(t()(),s._14(null,["\n\n"])),(t()(),s._14(null,["\n"])),(t()(),s._15(16777216,null,null,1,"settings",[["visible","false"]],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==s._16(t,31)._touchMove(n)&&o}return o},_.a,_.b)),s._17(4308992,[["settings",4]],0,y.a,[s.Q,s._18],{visible:[0,"visible"]},null),(t()(),s._14(null,["\n\n"])),(t()(),s._14(null,["\n"])),(t()(),s._15(16777216,null,null,1,"option-setting",[["visible","false"]],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==s._16(t,35)._touchMove(n)&&o}return o},b.a,b.b)),s._17(4308992,[["optionSetting",4]],0,v.a,[s.Q,s._18],{visible:[0,"visible"]},null),(t()(),s._14(null,["\n\n"])),(t()(),s._14(null,["\n"])),(t()(),s._15(16777216,null,null,1,"note-editor",[["visible","false"]],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==s._16(t,39)._touchMove(n)&&o}return o},w.a,w.b)),s._17(4308992,[["noteEditor",4]],0,x.a,[s.Q,s._18],{visible:[0,"visible"]},null),(t()(),s._14(null,["\n\n"])),(t()(),s._14(null,["\n"])),(t()(),s._15(16777216,null,null,1,"alert",[["visible","false"]],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==s._16(t,43)._touchMove(n)&&o}return o},O.a,O.b)),s._17(4308992,[[5,4],["alert",4]],0,P.a,[s.Q,s._18],{visible:[0,"visible"]},null),(t()(),s._14(null,["\n"]))],function(t,e){t(e,7,0),t(e,13,0),t(e,19,0),t(e,23,0);t(e,27,0,"false");t(e,31,0,"false");t(e,35,0,"false");t(e,39,0,"false");t(e,43,0,"false")},null)}function i(t){return s._12(0,[(t()(),s._15(16777216,null,null,1,"app-root",[],null,null,null,o,T)),s._17(4243456,null,0,E.a,[C.m,s.e,s.Q],null,null)],null,null)}var r=n("NhKt"),s=n("/oeL"),a=n("nz8J"),l=n("EGQA"),u=n("5Xko"),h=n("X973"),c=n("3arc"),p=n("wzWt"),d=n("kh9n"),f=n("p6er"),g=n("4L4I"),m=n("+ByO"),_=n("5mVj"),y=n("YihH"),b=n("cNiI"),v=n("6p4A"),w=n("1RVm"),x=n("JTqu"),O=n("yQ03"),P=n("pPSP"),E=n("wQAS"),C=n("XKz0");n.d(e,"a",function(){return L});var S=[r.a],T=s._11({encapsulation:0,styles:S,data:{}}),L=s._19("app-root",E.a,i,{},{},[])},qtrl:function(t,e){function n(t){throw new Error("Cannot find module '"+t+"'.")}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="qtrl"},qweZ:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){this.no="ee5926f23ef811e8b7e2fa163edde52c",this.defaultRoomItemNo="9d6f2c5c6a0811e79b2e000c29daddf7",this.huxingRoomItemNos={"":"9d6f2c5c6a0811e79b2e000c29daddf7","主卧":"9d6f2c5c6a0811e79b2e000c29daddf7","次卧":"9d6f2c5c6a0811e79b2e000c29daddf7","儿童房":"9d6f2c5c6a0811e79b2e000c29daddf7","衣帽间":"9d6f2c5c6a0811e79b2e000c29daddf7","书房":"9d6f2c5c6a0811e79b2e000c29daddf7","客厅":"985e1826768e11e7962efa163edde52c","门厅":"985e1826768e11e7962efa163edde52c","玄关":"985e1826768e11e7962efa163edde52c","客餐厅":"429c5b5c773611e7b175fa163edde52c","储物室":"429c5b5c773611e7b175fa163edde52c","多功能室":"429c5b5c773611e7b175fa163edde52c","阳台":"e57b8076768e11e78f3dfa163edde52c","露台":"e57b8076768e11e78f3dfa163edde52c","入户花园":"e57b8076768e11e78f3dfa163edde52c","餐厅":"8bca463e768e11e7962efa163edde52c","厨房":"8bca463e768e11e7962efa163edde52c","卫生间":"c9df4ca8768e11e7962efa163edde52c","盥洗室":"c9df4ca8768e11e7962efa163edde52c"},this.huxingRoomFloorColors={"":15649412,"主卧":15649412,"次卧":15649412,"儿童房":15649412,"衣帽间":15649412,"书房":15649412,"客厅":14601898,"门厅":14601898,"玄关":14601898,"客餐厅":14604470,"储物室":14604470,"多功能室":14604470,"阳台":9203266,"露台":9203266,"入户花园":9203266,"餐厅":15658734,"厨房":15658734,"卫生间":9803157,"盥洗室":9803157}}return Object.defineProperty(t,"inst",{get:function(){return null==t._instance&&(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),t}();o.DEFAULT_MATERIAL_3D_NO="01ca25266d1a11e7b62200163e0e72dc",o.DEFAULT_FLOOR_BOARD_MATERIAL_3D_NO="223e41266d1e11e79f8200163e0e72dc",o.DEFAULT_FLOOR_TILE_MATERIAL_3D_NO="bed1e5706d1811e7b62200163e0e72dc",o.DEFAULT_SKIRTING_MATERIAL_3D_NO="c9c9418c6d1b11e79f8200163e0e72dc",o.DEFAULT_DOOR_3D_NO="4c6f640a6d1611e79f8200163e0e72dc",o.DEFAULT_DOUBLE_DOOR_3D_NO="8cd725966d1611e79f8200163e0e72dc",o.DEFAULT_SLIDING_DOOR_3D_NO="bf954ad06d1611e7b62200163e0e72dc",o.DEFAULT_WINDOW_3D_NO="f2c36fc26d1b11e7b62200163e0e72dc",o.DEFAULT_FRENCH_WINDOW_3D_NO="292827e66d1811e79f8200163e0e72dc",o.DEFAULT_BAY_WINDOW_3D_NO="3621f4d66d2711e79f8200163e0e72dc",o.DEFAULT_ROOM_3D_NOS={"":"9d6f2c5c6a0811e79b2e000c29daddf7","主卧":"9d6f2c5c6a0811e79b2e000c29daddf7","次卧":"9d6f2c5c6a0811e79b2e000c29daddf7","儿童房":"9d6f2c5c6a0811e79b2e000c29daddf7","衣帽间":"9d6f2c5c6a0811e79b2e000c29daddf7","书房":"9d6f2c5c6a0811e79b2e000c29daddf7","客厅":"985e1826768e11e7962efa163edde52c","门厅":"985e1826768e11e7962efa163edde52c","玄关":"985e1826768e11e7962efa163edde52c","客餐厅":"429c5b5c773611e7b175fa163edde52c","储物室":"429c5b5c773611e7b175fa163edde52c","多功能室":"429c5b5c773611e7b175fa163edde52c","阳台":"e57b8076768e11e78f3dfa163edde52c","露台":"e57b8076768e11e78f3dfa163edde52c","入户花园":"e57b8076768e11e78f3dfa163edde52c","餐厅":"8bca463e768e11e7962efa163edde52c","厨房":"8bca463e768e11e7962efa163edde52c","卫生间":"c9df4ca8768e11e7962efa163edde52c","盥洗室":"c9df4ca8768e11e7962efa163edde52c"}},r4QP:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){}return t}();o.HOLE=0,o.DOOR_COMMON=201,o.DOOR_DOUBLE=202,o.DOOR_SLIDING=203,o.WINDOW_COMMON=301,o.WINDOW_BAY=302,o.WINDOW_FRENCH=303},r4pW:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=[""]},r76s:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=[".bg[_ngcontent-%COMP%], .icon[_ngcontent-%COMP%]{position:absolute}.icon[_ngcontent-%COMP%]{background-size:100% 100%}"]},rFe8:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=[".title[_ngcontent-%COMP%]{float:left;width:100%;height:32px;line-height:32px;background-color:#e9e9e9;font-size:14px;color:#333;padding-left:12px}.container[_ngcontent-%COMP%]{float:left;margin-left:13px;margin-top:0;width:300px;height:90px}"]},rIjQ:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=[".VToolButton[_ngcontent-%COMP%]{float:left;width:40px;height:35px;text-align:center;margin-right:10px}"]},riTu:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=[".bg[_ngcontent-%COMP%]{width:460px;height:100%;background-color:rgba(0,0,0,.6);border-radius:2px}.editArea[_ngcontent-%COMP%]{margin-left:10px}.editArea[_ngcontent-%COMP%], .label[_ngcontent-%COMP%]{float:left;height:100%}.label[_ngcontent-%COMP%]{margin-right:5px;line-height:40px;font-size:14px;text-align:center;color:#fff}.virtualInput[_ngcontent-%COMP%]{float:left;margin-top:8px;font-size:16px;color:#000;border-radius:5px;border-width:2px;border-style:solid;border-color:#fff;background-color:#fff}.checkbox[_ngcontent-%COMP%]{float:left;margin-right:8px;margin-top:10px;color:#fff;font-size:14px}"]},ru8f:function(t,e,n){"use strict";function o(t){return s._12(0,[s._13(671088640,1,{buttonQueryList:1}),s._13(402653184,2,{moreButton:0}),(t()(),s._14(null,["\n"])),(t()(),s._15(16777216,null,null,2,"v-tool-button",[["class","VToolButton"],["label","标尺"]],null,[[null,"touchstart"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchend"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==s._16(t,4)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,4).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,4).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,4).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,4).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,4).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,4).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,4).touchEnd(n)&&o}if("touchstart"===e){o=!1!==i.rulerHandler()&&o}return o},l.b,l.c)),s._17(4308992,[[1,4]],0,u.a,[s.Q,s._18],{iconUp:[0,"iconUp"],iconDown:[1,"iconDown"],label:[2,"label"]},null),(t()(),s._14(null,["\n"])),(t()(),s._14(null,["\n\n"])),(t()(),s._14(null,["\n"])),(t()(),s._15(16777216,null,null,2,"v-tool-button",[["class","VToolButton"],["label","设置"]],null,[[null,"touchstart"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchend"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==s._16(t,9)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,9).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,9).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,9).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,9).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,9).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,9).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,9).touchEnd(n)&&o}if("touchstart"===e){o=!1!==i.optionHandler()&&o}return o},l.b,l.c)),s._17(4308992,[[1,4]],0,u.a,[s.Q,s._18],{iconUp:[0,"iconUp"],iconDown:[1,"iconDown"],label:[2,"label"]},null),(t()(),s._14(null,["\n"])),(t()(),s._14(null,["\n\n"])),(t()(),s._14(null,["\n"])),(t()(),s._15(16777216,null,null,2,"drop-down-menu",[["class","VToolButton"],["label","更多"],["width","35px"]],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==s._16(t,14)._touchMove(n)&&o}return o},h.a,h.b)),s._17(4308992,[[2,4],["moreButton",4]],0,c.a,[s.Q,s._18],{width:[0,"width"],iconUp:[1,"iconUp"],iconDown:[2,"iconDown"],label:[3,"label"]},null),(t()(),s._14(null,["\n"])),(t()(),s._14(null,["\n\n\n\n"]))],function(t,e){var n=e.component;t(e,4,0,n.rulerUp,n.rulerDown,"标尺");t(e,9,0,n.optionUp,n.optionDown,"设置");t(e,14,0,"35px",n.moreUp,n.moreDown,"更多")},null)}function i(t){return s._12(0,[(t()(),s._15(16777216,null,null,1,"huxing-toolbar-more",[],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==s._16(t,1)._touchMove(n)&&o}return o},o,d)),s._17(4308992,null,0,a.a,[s.Q,s._18],null,null)],function(t,e){t(e,1,0)},null)}var r=n("rIjQ"),s=n("/oeL"),a=n("cXPp"),l=n("DLok"),u=n("R4k5"),h=n("Bsrv"),c=n("sg3d");n.d(e,"b",function(){return d}),e.a=o;var p=[r.a],d=s._11({encapsulation:0,styles:p,data:{}});s._19("huxing-toolbar-more",a.a,i,{position:"position",width:"width",height:"height",left:"left",top:"top",right:"right",bottom:"bottom",visible:"visible",alpha:"alpha",depth:"depth",rotation:"rotation",scalex:"scalex",scaley:"scaley",tooltip:"tooltip",backgroundcolor:"backgroundcolor",filter:"filter",buttonMode:"buttonMode"},{},[])},"sC/0":function(t,e,n){"use strict";function o(t){return s._12(0,[s._13(402653184,1,{checkboxRef:0}),s._13(402653184,2,{checkBoxLabelRef:0}),(t()(),s._15(0,[[1,0],["checkbox",1]],null,0,"div",[["class","checkbox"]],null,null,null,null,null)),(t()(),s._14(null,["\n"])),(t()(),s._15(0,[[2,0],["lb",1]],null,1,"div",[["class","label"]],null,null,null,null,null)),(t()(),s._14(null,["",""]))],null,function(t,e){t(e,5,0,e.component.label)})}function i(t){return s._12(0,[(t()(),s._15(16777216,null,null,1,"checkbox",[],null,[[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchstart"],[null,"touchend"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==s._16(t,1)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,1).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,1).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,1).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,1).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,1).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,1).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,1).touchEnd(n)&&o}return o},o,u)),s._17(4308992,null,0,a.a,[s.Q,s._18],null,null)],function(t,e){t(e,1,0)},null)}var r=n("fGN8"),s=n("/oeL"),a=n("QSW1");n.d(e,"b",function(){return u}),e.a=o;var l=[r.a],u=s._11({encapsulation:0,styles:l,data:{}});s._19("checkbox",a.a,i,{position:"position",width:"width",height:"height",left:"left",top:"top",right:"right",bottom:"bottom",visible:"visible",alpha:"alpha",depth:"depth",rotation:"rotation",scalex:"scalex",scaley:"scaley",tooltip:"tooltip",backgroundcolor:"backgroundcolor",filter:"filter",buttonMode:"buttonMode",label:"label",iconSelected:"iconSelected",iconUnSelected:"iconUnSelected"},{},[])},sOyH:function(t,e,n){"use strict";var o=n("ihW0"),i=n("Pu9O"),r=n("gILL"),s=n("byMr"),a=n("vgYD"),l=n("/ZnK"),u=n("oWBL"),h=n("PbJf");n.d(e,"a",function(){return p});var c=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),p=function(t){function e(){var e=t.call(this,!0,!0)||this;return e.rulerInput=null,e.start=null,e.stop=null,e.rulerInput=new o.a,e.start=new i.a(0,0),e.stop=new i.a(0,0),e.addChild(e.rulerInput),e}return c(e,t),Object.defineProperty(e.prototype,"tagName",{get:function(){return"Ruler"},enumerable:!0,configurable:!0}),e.prototype.setData=function(t,e,n){void 0===n&&(n=h.a.MM);var o=t.add(e).multiply(.5);this.x=o.x,this.y=o.y,this.start=t.subtract(o),this.stop=e.subtract(o);var i=0,r=1;n==h.a.MM?(i=0,r=10):n==h.a.CM?(i=1,r=1):(i=2,r=.01);var s=this.start.subtract(this.stop).length*r;this.rulerInput.value=s,this.rulerInput.decimalPlaces=i,this.rulerInput.inputNumberScale=r,this.rulerInput.inputData&&(this.rulerInput.inputData.value=s),this.draw()},Object.defineProperty(e.prototype,"value",{get:function(){return this.rulerInput.value},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this.start.setTo(0,0),this.stop.setTo(0,0),this.depth=0,this.rulerInput.clear()},e.prototype.draw=function(){if(this.stage){this.graphics.clear();var t=r.a.rotateVector(this.start.subtract(this.stop),.5*Math.PI),e=r.a.rotateVector(this.start.subtract(this.stop),-.5*Math.PI);t=t.normalize().multiply(10),e=e.normalize().multiply(10);var n,o,i,u;n=this.start.add(t),o=this.start.add(e),i=this.stop.add(t),u=this.stop.add(e);var h,c,p,d;t=r.a.rotateVector(this.start.subtract(this.stop),Math.PI/3),e=r.a.rotateVector(this.start.subtract(this.stop),Math.PI/3+Math.PI),t=t.normalize().multiply(5),e=e.normalize().multiply(5),h=this.start.add(t),c=this.start.add(e),p=this.stop.add(t),d=this.stop.add(e);var f=[this.start,this.stop,n,o,i,u,h,c,p,d],g=new s.a;g.addPoints(f);var m=g.boundRect;this.graphics.width=m.width>>1,this.graphics.height=m.height>>1,this.graphics.lineStyle(1,a.a.RULER_SUBLINE,1),l.a.drawLine(this.graphics,this.start,this.stop),l.a.drawLine(this.graphics,n,o),l.a.drawLine(this.graphics,i,u),l.a.drawLine(this.graphics,h,c),l.a.drawLine(this.graphics,p,d),this.graphics.endStroke();var _=r.a.vectorAngle(this.start,this.stop);_<-90?_+=180:_>90&&(_-=180),this.rulerInput.rotate(_%180)}},e}(u.a)},sg3d:function(t,e,n){"use strict";var o=n("/oeL"),i=n("8Tef"),r=n("fr6C"),s=n("tTVb");n.d(e,"a",function(){return l});var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),l=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.iconUp="",o.iconOver="",o.iconDown="",o.label="",o.onGlobalTouchStartLambda=function(t){o.onGlobalTouchStart(t)},o}return a(e,t),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.updateComponentProperty()},e.prototype.touchEnd=function(){if(null==this.content&&this.rendererClass){var t=this.rendererClass,e=r.a.inst.createComponent(t,this.contentContainer);this.content=e.instance}this.content&&(this.content.visible="true",document.body.addEventListener(s.a.TOUCH_START,this.onGlobalTouchStartLambda))},e.prototype.onGlobalTouchStart=function(t){document.body.removeEventListener(s.a.TOUCH_START,this.onGlobalTouchStartLambda),this.content&&(this.content.visible="false")},e.ctorParameters=function(){return[{type:o.Q},{type:o._18}]},e}(i.a)},snVD:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){this.inputMarkedEdges=null,this.inputFreshEdges=null,this.outputReservedEdges=null,this.outputCreateEdges=null,this.outputDeleteEdges=null,this.inputMarkedEdges=[],this.inputFreshEdges=[],this.outputReservedEdges=[],this.outputCreateEdges=[],this.outputDeleteEdges=[]}return t.prototype.clear=function(){this.inputMarkedEdges.length=0,this.inputFreshEdges.length=0,this.outputReservedEdges.length=0,this.outputCreateEdges.length=0,this.outputDeleteEdges.length=0},t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},t.prototype.merge=function(){for(var t,e,n,o,i=0,r=this.inputFreshEdges;i<r.length;i++){t=r[i],o=!1;for(var s=0,a=this.inputMarkedEdges;s<a.length;s++){if(e=a[s],t.endsEqual(e)){o=!0,this.outputReservedEdges.push(e);break}if(1==e.containsEqual(t)){o=!0,t.mark=e.mark,this.outputCreateEdges.push(t);break}}o||this.outputCreateEdges.push(t)}for(var l,u=0,h=this.inputMarkedEdges;u<h.length;u++){e=h[u],l=!1;for(var c=0,p=this.outputReservedEdges;c<p.length;c++)if(n=p[c],e.mark==n.mark){l=!0;break}l||this.outputDeleteEdges.push(e)}},t}();o._instance=null},tTVb:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){}return t}();o.TOUCH_START="touchstart",o.TOUCH_MOVE="touchmove",o.TOUCH_END="touchend"},tXdn:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){}return t}();o.MOVE_TO=0,o.LINE_TO=1},tdkC:function(t,e,n){"use strict";var o=n("k4IB");n.d(e,"a",function(){return i});var i=function(){function t(){this.eventManager=o.a.inst}return t.prototype.addEvent=function(t,e,n){this.eventManager.addEvent(t,e,n,this)},t.prototype.removeEvent=function(t,e,n){this.eventManager.removeEvent(t,e,n,this)},t.prototype.dispatchEvent=function(t,e){this.eventManager.trigger(t,e)},t}()},ul9E:function(t,e,n){"use strict";var o=n("pPSP"),i=n("+N0H"),r=n("IKKv"),s=n("Pu9O");n.d(e,"a",function(){return a});var a=function(){function t(){}return Object.defineProperty(t,"inst",{get:function(){return null==t._instance&&(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),t.prototype.register=function(){CallJS.addCallback("app_js_quit",this.app_js_quit,this),CallJS.addCallback("app_js_openHuxing",this.app_js_openHuxing,this),CallJS.addCallback("app_js_addPath",this.app_js_addPath,this)},t.prototype.app_js_openHuxing=function(t,e){var n=null;try{var r=decodeURI(e);n=JSON.parse(r)}catch(t){if(!(e instanceof Object))return o.a.inst.warning("户型数据解析错误"),"false";n=e}var s=!1;return n&&(s=i.a.inst.open(t,n)),1==s?"true":"false"},t.prototype.app_js_addPath=function(t){var e=null;try{var n=decodeURI(t);e=JSON.parse(n)}catch(t){return}for(var o=[],r=0,a=e;r<a.length;r++){var l=a[r];o.push(new s.a(l.x,l.y))}i.a.inst.addPath(o)},t.prototype.app_js_quit=function(){r.a.inst.close();var t=i.a.inst;return 1==t.savable?(t.snapshot(window.innerHeight,window.innerHeight,function(e){var n={};n.no=t.no,n.data=t.dumpString(),n.area=Math.round(100*t.calcPureArea())/100,n.photo2d=e.src;var o=JSON.stringify(n);CallJS.js_app_quit(o)}),"true"):"false"},t.prototype.onSaveHuxingSuccess=function(t){this.saveHuxingProperty()},t.prototype.onSaveHuxingError=function(t){window.alert("保存户型失败")},t.prototype.saveHuxingProperty=function(){},t.prototype.onSaveHuxingPropertySuccess=function(t){},t.prototype.onSaveHuxingPropertyError=function(t){window.alert("保存户型失败")},t}();a._instance=null},v4Xy:function(t,e,n){"use strict";var o=n("6eZy");n.d(e,"a",function(){return r});var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=function(t){function e(){var e=t.call(this)||this;return e._dom=document.body,e}return i(e,t),e}(o.a)},vP7T:function(t,e,n){"use strict";var o=n("Pu9O");n.d(e,"a",function(){return i});var i=function(){function t(t,e,n,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===o&&(o=0),this._x=0,this._y=0,this._width=0,this._height=0,this._x=t,this._y=e,this._width=n,this._height=o}return t.prototype.setTo=function(t,e,n,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===o&&(o=0),this._x=t,this._y=e,this._width=n,this._height=o},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this._x+this._width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this._y+this._height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomRight",{get:function(){return new o.a(this.right,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topLeft",{get:function(){return new o.a(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"centerPoint",{get:function(){return this.topLeft.add(this.bottomRight).multiply(.5)},enumerable:!0,configurable:!0}),t.prototype.setEmpty=function(){this._x=0,this._y=0,this._width=0,this._height=0},t}()},vgYD:function(t,e,n){"use strict";var o=n("e/cs");n.d(e,"a",function(){return i});var i=function(){function t(){}return t.toARGB=function(t){return[t>>24&255,t>>16&255,t>>8&255,255&t]},t.toRGB=function(t){return[t>>16&255,t>>8&255,255&t]},t.toString=function(t){return"#"+o.a.completion(t.toString(16),6)},t.toRGBstring=function(e){return"rgb("+t.toRGB(e).join(",")+")"},t.toRGBAstring=function(e,n){var o=t.toRGB(e),i=o.join(",");return"rgba("+(i+=","+n)+")"},t}();i.MASTER=16764416,i.MASTER2=56034,i.WHITE=16777215,i.BLACK=0,i.ORANGE=16424226,i.GRAY=10066329,i.RED=15597568,i.BLUE=4886754,i.BLUE2=5349887,i.BLUE_GREEN=56034,i.FONT=3355443,i.FONT2=10066329,i.FONT3=4868682,i.FONT4=0,i.FONT5=16777215,i.YELLOW_BUTTON_UP=16770099,i.YELLOW_BUTTON_OVER=16770099,i.YELLOW_BUTTON_DOWN=16776994,i.WHITE_GRAY_BUTTON_UP=15198183,i.WHITE_GRAY_BUTTON_OVER=14540253,i.WHITE_GRAY_BUTTON_DOWN=14474460,i.BLACK_GRAY_BUTTON_UP=10197915,i.BLACK_GRAY_BUTTON_OVER=9342606,i.BLACK_GRAY_BUTTON_DOWN=8421504,i.BORDER=13421772,i.LINE=9934743,i.LINE2=15263976,i.WARNING=12071425,i.RULER_SUBLINE=6710886,i.HEAD=3749704,i.HEAD_FONT=12434877,i.TOOLBAR_BG=16119285,i.NORMAL_WALL_FILL_COLOR=11184810,i.BEARING_WALL_FILL_COLOR=0,i.PARAPET_WALL_FILL_COLOR=16777215,i.WALL_HOVER_FILL_COLOR=i.BLUE2,i.WALL_FOCUS_FILL_COLOR=i.BLUE2,i.WALL_BORDER_COLOR=6710886,i.CORNER_FILL_COLOR=8947848,i.CORNER_HOVER_FILL_COLOR=i.BLUE2,i.CORNER_FOCUS_FILL_COLOR=i.BLUE2,i.OPENING_FILL_COLOR=16777215,i.OPENING_BORDER_COLOR=6710886,i.OPENING_HOVER_BORDER_COLOR=i.BLUE2,i.OPENING_FOCUS_BORDER_COLOR=i.BLUE2,i.OPENING_CTRL_FILL_COLOR=16777215,i.OPENING_CTRL_BORDER_COLOR=i.BLUE2,i.MODEL_BORDER_COLOR=16777215,i.MODEL_HOVER_BORDER_COLOR=i.BLUE2,i.MODEL_FOCUS_BORDER_COLOR=i.BLUE2,i.MODEL_BORDER_ALPHA=0,i.MODEL_HOVER_BORDER_ALPHA=1,i.MODEL_FOCUS_BORDER_ALPHA=1,i.STRUCT_BORDER_COLOR=9539985,i.STRUCT_FOCUS_BORDER_COLOR=i.BLUE2},w9Am:function(t,e,n){"use strict";var o=n("ZvbM"),i=n("Eezr"),r=n("zj8U");n.d(e,"a",function(){return a});var s=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=function(t){function e(){var e=t.call(this,!1,!1)||this;return e.depth=i.a.TAG,e.mouseEventEnable=!1,e}return s(e,t),Object.defineProperty(e,"inst",{get:function(){return e._instance||(e._instance=new e),e._instance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tagName",{get:function(){return"TagGroup"},enumerable:!0,configurable:!0}),e.prototype.clear=function(){for(var t=0;t<this.numChildren;t++){this.getChildAt(t).visible=!1}},e.prototype.fetchIdleTag=function(){for(var t,e=0;e<this.numChildren;e++)if(t=this.getChildAt(e),0==t.visible)return t;return null},e.prototype.addTag=function(t,e,n,o){void 0===n&&(n=""),void 0===o&&(o=0);var i=this.fetchIdleTag();i?i.visible=!0:(i=new r.a,this.addChild(i)),i.scaleX=i.scaleY=1/this.scene.scale,i.setData(t,e,n,o)},e.prototype.update=function(){this.clear();var t,e=this.scene.rooms;for(var n in e){var o=e[n];t=o.boundPolygon.center,this.addTag(t.x,t.y,o.tag,o.calcPureArea())}},e}(o.a);a._instance=null},wQAS:function(t,e,n){"use strict";var o=n("/oeL"),i=n("XKz0"),r=n("WjyP"),s=n("fr6C"),a=n("qweZ"),l=n("pPSP"),u=n("ul9E");n.d(e,"a",function(){return h});var h=function(){function t(e,n,o){t.inst=this,r.a.inst.register(e),s.a.inst.register(this,o,n),u.a.inst.register(),a.a.inst.no=this.getQueryString("no"),r.a.TOKEN=this.getQueryString("token"),r.a.USER_ID=this.getQueryString("userId")}return t.prototype.ngAfterViewInit=function(){l.a.inst=this.alert,CallJS.js_app_pageLoaded()},t.prototype.getQueryString=function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),n=location.search.substr(1).match(e);return null!=n?n[2]:""},t.ctorParameters=function(){return[{type:i.m},{type:o.e},{type:o.Q}]},t}()},wRF1:function(t,e,n){"use strict";var o=n("iHFl");n.d(e,"a",function(){return r});var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=function(t){function e(e,n){return void 0===n&&(n=null),t.call(this,e,n)||this}return i(e,t),e}(o.a);r.OPTION_SETTING_INPUT_CHANGE="OPTION_SETTING_INPUT_CHANGE"},wqUL:function(t,e,n){"use strict";var o=n("/oeL"),i=n("8Tef"),r=n("AslO"),s=n("UPT1"),a=n("6p4A");n.d(e,"a",function(){return u});var l=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),u=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.rulerUp="assets/view/toolbar/ruler_up_3x.png",o.rulerDown="assets/view/toolbar/ruler_up_3x.png",o.optionUp="assets/view/toolbar/option_up_3x.png",o.optionDown="assets/view/toolbar/option_up_3x.png",o.buttons=[],o.position="relative",o}return l(e,t),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.buttons=this.buttonQueryList.toArray(),this.left=-7,this.top=12,this.width="48px",this.height=56*e.contentCount+20+"px";for(var t=this.buttons.length,n=t-1;n>=0;n--)this.buttons[n].visible=n>=t-e.contentCount?"true":"false";this.updateComponentProperty();var o=new r.a;o.width=this.widthNumber,o.height=this.heightNumber,o.draw(),this.bgContainer.nativeElement.appendChild(o.dom)},e.prototype.rulerHandler=function(){1==s.a.inst.visible?s.a.inst.hideEdgeRuler():s.a.inst.showEdgeRuler()},e.prototype.optionHandler=function(){a.a.inst.open()},e.ctorParameters=function(){return[{type:o.Q},{type:o._18}]},e}(i.a);u.contentCount=1},wzWt:function(t,e,n){"use strict";var o=n("/oeL"),i=n("8Tef"),r=n("+N0H"),s=n("X973");n.d(e,"a",function(){return l});var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),l=function(t){function e(n,o){var i=t.call(this,n,o)||this;return i.addStructUp="assets/view/struct/add_struct_3x.png",i.addStructDown="assets/view/struct/add_struct_3x.png",i.addNoteUp="assets/view/struct/add_note_3x.png",i.addNoteDown="assets/view/struct/add_note_3x.png",e._instance=i,i}return a(e,t),Object.defineProperty(e,"inst",{get:function(){return e._instance},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.updateComponentProperty(),this.resourceOperator=this.resourceOperatorRef.nativeElement,this.renderer.setStyle(this.resourceOperator,"left","10px"),this.renderer.setStyle(this.resourceOperator,"top",.5*(window.innerHeight-127+56)+"px"),this.structView.visible="false",this.structView.parent=this},e.prototype.addStructHandler=function(){this.renderer.setStyle(this.resourceOperator,"visible","false"),this.structView.visible="true",s.a.inst.moveHandler()},e.prototype.addNoteHandler=function(){r.a.inst.createNote(),s.a.inst.moveHandler()},e.prototype.close=function(){this.renderer.setStyle(this.resourceOperator,"visible","true"),this.structView.visible="false"},e.ctorParameters=function(){return[{type:o.Q},{type:o._18}]},e}(i.a);l._instance=null},xBDO:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=[".bg[_ngcontent-%COMP%]{height:40px}.settingbar[_ngcontent-%COMP%]{height:100%}"]},yGZz:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){}return t}();o.record={"8bca463e768e11e7962efa163edde52c":{category:3,width:180,length:180,state:0,name:"厨房",no:"8bca463e768e11e7962efa163edde52c",plan_url:"assets/local/2d/images/2bd03eca7b5011e7b85900163e0e72dc.jpg",id:44,preview_url:""},"9d6f2c5c6a0811e79b2e000c29daddf7":{category:3,width:150,length:150,state:0,name:"卧室",no:"9d6f2c5c6a0811e79b2e000c29daddf7",plan_url:"assets/local/2d/images/6f91458ec39711e7a11f00163e0e72dc.jpg",id:7,preview_url:""},"429c5b5c773611e7b175fa163edde52c":{category:3,width:120,length:120,state:0,name:"客餐厅",no:"429c5b5c773611e7b175fa163edde52c",plan_url:"assets/local/2d/images/c9a0d5a27b4f11e7b85900163e0e72dc.jpg",id:51,preview_url:""},"985e1826768e11e7962efa163edde52c":{category:3,width:100,length:100,state:0,name:"客厅",no:"985e1826768e11e7962efa163edde52c",plan_url:"assets/local/2d/images/1f287cbe7b5011e7a4d800163e0e72dc.jpg",id:45,preview_url:""},c9df4ca8768e11e7962efa163edde52c:{category:3,width:80,length:80,state:0,name:"卫生间",no:"c9df4ca8768e11e7962efa163edde52c",plan_url:"assets/local/2d/images/f5119aaa7b4f11e7a4d800163e0e72dc.jpg",id:48,preview_url:""},e57b8076768e11e78f3dfa163edde52c:{category:3,width:120,length:100,state:0,name:"阳台",no:"e57b8076768e11e78f3dfa163edde52c",plan_url:"assets/local/2d/images/1b8d12a87b5b11e7b85900163e0e72dc.jpg",id:50,preview_url:""}}},yNz0:function(t,e,n){"use strict";var o=n("36ei"),i=n("MPvg");n.d(e,"a",function(){return r});var r=function(){function t(t){if(void 0===t&&(t=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.position=new o.a,this.matrix4=new i.a,16!=t.length)throw new Error("rawdata length is not 16");this.matrix4.set(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}return t.prototype.append=function(t){this.matrix4=t.matrix4.multiply(this.matrix4)},t.prototype.appendTranslation=function(t,e,n){this.matrix4=this.matrix4.makeTranslation(t,e,n)},t.prototype.appendScale=function(t,e,n){this.matrix4=this.matrix4.makeScale(t,e,n)},t.prototype.appendRotation=function(t,e){var n=new i.b(e.x,e.y,e.z);this.matrix4=this.matrix4.makeRotationAxis(n,t)},t.prototype.appendRotationXYZ=function(t,e,n,o){void 0===o&&(o="XYZ");var r=new i.c(t,e,n,o);this.matrix4.makeRotationFromEuler(r)},t.prototype.transformPoint=function(t){var e=new i.b(t.x,t.y,t.z);return e.applyMatrix4(this.matrix4),new o.a(e.x,e.y,e.z)},t.prototype.deltaTransformPoint=function(e){var n=new i.b(e.x,e.y,e.z),r=this.matrix4.toArray().concat();r[3]=0,r[7]=0,r[11]=0;var s=new t(r);return n=n.applyMatrix4(s.matrix4),new o.a(n.x,n.y,n.z)},t.prototype.recompose=function(t){var e=new i.b(t[0].x,t[0].y,t[0].z),n=new i.b(t[2].x,t[2].y,t[2].z),o=new i.d;o.setFromAxisAngle(new i.b(1,0,0),t[1].x),o.setFromAxisAngle(new i.b(0,1,0),t[1].y),o.setFromAxisAngle(new i.b(0,0,1),t[1].z),this.matrix4.compose(e,o,n)},t.prototype.invert=function(){return this.matrix4=this.matrix4.getInverse(this.matrix4),!0},t.prototype.identity=function(){this.matrix4.identity()},t.prototype.transpose=function(){this.matrix4.transpose()},t.prototype.clone=function(){return new t(this.matrix4.toArray())},t}()},yOTB:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){this.tagPool={},this.relationPool={}}return t.prototype.UpdateFlag=function(){},t.prototype.addTag=function(t,e){void 0===e&&(e=null);for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];if(this.tagPool.hasOwnProperty(t))return void console.error("添加重复，错误: "+t);this.tagPool[t]=!0;var i=[];null!=e&&i.push(e),i=i.concat(n);for(var r=0,s=i;r<s.length;r++){var a=s[r];this.relationPool.hasOwnProperty(a)||(this.relationPool[a]=[]);var l=this.relationPool[a];-1==l.indexOf(t)&&l.push(t)}},t.prototype.hasTag=function(t){return this.tagPool.hasOwnProperty(t)},t.prototype.getValue=function(t){return this.tagPool[t]},t.prototype.setValue=function(t,e){if(!this.hasTag(t))return void console.error("没有这个tag ： "+t);if(this.tagPool[t]=e,e&&this.relationPool.hasOwnProperty(t))for(var n=0,o=this.relationPool[t];n<o.length;n++){var i=o[n];this.setValue(i,e)}},t}();o.TAG_POSITION="position",o.TAG_POLYGON="polygon",o.TAG_BOUNDARY="boundary",o.TAG_ROOM="room"},yQ03:function(t,e,n){"use strict";function o(t){return s._12(0,[s._13(402653184,1,{bgRef:0}),s._13(402653184,2,{iconRef:0}),s._13(402653184,3,{labelRef:0}),s._13(402653184,4,{line:0}),s._13(671088640,5,{buttonQueryList:1}),(t()(),s._15(0,[[1,0],["bg",1]],null,15,"div",[["class","bg"]],null,null,null,null,null)),(t()(),s._14(null,["\n    "])),(t()(),s._15(0,[[2,0],["icon",1]],null,0,"div",[["class","icon"]],null,null,null,null,null)),(t()(),s._14(null,["\n    "])),(t()(),s._15(0,[[3,0],["label",1]],null,1,"div",[["class","label"]],null,null,null,null,null)),(t()(),s._14(null,["",""])),(t()(),s._14(null,["\n\n    "])),(t()(),s._15(16777216,null,null,1,"color-button",[["colorStyle","4"]],null,[[null,"touchstart"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchend"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==s._16(t,13)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,13).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,13).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,13).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,13).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,13).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,13).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,13).touchEnd(n)&&o}if("touchstart"===e){o=!1!==i.click1()&&o}return o},l.a,l.b)),s._17(4308992,[[5,4]],0,u.a,[s.Q,s._18],{colorStyle:[0,"colorStyle"]},null),(t()(),s._14(null,["\n    "])),(t()(),s._15(16777216,null,null,1,"line",[["height","18px"],["visible","false"],["width","1px"]],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==s._16(t,16)._touchMove(n)&&o}return o},h.a,h.b)),s._17(4308992,[[4,4],["line",4]],0,c.a,[s.Q,s._18],{width:[0,"width"],height:[1,"height"],visible:[2,"visible"]},null),(t()(),s._14(null,["\n    "])),(t()(),s._15(16777216,null,null,1,"color-button",[["colorStyle","4"]],null,[[null,"touchstart"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchend"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==s._16(t,19)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,19).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,19).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,19).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,19).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,19).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,19).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,19).touchEnd(n)&&o}if("touchstart"===e){o=!1!==i.click2()&&o}return o},l.a,l.b)),s._17(4308992,[[5,4]],0,u.a,[s.Q,s._18],{colorStyle:[0,"colorStyle"]},null),(t()(),s._14(null,["\n"]))],function(t,e){t(e,13,0,"4");t(e,16,0,"1px","18px","false");t(e,19,0,"4")},function(t,e){t(e,10,0,e.component.message)})}function i(t){return s._12(0,[(t()(),s._15(16777216,null,null,1,"alert",[],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==s._16(t,1)._touchMove(n)&&o}return o},o,d)),s._17(4308992,null,0,a.a,[s.Q,s._18],null,null)],function(t,e){t(e,1,0)},null)}var r=n("lOIQ"),s=n("/oeL"),a=n("pPSP"),l=n("3kKB"),u=n("ZCEW"),h=n("NBqy"),c=n("N8J1");n.d(e,"b",function(){return d}),e.a=o;var p=[r.a],d=s._11({encapsulation:0,styles:p,data:{}});s._19("alert",a.a,i,{position:"position",width:"width",height:"height",left:"left",top:"top",right:"right",bottom:"bottom",visible:"visible",alpha:"alpha",depth:"depth",rotation:"rotation",scalex:"scalex",scaley:"scaley",tooltip:"tooltip",backgroundcolor:"backgroundcolor",filter:"filter",buttonMode:"buttonMode"},{},[])},ymZg:function(t,e,n){"use strict";var o=n("/oeL"),i=n("ExGp");n.d(e,"a",function(){return s});var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.label="",o.iconSelected="assets/components/radiobutton/selected_3x.png",o.iconUnSelected="assets/components/radiobutton/unselected_3x.png",o.iconUnEnabledSelected="assets/components/radiobutton/unenabled_selected_3x.png",o.iconUnEnabledUnSelected="assets/components/radiobutton/unenabled_unselected_3x.png",o.hasIcon="true",o.selectedColor="#2B7EDF",o.unSelectedColor="#666666",o.unEnabledColor="#e3e3e3",o.textSize=12,o}return r(e,t),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.updateComponentProperty(),this.radio=this.radioRef.nativeElement,this.radioLabel=this.radioLabelRef.nativeElement,"false"==this.hasIcon&&this.renderer.setStyle(this.radio,"display","none"),this.renderer.setStyle(this.radioLabel,"line-height",this._height),this.renderer.setStyle(this.radioLabel,"vertical-align","middle"),this.renderer.setStyle(this.radioLabel,"font-size",this.textSize+"px"),this.upStyle()},Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this.renderer.setStyle(this.dom,"height",t),this.radioLabel&&this.renderer.setStyle(this.radioLabel,"line-height",t)},enumerable:!0,configurable:!0}),e.prototype.touchStart=function(t){void 0===t&&(t=null),1==this.enabled&&(this.selected=!this.selected)},e.prototype.upStyle=function(){"true"==this.hasIcon&&this.renderer.setStyle(this.radio,"background-image","url("+this.iconUnSelected+")"),this.renderer.setStyle(this.radioLabel,"color",this.unSelectedColor),t.prototype.upStyle.call(this)},e.prototype.downStyle=function(){"true"==this.hasIcon&&this.renderer.setStyle(this.radio,"background-image","url("+this.iconSelected+")"),this.renderer.setStyle(this.radioLabel,"color",this.selectedColor),t.prototype.downStyle.call(this)},Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},set:function(t){this._enabled=t,1==t?this.selected=this.selected:("true"==this.hasIcon&&(1==this.selected?this.renderer.setStyle(this.radio,"background-image","url("+this.iconUnEnabledSelected+")"):this.renderer.setStyle(this.radio,"background-image","url("+this.iconUnEnabledUnSelected+")")),this.renderer.setStyle(this.radioLabel,"color",this.unEnabledColor))},enumerable:!0,configurable:!0}),e.ctorParameters=function(){return[{type:o.Q},{type:o._18}]},e}(i.a)},z4kl:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=[".slideBox[_ngcontent-%COMP%], .textInput[_ngcontent-%COMP%]{position:absolute}.textInput[_ngcontent-%COMP%]{width:70%;height:40px;padding-left:15px;color:#333;font-size:14px;text-align:left;line-height:40px;border:0 solid #000;outline-width:0}"]},zJDb:function(t,e,n){"use strict";function o(t){return s._12(0,[s._13(402653184,1,{slideBox:0}),s._13(402653184,2,{textInputRef:0}),(t()(),s._15(16777216,null,null,1,"slide-box",[["class","slideBox"],["height","42px"],["label","手动输入"],["textSize","14"],["width","100%"]],null,[[null,"touchend"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchstart"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==s._16(t,3)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==s._16(t,3).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==s._16(t,3).mouseOut(n)&&o}if("mousedown"===e){o=!1!==s._16(t,3).mouseDown(n)&&o}if("mouseup"===e){o=!1!==s._16(t,3).mouseUp(n)&&o}if("click"===e){o=!1!==s._16(t,3).mouseClick(n)&&o}if("touchstart"===e){o=!1!==s._16(t,3).touchStart(n)&&o}if("touchend"===e){o=!1!==s._16(t,3).touchEnd(n)&&o}if("touchend"===e){o=!1!==i.slideClick()&&o}return o},l.a,l.b)),s._17(4308992,[[1,4],["slideBox",4]],0,u.a,[s.Q,s._18],{width:[0,"width"],height:[1,"height"],label:[2,"label"],textSize:[3,"textSize"]},null),(t()(),s._14(null,["\n"])),(t()(),s._15(0,[[2,0],["textInput",1]],null,0,"input",[["autocomplete","off"],["class","textInput"],["type","number"],["value",""]],null,null,null,null,null))],function(t,e){t(e,3,0,"100%","42px","手动输入","14")},null)}function i(t){return s._12(0,[(t()(),s._15(16777216,null,null,1,"option-input",[],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==s._16(t,1)._touchMove(n)&&o}return o},o,c)),s._17(4308992,null,0,a.a,[s.Q,s._18],null,null)],function(t,e){t(e,1,0)},null)}var r=n("z4kl"),s=n("/oeL"),a=n("Luvd"),l=n("3rrf"),u=n("bQVa");n.d(e,"b",function(){return c}),e.a=o;var h=[r.a],c=s._11({encapsulation:0,styles:h,data:{}});s._19("option-input",a.a,i,{position:"position",width:"width",height:"height",left:"left",top:"top",right:"right",bottom:"bottom",visible:"visible",alpha:"alpha",depth:"depth",rotation:"rotation",scalex:"scalex",scaley:"scaley",tooltip:"tooltip",backgroundcolor:"backgroundcolor",filter:"filter",buttonMode:"buttonMode"},{},[])},zj8U:function(t,e,n){"use strict";var o=n("ZvbM"),i=n("S23b"),r=n("vgYD");n.d(e,"a",function(){return a});var s=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=function(t){function e(){var n=t.call(this,!1,!1)||this;return n.roomNameLabel=new i.a,n.roomNameLabel.y=-9,n.roomNameLabel.width=50,n.roomNameLabel.height=20,n.roomNameLabel.text="未命名",n.roomNameLabel.size=10,n.roomNameLabel.color=r.a.toString(r.a.FONT),n.roomNameLabel.textGlow="0px 0px 2px #eeeeee , -0px -0px 2px #eeeeee",n.roomNameLabel.align="center",n.addChild(n.roomNameLabel),n.areaLabel=new i.a,n.areaLabel.y=9,n.areaLabel.width=50,n.areaLabel.height=20,n.areaLabel.text="0"+e.AREA_UNIT,n.areaLabel.size=10,n.areaLabel.color=r.a.toString(r.a.FONT),n.areaLabel.textGlow="0px 0px 2px #eeeeee , -0px -0px 2px #eeeeee",n.areaLabel.align="center",n.addChild(n.areaLabel),n}return s(e,t),Object.defineProperty(e.prototype,"tagName",{get:function(){return"Tag"},enumerable:!0,configurable:!0}),e.prototype.setData=function(t,n,o,i){void 0===o&&(o=""),void 0===i&&(i=0);var r=Math.max(this.roomNameLabel.width,this.areaLabel.width),s=this.roomNameLabel.height+this.areaLabel.height;this.x=t-.5*r/this.scene.scale,this.y=n-.5*s/this.scene.scale,this.roomNameLabel.text=""==o||null==o?"未命名":o,i=Math.round(100*i)/100,this.areaLabel.text=i+e.AREA_UNIT},e}(o.a);a.AREA_UNIT="m²"},zvuX:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){this.inputMarkedPolys=null,this.inputFreshPolys=null,this.outputReservedPolys=null,this.outputUpdatePolys=null,this.outputCreatePolys=null,this.outputDeletePolys=null,this.inputMarkedPolys=[],this.inputFreshPolys=[],this.outputReservedPolys=[],this.outputUpdatePolys=[],this.outputCreatePolys=[],this.outputDeletePolys=[]}return t.prototype.clear=function(){this.inputMarkedPolys.length=0,this.inputFreshPolys.length=0,this.outputReservedPolys.length=0,this.outputUpdatePolys.length=0,this.outputCreatePolys.length=0,this.outputDeletePolys.length=0},t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},t.prototype.merge=function(){var t,e,n,o,i;for(t=0;t<this.inputFreshPolys.length;){for(n=this.inputFreshPolys[t],i=!1,e=0;e<this.inputMarkedPolys.length;e++){if(o=this.inputMarkedPolys[e],n.equal(o)){n.mark=o.mark,this.outputReservedPolys.push(n),this.inputMarkedPolys.splice(e,1),i=!0;break}if(n.shapeEqual(o)){n.mark=o.mark,this.outputUpdatePolys.push(n),this.inputMarkedPolys.splice(e,1),i=!0;break}}i?this.inputFreshPolys.splice(t,1):t+=1}for(t=0;t<this.inputFreshPolys.length;){for(n=this.inputFreshPolys[t],i=!1,e=0;e<this.inputMarkedPolys.length;e++)if(o=this.inputMarkedPolys[e],n.adjacent(o)){n.mark=o.mark,this.outputUpdatePolys.push(n),this.inputMarkedPolys.splice(e,1),i=!0;break}i?this.inputFreshPolys.splice(t,1):t+=1}for(var r=0,s=this.inputMarkedPolys;r<s.length;r++)o=s[r],this.outputDeletePolys.push(o);for(var a=0,l=this.inputFreshPolys;a<l.length;a++)n=l[a],this.outputCreatePolys.push(n)},t}();o._instance=null}},[0]);